[{"content":"å‡†å¤‡ ğŸŒŸå¤‡ä»½\nâ¡ï¸è´¦å·ï¼š Settings \u0026ndash; Data import/exportï¼Œå…¨éƒ¨å¯¼å‡º\nä»¥ä¸‹æ–‡ä»¶å¤¹ç”¨ FTP å®¢æˆ·ç«¯ï¼ˆFileZillaï¼‰å¤‡ä»½åˆ°ç”µè„‘\nâ¡ï¸æ•°æ®åº“ï¼š\nmkdir -p /pleromabackup chmod 777 /pleromabackup ç™»å…¥æ•°æ®åº“\nsu - postgres psql -U postgres postgres=# \\! pg_dump pleroma -f /pleromabackup/pleroma.pgdump â¡ï¸Pleroma é…ç½®ï¼š/etc/pleroma/\nâ¡ï¸Pleroma é™æ€æ–‡ä»¶ï¼š/var/lib/pleroma\nğŸŒŸæŠŠåŸŸåçš„IPæŒ‡å‘æ–°æœåŠ¡å™¨\næ­å»ºè¿‡ç¨‹ å®‰è£…ä¾èµ–\napt update apt upgrade apt install curl unzip libncurses5 postgresql postgresql-contrib nginx libmagic-dev apt install imagemagick ffmpeg libimage-exiftool-perl å®‰è£…æœ¬ä½“ï¼šæ³¨æ„ Ubuntu22 çš„FLAVOURå˜é‡æ˜¯amd64-ubuntu-jammy\nadduser --system --shell /bin/false --home /opt/akkoma akkoma export FLAVOUR=\u0026#34;amd64-ubuntu-jammy\u0026#34; su akkoma -s $SHELL -lc \u0026#34; curl \u0026#39;https://akkoma-updates.s3-website.fr-par.scw.cloud/stable/akkoma-$FLAVOUR.zip\u0026#39; -o /tmp/akkoma.zip unzip /tmp/akkoma.zip -d /tmp/ \u0026#34; su akkoma -s $SHELL -lc \u0026#34; mv /tmp/release/* /opt/akkoma rmdir /tmp/release rm /tmp/akkoma.zip \u0026#34; mkdir -p /var/lib/akkoma/uploads chown -R akkoma /var/lib/akkoma mkdir -p /var/lib/akkoma/static chown -R akkoma /var/lib/akkoma mkdir -p /etc/akkoma chown -R akkoma /etc/akkoma su akkoma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl instance gen --output /etc/akkoma/config.exs --output-psql /tmp/setup_db.psql\u0026#34; su postgres -s $SHELL -lc \u0026#34;psql -f /tmp/setup_db.psql\u0026#34; su akkoma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl migrate\u0026#34; su akkoma -s $SHELL -lc \u0026#34;./bin/pleroma daemon\u0026#34; sleep 20 \u0026amp;\u0026amp; curl http://localhost:4000/api/v1/instance su akkoma -s $SHELL -lc \u0026#34;./bin/pleroma stop\u0026#34; ç”³è¯·SSLè¯ä¹¦ï¼šå‚è€ƒé€šé…ç¬¦ SSL è¯ä¹¦è‡ªåŠ¨ç»­æœŸ\rNginxï¼š\ncp /opt/akkoma/installation/akkoma.nginx /etc/nginx/sites-available/akkoma.conf ä¿®æ”¹æ‰€æœ‰ example.tld ä¸ºå‡†å¤‡å¥½çš„åŸŸå\nvim /etc/nginx/sites-available/akkoma.conf nginx -t systemctl restart nginx cp /opt/akkoma/installation/akkoma.service /etc/systemd/system/akkoma.service systemctl start akkoma systemctl enable akkoma åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ã€å®‰è£…å‰ç«¯\ncd /opt/akkoma su akkoma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl user new admin cyouike@duck.com --admin\u0026#34; ./bin/pleroma_ctl frontend install pleroma-fe --ref stable ./bin/pleroma_ctl frontend install admin-fe --ref stable æœ¬åœ°å®šæ—¶å¤‡ä»½ mkdir /opt/local_backup cd /opt/local_backup vim backup.sh è„šæœ¬å†…å®¹ï¼š\n#!/bin/sh source /etc/profile echo \u0026#34;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”backup to local directoryâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\u0026#34; | tee -a /opt/local_backup/backuplog.txt echo `date +\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;` \u0026#34;now starting backup\u0026#34; | tee -a /opt/local_backup/backuplog.txt echo \u0026#39;stop akkoma\u0026#39; | tee -a /opt/local_backup/backuplog.txt sudo systemctl stop akkoma echo \u0026#34;0.create a backup day directory\u0026#34; | tee -a /opt/local_backup/backuplog.txt if [ -d /opt/local_backup/`date +%Y%m%d``date +%Y%m%d` ];then echo \u0026#34;Floder\u0026#34; `date +%Y%m%d` \u0026#34;already exists.\u0026#34; else mkdir /opt/local_backup/`date +%Y%m%d` echo \u0026#34;New floder\u0026#34; `date +%Y%m%d` | tee -a /opt/local_backup/backuplog.txt fi chmod +777 /opt/local_backup/`date +%Y%m%d` cd /opt/local_backup/`date +%Y%m%d` echo \u0026#34;1.dump database\u0026#34; | tee -a /opt/local_backup/backuplog.txt sudo -Hu postgres pg_dump -d akkoma --format=custom -f /opt/local_backup/`date +%Y%m%d`/akkoma.pgdump echo \u0026#34;2. copy upload \u0026amp; static folder\u0026#34; | tee -a /opt/local_backup/backuplog.txt cp -r /var/lib/akkoma/static /opt/local_backup/`date +%Y%m%d` cp -r /var/lib/akkoma/uploads /opt/local_backup/`date +%Y%m%d` echo \u0026#34;3. copy config file\u0026#34; | tee -a /opt/local_backup/backuplog.txt cp /etc/akkoma/config.exs /opt/local_backup/`date +%Y%m%d` echo \u0026#34;restart akkoma\u0026#34; | tee -a /opt/local_backup/backuplog.txt sudo systemctl start akkoma echo `date +\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;` \u0026#34;finished\u0026#34; | tee -a /opt/local_backup/backuplog.txt echo \u0026#34;Backup for\u0026#34; `date +%Y%m%d` \u0026#34;done!\u0026#34; | tee -a /opt/local_backup/backuplog.txt åˆ é™¤è¶…è¿‡15å¤©çš„å¤‡ä»½\nvim clear.sh find /opt/local_backup/ -type d -mtime +15 -exec rm -rf {} \\; è®¾ç½®å®šæ—¶ä»»åŠ¡\ncrontab -e 00 04 * * 6 root /bin/bash /opt/local_backup/backup.sh 00 23 1 * * root /bin/bash /opt/local_backup/clear.sh å‚è€ƒ \u0026amp; è‡´è°¢ Installing on Linux using OTP releases\rå¤‡ä»½pleromaè®°å½•\rManaging instance configuration\r","date":"2023-07-31T16:22:45+08:00","permalink":"https://falasool.github.io/2023/migrant-oto-akkoma/","title":"Migrant ot Akkoma"},{"content":"ä¹°æœåŠ¡å™¨ï¼Œç³»ç»Ÿä¸º Ubuntu 22.04 - x86_64\nä¹°åŸŸåï¼Œæ‰˜ç®¡åˆ° CloudFlareï¼ˆå¼€DNS onlyï¼‰ï¼ŒæŒ‡å‘æœåŠ¡å™¨IP\næ’æ’­ï¼šFlarumè®ºå›ä¹Ÿå¥½çœ‹ï¼Œè¿˜è½»é‡\nChore SSHç»ˆç«¯é¢œè‰²\n# è¿›å…¥ /etc/profile æ–‡ä»¶ vim /etc/profile # å¢åŠ è¿™ä¸€è¡Œ PS1=\u0026#39;[\\[\\e[32m\\]\\u\\[\\e[0m\\]\\[\\e[35m\\]@\\[\\e[0m\\]\\[\\e[33m\\]\\h\\[\\e[0m\\]\\[\\e[36m\\] \\W\\[\\e[0m\\]]\\$ \u0026#39; # æ›´æ–°æ–‡ä»¶ source /etc/profile å®‰è£…å¸¸ç”¨å·¥å…·\napt-get install curl wget screen tree git htop bash-completion fail2ban ufw -y å¼€æ”¾ç«¯å£\nufw allow OpenSSH ufw enable ufw allow http ufw allow https ufw allow 80/tcp ufw allow 443/tcp ufw status æ£€æŸ¥ 80 ç«¯å£æœ‰æ— è¢«å ç”¨\nnetstat -tuln | grep 80# è¿”å›ä¸ºç©ºè¯´æ˜æ²¡æœ‰ service nginx stop # nginxå äº†ï¼Œåœæ­¢nginx SMTP é…ç½®\nåˆšå¼€å§‹ç”¨çš„ Mailjetï¼Œä»€ä¹ˆéƒ½é…ç½®å¥½äº†ï¼ŒæœåŠ¡å·²ç»è·‘èµ·æ¥äº†ï¼Œå‘ä¸äº†é‚®ä»¶å¯¼è‡´è¿ç®¡ç†å‘˜ä¹Ÿæ³¨å†Œä¸äº† ğŸ˜… åŸæ¥æ˜¯è¦å‘å·¥å•äººå·¥å®¡æ ¸ï¼Œè¿˜è¢«æ‹’äº†ã€‚è½¬Mailgun\n[æµ‹è¯•SMTPé…ç½®]\n./launcher enter app x86_64 arch detected. rake emails:test[your-email@gmail.com] æœ¬ä½“ Docker\ncurl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh Discourse\ngit clone https://github.com/discourse/discourse_docker.git /var/discourse cd /var/discourse chmod 700 containers # å¯åŠ¨å®¹å™¨ ./discourse-setup #æŠ¥é”™ï¼šè¾“å…¥ Hostname for your Discourse? [discourse.example.com]: åï¼š\nChecking your domain name . . . WARNING: Port 443 of computer does not appear to be accessible using hostname: xxx.com. WARNING: Connection to http://xxx.com (port 80) also fails. This suggests that xxx.com resolves to some IP address that does not reach this machine where you are installing discourse. The first thing to do is confirm that xxx.com resolves to the IP address of this server. You usually do this at the same place you purchased the domain. If you are sure that the IP address resolves correctly, it could be a firewall issue. A web search for \u0026#34;open ports YOUR CLOUD SERVICE\u0026#34; might help. This tool is designed only for the most standard installations. If you cannot resolve the issue above, you will need to edit containers/app.yml yourself and then type ./launcher rebuild app è§£å†³ï¼šcloudflareé‡Œå¼€å¯ DNS only\næˆåŠŸå¯åŠ¨å®¹å™¨åè®¿é—®åŸŸåï¼Œæ³¨å†Œç®¡ç†å‘˜è´¦æˆ· ğŸ‰\nå‚è€ƒ \u0026amp; è‡´è°¢ è®©Discourseå’Œå…¶å®ƒç½‘ç«™è·‘åœ¨åŒä¸€å°ä¸»æœºä¸Š\rå®‰è£…ä¾èµ–ï¼šphp_serializeã€miroã€mysql2\napt-get install build-essential ruby-dev libmysqlclient-dev apt-get install rubygems gem install php_serialize gem install miro gem install mysql2 ","date":"2023-07-22T21:28:27+08:00","permalink":"https://falasool.github.io/2023/build-discourse-site-on-ubuntu22/","title":"åœ¨ Ubuntu22.04 ä¸Šæ­å»º Discourse è®ºå›"},{"content":"SSH è¿œç¨‹è¿æ¥é…ç½®\nåˆ›å»ºç™»å½•è„šæœ¬ /.ssh/remote-login-vps.sh\n#!/usr/bin/expect set timeout 30 spawn ssh -p [lindex $argv 0] [lindex $argv 1]@[lindex $argv 2] expect { \u0026#34;(yes/no)?\u0026#34; {send \u0026#34;yes\\n\u0026#34;;exp_continue} \u0026#34;password:\u0026#34; {send \u0026#34;[lindex $argv 3]\\n\u0026#34;} } interact æˆäºˆæ‰§è¡Œæƒé™ chmod +x remote-login-vps.sh\nè¿›å…¥iTerm2 -\u0026gt; preference -\u0026gt; Profilesï¼Œåˆ›å»ºä¸€ä¸ªProfileï¼Œåœ¨ General - Command - Send text at start è¾“å…¥~/.ssh/remote-login-vps.sh 22 ç”¨æˆ· ip å¯†ç \n","date":"2023-07-18T18:41:59+08:00","permalink":"https://falasool.github.io/2023/iterm2/","title":"iTerm2 é…ç½®"},{"content":"å®ç°åŠŸèƒ½ å±•ç¤ºä»»åŠ¡çš„åˆ—è¡¨\nä½¿ç”¨ v-for åœ¨æ¨¡æ¿ä¸­å¾ªç¯æ¸²æŸ“ä»»åŠ¡é¡¹ç»„ä»¶ï¼Œå¹¶æ ¹æ®ä»»åŠ¡çš„çŠ¶æ€ï¼ˆå®Œæˆæˆ–æœªå®Œæˆï¼‰è¿›è¡Œä¸åŒçš„å±•ç¤ºæ ·å¼ æ–°å¢ todo\nv-model å®ç°è¾“å…¥æ¡†å’Œæ•°æ®çš„åŒå‘ç»‘å®š ä¿®æ”¹ todo\nåˆ é™¤ todo\nå…¨é€‰/å–æ¶ˆå…¨é€‰\nç»Ÿè®¡ä»»åŠ¡\néšè—å·²å®Œæˆ todo\næœ¬åœ°å‚¨å­˜\nè¿›é˜¶\nç·¨è¼¯ List é †åº å°‡å®Œæˆçš„é …ç›®ç§»è‡³Finishå€åŸŸï¼Œä¸¦ä¸”å°‡å­—é«”æ”¹æˆåˆªé™¤ç·šæ•ˆæœ å¢åŠ  Icon ä»¥åŠé–‹å ´å‹•ç•« è¨­å®šæ—¥æœŸèˆ‡æ™‚é–“æ¨æ’­ é¡¹ç›®å®‰è£… ç”¨ npm å’Œ vite æ–°å»ºé¡¹ç›®\nnpm init vite-app ToDoList è¿›å…¥é¡¹ç›®ã€å®‰è£…ä¾èµ–ã€å¯åŠ¨\ncd ToDoList npm install npm run dev å·¥ç¨‹ç›®å½•ç»“æ„ . â”œâ”€â”€ index.html â”œâ”€â”€ node_modules # é¡¹ç›®ä¾èµ– â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json # å­˜æ”¾ä¾èµ–åŒ…ç®¡ç†åŠå‘½ä»¤ç®¡ç†ä¿¡æ¯æ–‡ä»¶ â”œâ”€â”€ public â”‚Â â””â”€â”€ favicon.ico â””â”€â”€ src # å­˜æ”¾vueæ–‡ä»¶ â”œâ”€â”€ App.vue # é¡¹ç›®çš„rootç»„ä»¶ï¼Œç”¨æ¥å¼•å…¥å…¶å®ƒæ¨¡å— â”œâ”€â”€ assets â”œâ”€â”€ components # å­˜æ”¾è‡ªå®šä¹‰çš„å…¬å…±ç»„ä»¶ï¼ˆ=éè·¯ç”±ç»„ä»¶ï¼‰ â”‚Â â””â”€â”€ Helloworld.vue â”œâ”€â”€ index.css â””â”€â”€ main.js # å…¥å£æ–‡ä»¶ï¼Œç”¨äºåˆå§‹åŒ–vueå®ä¾‹ æ€è·¯ å…ˆæ­å»ºå¥½æ¡†æ¶ï¼šå†™æ­»æ•°æ®çœ‹é¡µé¢æ•ˆæœå¹¶è°ƒæ•´\nç„¶åæŠŠä»£ç æ‹†åˆ†è¿›ä¸‰ä¸ªç»„ä»¶ï¼šHeaderã€Listã€Footerï¼ˆæ ‡é¢˜å’Œä»»åŠ¡è¾“å…¥æ¡†ã€ä»»åŠ¡åˆ—è¡¨é¡¹ã€æŒ‰é’®é€‰æ‹©é¡¹å’Œè®¡æ•°ï¼‰\nå†™JSï¼Œå¹¶æ›´æ¢æ¨¡æ¿é¡µé¢ä¸­çš„æ•°æ®ï¼Œç”¨åŠ¨æ€çš„æ•°æ®ä»£æ›¿ã€‚åœ¨setup()å…¥å£å‡½æ•°ä¸­å†™æ•°æ®æºå’Œè¦å®ç°åŠŸèƒ½çš„å‡½æ•°\nå®ç°æ­¥éª¤ HTML è¿™ä¸æ˜¯æœ€ç»ˆç»“æ„ï¼Œåé¢æœ‰ä¿®æ”¹\nCSS å®‰è£…å’Œé…ç½® TailwindCSS åœ¨Vueçš„æ ¹ç›®å½•ä¸‹ï¼Œå®‰è£… Tailwind åŠå…¶ä¾èµ–é¡¹ï¼ˆPostCSS \u0026amp; auto-prefixerï¼‰\nnpm install -D tailwindcss postcss autoprefixer ç”Ÿæˆé…ç½®æ–‡ä»¶å¹¶æ·»åŠ æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶çš„è·¯å¾„\nnpx tailwindcss init -p //tailwind.config.js module.exports = { content: [ \u0026#34;./index.html\u0026#34;, \u0026#34;./src/**/*.{vue,js,ts,jsx,tsx}\u0026#34;, ], theme: { extend: {}, }, plugins: [], } åˆ›å»ºä¸€ä¸ªtailwind.cssæ ·å¼æ–‡ä»¶ï¼Œç”¨äºåˆå§‹åŒ–å¹¶å¼•å…¥tailwindcssçš„åŸºç¡€æ ·å¼\nå¤åˆ¶ä»£ç /* /src/tailwindcss.css*/ @tailwind base; @tailwind components; @tailwind utilities; å¯¼å…¥css/tailwindcss.cssåˆ°main.js\n// src/main.js import { createApp } from \u0026#39;vue\u0026#39; import App from \u0026#39;./App.vue\u0026#39; + import \u0026#34;./tailwind.css\u0026#34; createApp(App).mount(\u0026#39;#app\u0026#39;) ","date":"2023-06-21T01:29:15+08:00","permalink":"https://falasool.github.io/2023/vue3-todolist/","title":"Vue3 | ToDoList"},{"content":"æœ¬æ¥è¿™æœŸçš„æ ‡é¢˜æˆ‘å€Ÿç”¨çš„æ˜¯è‰¾æ£®æ‰‹æŒ‡ä¸Šçš„çº¹èº«ã€Œæœç»çˆ±ä¸æ‚²ç—›ã€ï¼Œå› ä¸ºå¤ªè¿‡ä¸­äºŒæ”¹æ‰å•¦ï¼ç°åœ¨çš„é¢˜ç›®æ˜¯ Sailing è¿™é¦–æ­Œçš„æ­Œè¯\nè¿™å‘¨çœ‹äº† SpringFFFire\rå¤ªå¤ªçš„ã€Šçº¯çˆ±æ´¾ã€‹ã€‚ä¸»è§’ä¹‹ä¸€è‰¾æ£®è¯´è¿™æ˜¯ä»–çš„è‘¬ç¤¼é€‰æ›²ã€‚æˆ‘æ‰¾æ¥å¬äº†ä¹‹åè§‰å¾—å¾ˆå®½å¹¿å’Œæµªæ¼«ï¼Œå¬åˆ°è¿™é¦–æ­Œçš„å¥‘æœºæ˜¯æœ‰äººæœŸå¾…å®ƒåœ¨è‡ªå·±çš„è‘¬ç¤¼ä¸Šå“èµ·ï¼Œè€Œä¸”è¿™ä¸ªäººå¥½åƒçœŸçš„å‘½ä¸ä¹…çŸ£ï¼Œæ‰€ä»¥åˆæŸ“ä¸Šäº†æ‚²ä¼¤çš„åº•è‰²TT\nå¦ä¸€ä¸ªä¸»è§’å®‰å¾·çƒˆè¯´è‡ªå·±çš„è‘¬ç¤¼è¦æ”¾ Welcome home\nå¦‚æœä»¥åˆ«çš„æ–¹å¼é‡åˆ°è¿™é¦–æ­Œæˆ‘ä¼šè§‰å¾—å®ƒæœ‰ä¸€ç§æ—…è¡Œå•Šåº¦å‡å•Šä¹‹ç±»çš„æ°”è´¨ï¼Œå¾ˆé€‚åˆåœ¨æ—·é‡é‡Œä¸€è¾¹å¼€è½¦ä¸€è¾¹å¬ï¼Œæˆ–è€…å¤§å®¶å›´ååœ¨çŸ³å¤´ä¸Šæ‹ç€è…¿åˆå”±ã€‚ä½†æ˜¯å› ä¸ºå®‰å¾·çƒˆï¼Œè¿™é¦–æ­Œå¬èµ·æ¥å¥½åƒè·‹æ¶‰äº†åäºŒå°æ—¶ä¹‹åèººå€’åœ¨å®‰å…¨ã€æŸ”è½¯çš„å°å±‹é‡Œï¼Œçœ¼çš®å‚ä¸‹æ¥ï¼Œè‚Œè‚‰å’Œå…³èŠ‚éƒ½èˆ’å±•å¼€ï¼Œæœ‰ä¸€ç§æ²‰ç”¸ç”¸çš„åˆ†é‡ã€‚æ˜¥ç«è€å¸ˆçœŸä¼šé€‰æ›²ï¼Œå¼‚ä¹¡äººç»ˆäºèƒ½åœ¨æ•…ä¹¡å®‰çœ ï¼ˆè¿˜æ˜¯å’Œçˆ±äººä¸€èµ·ï¼‰ï¼Œç”¨ Welcome home æŠšæ…°ç¥ç¦ä»–æœ€å¥½ä¸è¿‡äº†\nçˆ±æƒ…éƒ¨åˆ†æœ‰ç§ä¸é¡¾è¯»è€…æ­»æ´»çš„æµªæ¼«ï¼Œæ„Ÿæƒ…æµ“åº¦å¤ªé«˜ã€ç»å†å¦‚æ­¤ä¼ å¥‡å’Œæ³¢æŠ˜ï¼Œå³ä½¿ happy ending è¯»è€…ï¼ˆæˆ‘ï¼‰ä¹ŸæŒ å¿ƒæŒ è‚å¤±é­‚è½é­„ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æƒ³è°ˆè°ˆè¿™æœ¬å°è¯´åˆ«çš„æ–¹é¢\nç«æ˜Ÿç›‘ç‹±ç¯‡ ä¸»æ—¨å¯ä»¥è¯´æ˜¯ã€Œäººç”Ÿè€Œè‡ªç”±ã€ï¼Œè¿˜æ˜¯å„¿ç«¥æ•™è‚²å’Œå¥³æ€§å¤±æƒç°çŠ¶çš„ä¸€é¢é•œå­\nã€Œä½ è§è¯äº†ä»–ä»¬é«˜è°ˆæ¢¦æƒ³ä¸å£®å¿—ï¼Œä¼¼ä¹è¿™äº›è±ªè¨€å£®è¯­ä¸“ä¸ºä»–ä»¬è€Œé€ ï¼Œä½ åªèƒ½æ‰®æ¼”ä»–ä»¬å¿—å‘è¿œå¤§çš„ä¸€ä¸ªæ³¨è„šï¼Œè¿˜å¾€å¾€æ˜¾å¾—æ„šè ¢ã€æˆäº‹ä¸è¶³è´¥äº‹æœ‰ä½™ã€‚ã€\nã€Œä»¿ä½›ä½ çš„ä¸€ç”Ÿåªæœ‰ä¸‰ç§å½¢æ€ï¼Œå¤„å¥³ã€è¡å¦‡å’Œæ¯äº²ï¼Œä¸€åˆ‡éƒ½è¢«è¿™ä¸‰ç±»æ¦‚æ‹¬ï¼Œé™¤æ­¤ä¹‹å¤–çš„äººæ ¼ï¼Œç»Ÿç»Ÿè¢«å¿½ç•¥ã€‚ã€\nã€Œä»–ä»¬èµ¢äº†æ»¡å ‚å–å½©ï¼Œè¾“äº†ä¹Ÿæœ‰å¤±æ„çš„è‰ºæœ¯ï¼Œä½ ä»¬å´ä¸èƒ½ç¢°ã€è¾“èµ¢ã€ï¼Œä¼¼ä¹ä½ ä»¬ä»æœªå·å…¥ç«äº‰ï¼Œä¸è¯¥å¤§è¯è¾“èµ¢ã€‚å¯äº‹å®å¹¶éå¦‚æ­¤ï¼Œäººç”Ÿæ¥å¤šå¤šå°‘å°‘éƒ½è¦äº‰æŠ¢ï¼Œæœ‰äººäº‰å¾—å’Œå¹³ä¸€äº›ï¼Œæœ‰äººäº‰å¾—å‡¶ä¸€äº›ï¼Œä½†ä½ ååè¢«åˆ’è¿›ã€ä¸å‡†äº‰æŠ¢ã€çš„ç±»åˆ«ã€‚ä¸€æ—¦ä½ å‡ºæ¥äº‰åæŠ¢åˆ©ï¼Œå°±ç«‹åˆ»æœ‰è°£è¨€å’Œè¯½è°¤å¦‚å½±éšå½¢ï¼Œç«™ä¸åˆ°å…¬å¹³çš„æ“‚å°ã€‚ã€\nã€Œä½ å¤©ç”Ÿå¥½æ–—ï¼Œç°åœ¨æœ‰ä¸€ä¸ªç»ä½³çš„æ“‚å°ã€‚ã€ è‰¾æ£®æ˜¯åœ¨ç…½åŠ¨èŠ™é‡Œä½³ï¼Œä½†æ˜¯æˆ‘ä¹ŸæŠµæŒ¡ä¸ä½è¿™ç§è¯±æƒ‘\nåº¦å‡ç¯‡ æ˜¯ Erica çš„è§†è§’ï¼Œæ¨¡ä»¿é˜¿å‰åˆ—ä¾¬çš„æ—¥è®°è¿™ç§æ–¹å¼å®åœ¨å¤ªåˆé€‚äº†ğŸ˜­ã€‚è¯»ç¬¬ä¸€éçš„æ—¶å€™æˆ‘å°±è¢«éœ‡å¾—è¦æ—¶ä¸æ—¶åœä¸‹æ¥ç¼“ç¼“ã€‚å­©å­çš„çˆ±ã€çº¯ç™½çš„çˆ±ï¼Œéå¸¸å¤©ç„¶ï¼Œä¹Ÿéå¸¸æ²‰é‡ã€‚æˆ‘çœ‹æœ‰è¯»è€…è´£å¤‡ Erica ç´¢å–å¾—å¤ªå¤šï¼Œå¤ªç©ºæƒ³ï¼ˆåŒ…æ‹¬åæ¥çš„å‰§æƒ…ï¼‰ï¼Œæˆå¹´äººä¹Ÿä¸æ˜¯ç”Ÿæ¥å°±æ˜ç™½ç•Œé™åœ¨å“ªé‡Œçš„ï¼Œä»–çˆ±ä¸–ç•Œï¼Œä¹Ÿæƒ³è¦ä¸–ç•Œçˆ±ä»–ï¼Œæœ‰ä»€ä¹ˆä¸å¯¹ã€‚ä½†æ˜¯è¿™ä¸ªä¸–ç•Œã€æ€ä¹ˆè¯´ï¼Œit sucksã€‚\nå€’æ˜¯ ABO ä¸–ç•Œï¼Œä»–åŠå®‰è‰ä¸è¦é€ƒäº¡ï¼Œå‘å±•åˆ°å’ŒåŸä½æ°‘ä¸€èµ·è¿½æ•å®‰è‰é‚£é‡Œï¼Œæˆ‘è§‰å¾—æœ‰ç‚¹ç–²æƒ«ï¼Œå¹»è§†é‚£äº›å¯¹ç²¾ç¥å·²ç»å¾ˆç´§å¼ çš„å—å®³è€…ä¸é˜´ä¸é˜³çš„ç”·äººï¼šä½ å¤ªæ•æ„Ÿäº†ï¼Œä¸ä¼šå§ï¼Ÿçœ‹ä¼¼ç«™åœ¨å¤©å¹³ä¸­é—´ï¼Œå®é™…ä¸Šåœ¨æ‹‰åæ¶ã€‚æˆ‘è¾¹çœ‹è¾¹æƒ³ï¼Œè¦æ‰­è½¬ä»–ç†ä¸­å®¢ç«‹åœºçš„æ–¹æ³•å¾ˆç®€å•ï¼šè®©ä»–é•¿ä¸ª pussy å‡ºæ¥ï¼Œå…ˆè¶Ÿè¶Ÿè·¯äººã€æ°‘å…µã€å†›äººçš„é›·ï¼Œçœ‹çœ‹ä»–ä»¬æ˜¯ä¸æ˜¯çœŸçš„ã€Œå‹å¥½ã€å°Šé‡ä¸ªäººæ„æ„¿ã€éƒ½å¯ä»¥å•†é‡ã€ï¼Œå“ˆå“ˆ\nè¿˜æœ‰è¿™ç¯‡ç« çš„å¥³ Alpha çš„åˆ»ç”»è®©æˆ‘æœ‰äº›éœ‡åŠ¨ï¼ˆéœ‡åŠ¨äº†å¥½å¤šæ¬¡äº†ï¼ï¼‰æƒ³åˆ°ä¸‰æ¬¡å…ƒä¸€äº›ç”·äººéƒ½æ¶ˆå¤±ç¤¾ä¼šå°±ä¼šæˆä¸ºå…¨å¥³ä¹Œæ‰˜é‚¦çš„è§‚ç‚¹ï¼Œæˆ‘ä¸èµåŒè¿™ä¸ªè§‚ç‚¹ï¼Œä½†æ˜¯å˜´ç¬¨ã€‚è€å¸ˆå¥½å‰å®³ï¼Œç”¨è®²æ•…äº‹çš„æ–¹å¼å¾ˆå¹³å®çš„åé©³äº†ï¼Œå¥³äººæ˜¯ä¸€ç§å¤„å¢ƒï¼Œæ²¡æœ‰å¥³äººå°±ä¼šæœ‰ç”·äººæ‰¿æ‹…å¥³äººçš„è§’è‰²è¢«å‹è¿«ï¼Œæ€§åˆ«ä¸ºå¥³çš„äººåœ¨è¿™ä¸ªåˆ¶åº¦é‡Œå¾—åˆ°è¿«å®³åˆ«äººçš„æƒåŠ›ä¹‹åä¹Ÿä¸ä¼šæ‰‹è½¯ï¼Œä¾é å¹»æƒ³ä¸­çš„å¥³æ€§å¤©ç”Ÿçš„é“å¾·çº¦æŸå°±â€¦â€¦æ²¡æœ‰çº¦æŸåŠ›\nè¿™ä¸€ç¯‡é‡Œæˆ‘æœ€å–œæ¬¢æ°è¥¿ï¼Œå–œæ¬¢å¥¹ä»¬çš„é€ƒäº¡ä¹‹è·¯ï¼Œå†²å‘æ‚¬å´–å°±åƒå¡å°”ç›å’Œè·¯æ˜“æ–¯è¸©ä¸‹æ²¹é—¨é£å‘è“å¤©ğŸ¥¹\nåˆå¤œæ¢¦å›ï¼Œå®‰å¾·çƒˆæ€»æ˜¯æƒ³èµ·é‚£æ¡æ–œå¡è·¯ï¼Œä»–è§‰å¾—é‚£æ¡è·¯ç”Ÿç”Ÿåœ°æ’åœ¨ä»–çš„è„‘æµ·é‡Œï¼Œå¡‘é€ ä»–çš„æ€§æ ¼ï¼Œå› ä¸ºä»–çš„å¿ƒé‡Œé€æ¸ä¾é è¿™æ¡è·¯å½¢æˆä¸€ç§ç†å¿µï¼Œé‚£å°±æ˜¯ï¼Œä»–æ˜¯ä¸ªç‹¬ç«‹çš„äººã€‚é‚£ç§é“ºå¤©ç›–åœ°çš„å­¤ç‹¬æ„Ÿå¹¶æ²¡æœ‰å‹å€’ä»–ï¼Œåè€Œè®©ä»–ç”Ÿå‡ºä¸€ç§è‡ªç”±æ„Ÿï¼Œæ²¡æœ‰è°å¯¹ä»–æ¥è¯´æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºï¼Œçœ‹å§ï¼Œå°±ç®—ä¸€ä¸ªäººå®‰å¾·çƒˆä¹Ÿå¯ä»¥èµ°è¿™æ¡è·¯ï¼Œå°±ç®—è¿™æ ·ä¹Ÿå¯ä»¥æ´»ä¸‹å»ï¼Œè¿™ç§æ¥è‡ªå†…å¿ƒçš„è‡ªè±ªæ„Ÿè®©å®‰å¾·çƒˆè§‰å¾—è‡ªå·±çš„ç”Ÿå‘½ä¹Ÿå¥½ã€æ„å¿—ä¹Ÿå¥½ï¼Œéƒ½åˆ†å¤–çè´µã€‚å”¯æœ‰è‡ªèº«æ²¡æœ‰ä¸€æŠ€ä¹‹é•¿çš„æŒ«è´¥æ„ŸæŒ¡ä½äº†ä»–çš„è‡ªè±ªï¼Œå› æ­¤ä»–æ€»æ˜¯æƒ³å¤šå­¦ç‚¹ï¼Œä¸ç”¨å¤ªå¤šï¼Œåªè¦å„æ ·éƒ½å­¦ä¸€ç‚¹ï¼Œå°†æ¥æ€»æœ‰ç”¨å¤„ï¼Œä»–æ— è®ºå¦‚ä½•è¦å‡­è‡ªå·±æ´»ä¸‹å»ï¼Œä»–è§‰å¾—ä»–åœ¨å’Œå‘½è¿æˆ˜æ–—ï¼Œä»–è¦èº²å¼€ä¸€åˆ‡æ¡æ¡æ¡†æ¡†ï¼Œèµ°é‚£æ¡æ–œå¡è·¯ï¼Œä»–è§‰å¾—è¿™æœ‰æ„ä¹‰ã€‚\n","date":"2023-06-11T23:17:00+08:00","permalink":"https://falasool.github.io/book-review-chun-ai-pay/","title":"Book Review | I am sailing"},{"content":"Last week, I went to the theatre, i had a very good set, the play is very interesting. i did not enjoy it. the young man and a young woman is sitting behind me. They were talking loudly. i got very angry. i could not heat the actors. i turned around, i looked at the man and the woman angrily, they did not pay any attention, in the end, i could not bared, i turned around again,i can\u0026rsquo;t hear the word, i said angrily. Its not your business, the young man said rudely, this is a private conversation.\n","date":"2023-06-11T23:17:00+08:00","permalink":"https://falasool.github.io/2023/language-learning-dictate-nce-ii/","title":"Language learning | dictate NCE II"},{"content":" å‰ç½®æ­¥éª¤ å®‰è£…ä¾èµ– # æ›´æ–° apt-get update # å®‰è£…ä¾èµ– apt install unzip libncurses5 postgresql postgresql-contrib nginx snapd libmagic-dev apt install imagemagick ffmpeg libimage-exiftool-perl PostgreSQL æ€§èƒ½è°ƒä¼˜ æ ¹æ® pgTune ä¿®æ”¹é…ç½®æ–‡ä»¶\nvim /etc/postgresql/13/main/postgresql.conf é‡å¯ PostgreSQL\nsystemctl restart postgresql å®‰è£… Pleroma åˆ›å»º Pleroma ç”¨æˆ· adduser --system --shell /bin/false --home /opt/pleroma pleroma åˆ›å»º pleroma ç”¨æˆ·ï¼ŒæŒ‡å®šå®¶ç›®å½•ä¸º /opt/pleromaï¼Œç”¨äºé…ç½® pleroma çš„ç¯å¢ƒå’Œæ–‡ä»¶ï¼Œå¹¶ç¦æ­¢ç™»å½•\næ£€æµ‹ç³»ç»Ÿæ¶æ„ä¸ libc ç‰ˆæœ¬ï¼Œå¹¶æ ¹æ®ç»“æœè®¾ç½®ç¯å¢ƒå˜é‡ FLAVOUR arch=\u0026#34;$(uname -m)\u0026#34;;if [ \u0026#34;$arch\u0026#34; = \u0026#34;x86_64\u0026#34; ];then arch=\u0026#34;amd64\u0026#34;;elif [ \u0026#34;$arch\u0026#34; = \u0026#34;armv7l\u0026#34; ];then arch=\u0026#34;arm\u0026#34;;elif [ \u0026#34;$arch\u0026#34; = \u0026#34;aarch64\u0026#34; ];then arch=\u0026#34;arm64\u0026#34;;else echo \u0026#34;Unsupported arch: $arch\u0026#34;\u0026gt;\u0026amp;2;fi;if getconf GNU_LIBC_VERSION\u0026gt;/dev/null;then libc_postfix=\u0026#34;\u0026#34;;elif [ \u0026#34;$(ldd 2\u0026gt;\u0026amp;1|head -c 9)\u0026#34; = \u0026#34;musl libc\u0026#34; ];then libc_postfix=\u0026#34;-musl\u0026#34;;elif [ \u0026#34;$(find /lib/libc.musl*|wc -l)\u0026#34; ];then libc_postfix=\u0026#34;-musl\u0026#34;;else echo \u0026#34;Unsupported libc\u0026#34;\u0026gt;\u0026amp;2;fi;echo \u0026#34;$arch$libc_postfix\u0026#34; # è¾“å‡º amd64 æ‰€ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ä¸º\nexport FLAVOUR=\u0026#34;amd64\u0026#34; ä¸‹è½½ pleroma æ–‡ä»¶åˆ° /tmp ç›®å½•å¹¶è§£å‹ su pleroma -s $SHELL -lc \u0026#34; curl \u0026#39;https://git.pleroma.social/api/v4/projects/2/jobs/artifacts/stable/download?job=$FLAVOUR\u0026#39; -o /tmp/pleroma.zip unzip /tmp/pleroma.zip -d /tmp/ \u0026#34; ç§»åŠ¨æ–‡ä»¶åˆ° /opt/pleroma å¹¶åˆ é™¤ /tmp su pleroma -s $SHELL -lc \u0026#34; mv /tmp/release/* /opt/pleroma rmdir /tmp/release rm /tmp/pleroma.zip \u0026#34; åˆ›å»ºå„ç§ç›®å½•åŠèµ‹æƒæ“ä½œ uploads ç›®å½•å¹¶èµ‹æƒ # uploads ç›®å½• \u0026amp; èµ‹æƒ mkdir -p /var/lib/pleroma/uploads chown -R pleroma /var/lib/pleroma # static ç›®å½• \u0026amp; è®¾ç½®æ‰€æœ‰è€…ä¸º pleroma mkdir -p /var/lib/pleroma/static chown -R pleroma /var/lib/pleroma # é…ç½®æ–‡ä»¶ç›®å½• \u0026amp; è®¾ç½®æ‰€æœ‰è€…ä¸º pleroma mkdir -p /etc/pleroma chown -R pleroma /etc/pleroma ç”Ÿæˆé…ç½®æ–‡ä»¶ su pleroma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl instance gen --output /etc/pleroma/config.exs --output-psql /tmp/setup_db.psql\u0026#34; å›ç­”è‹¥å¹²é—®é¢˜\nåˆ›å»º postgres æ•°æ®åº“ su postgres -s $SHELL -lc \u0026#34;psql -f /tmp/setup_db.psql\u0026#34; æ›´æ–°æ•°æ®åº“ schema su pleroma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl migrate\u0026#34; å¯åŠ¨å®ä¾‹ su pleroma -s $SHELL -lc \u0026#34;./bin/pleroma daemon\u0026#34; ç­‰å¾…ä¸€ä¼šæ£€æµ‹å®ä¾‹è¿è¡Œæƒ…å†µ curl http://localhost:4000/api/v1/instance æš‚åœå®ä¾‹è¿è¡Œ su pleroma -s $SHELL -lc \u0026#34;./bin/pleroma stop\u0026#34; é€šé…ç¬¦ SSL è¯ä¹¦è‡ªåŠ¨ç»­æœŸ å¦‚æœé¢„è£…äº†certbotè¦å…ˆåˆ æ‰ apt-get remove certbot\nå®‰è£… certbot\nsnap install core snap refresh core snap install --classic certbot ln -s /snap/bin/certbot /usr/bin/certbot snap set certbot trust-plugin-with-root=ok snap install certbot-dns-cloudflare æ”¾ç½®å‡­æ®\nToken åœ¨ https://dash.cloudflare.com/profile/api-tokens\rç”Ÿæˆ\nsudo mkdir -p /root/.secrets/ sudo touch /root/.secrets/cloudflare.ini # æ·»åŠ /.secretsç›®å½•ä¸cloudflare.iniæ–‡ä»¶ sudo chmod 0700 /root/.secrets/ sudo chmod 0400 /root/.secrets/cloudflare.ini # æŒ‡å®šæƒé™ vim /root/.secrets/cloudflare.ini # Cloudflare API token used by Certbot dns_cloudflare_api_token = 0123456789abcdef0123456789abcdef01234567 ç”³è¯·è¯ä¹¦\ncertbot certonly \\ --dns-cloudflare \\ --dns-cloudflare-credentials ~/.secrets/cloudflare.ini \\ -d example.com -d *.example.com æµ‹è¯•è‡ªåŠ¨å»¶æœŸ\ncertbot renew --dry-run Nginx å¤åˆ¶ Pleroma çš„ nginx é…ç½®åˆ° nginx ç›®å½•\ncp /opt/pleroma/installation/pleroma.nginx /etc/nginx/sites-available/pleroma.conf ln -s /etc/nginx/sites-available/pleroma.conf /etc/nginx/sites-enabled/pleroma.conf ç¼–è¾‘ Pleroma çš„ nginx é…ç½®æ–‡ä»¶ï¼Œæ”¹æˆè‡ªå·±çš„åŸŸå\nvim /etc/nginx/sites-available/pleroma.conf è¿™é‡Œæ”¹æˆ\nlocation / { return 301 https://\u0026lt;domain\u0026gt;$request_uri; } é‡å¯ nginx\nnginx -t systemctl start nginx # or nginx -s reload è®¾ç½®ç³»ç»ŸæœåŠ¡ cp /opt/pleroma/installation/pleroma.service /etc/systemd/system/pleroma.service systemctl start pleroma systemctl enable pleroma å¯ä»¥è®¿é—®å•¦\nåˆ›å»ºç®¡ç†å‘˜è´¦æˆ· cd /opt/pleroma/bin su pleroma -s $SHELL -lc \u0026#34;./bin/pleroma_ctl user new \u0026lt;joeuser\u0026gt; \u0026lt;joeuser@sld.tld\u0026gt; --admin\u0026#34; å‚è€ƒ \u0026amp; è‡´è°¢ åœ¨ Debian 10 / Ubuntu 20.04 ä¸Šå®‰è£… Pleroma é€šé…ç¬¦åŸŸåè¯ä¹¦ç”³è¯·ä¸è‡ªåŠ¨ç»­è´¹ï¼ˆNginxï¼ŒDebian 10ï¼‰\rConfiguration Cheat Sheet\r","date":"2023-06-03T01:29:15+08:00","permalink":"https://falasool.github.io/2023/new-pleroma-isntance-on-debian11/","title":"Pleroma | åœ¨ Debian ä¸Šæ­å»º pleroma å®ä¾‹"},{"content":" è´­ä¹°æœåŠ¡å™¨ é€‰ intel - ç¾è¥¿æœºæˆ¿ - Debian11 - 1C1G 25G SSD 1TB\næ·»åŠ  SSHï¼Œç”Ÿæˆå¯†é’¥\nssh-keygen -t rsa -b 4096 -C \u0026#34;example comment\u0026#34; æ‰“å°å‡ºå…¬é’¥å†…å®¹ï¼Œç²˜è´´è¿› VPS æœåŠ¡å•†çš„ç•Œé¢å»\ncat /Users/userName/.ssh/id_rsa.pub ç”¨ SSH ç»ˆç«¯è¿œç¨‹ç™»å½•ï¼Œæµ‹è¯• IP ä¸­å›½å¤§é™†æ˜¯å¦å¯ç”¨\nhttp://ping.pe/\rhttps://ping.chinaz.com/\rä¿®æ”¹æœåŠ¡å™¨æ—¶åŒº æŸ¥çœ‹å½“å‰æ—¶åŒº\nadmin@xxx:~# date Fri 02 Jun 2023 01:25:08 PM UTC ä¿®æ”¹æ—¶åŒºï¼Œç„¶åå†æ¬¡æ£€æŸ¥å½“å‰æ—¶åŒº\n# åˆ é™¤é»˜è®¤æ—¶åŒº admin@xxx:~# rm -rf /etc/localtime # ä¿®æ”¹ä¸ºä¸Šæµ· admin@xxx:~# ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # æ£€æŸ¥ admin@xxx:~# date Fri 02 Jun 2023 01:27:14 PM CST å®‰è£…å¸¸ç”¨å·¥å…· apt update \u0026amp;\u0026amp; apt install curl wget screen tree git htop bash-completion fail2ban vim -y curlï¼šè¯·æ±‚ web æœåŠ¡å™¨\nwgetï¼šä¸‹è½½è½¯ä»¶åŒ…\nscreenï¼šç»ˆç«¯ç®¡ç†å·¥å…·ï¼Œéšæ‰‹ screen -S name\ntreeï¼šæ˜¾ç¤ºç›®å½•ç»“æ„\nhtopï¼šç›‘æ§è¿›ç¨‹\nbash-completionï¼šå‘½ä»¤è‡ªåŠ¨è¡¥å…¨å·¥å…·ï¼ŒæŒ‰ [Tab][Tab]\n# å®šä½ bash-completion é…ç½®æ–‡ä»¶ find / -name \u0026#34;bash_completion.d\u0026#34; /etc/bash_completion.d # æ·»åŠ  docker çš„è‡ªåŠ¨è¡¥å…¨ï¼Œé‡å¯ bash cd /etc/bash_completion.d curl -L -O https://raw.githubusercontent.com/docker/compose/$(docker-compose version --short)/contrib/completion/bash/docker-compose fail2banï¼šé˜²æ­¢æš´åŠ›ç ´è§£æ”»å‡»ï¼Œåœ¨ /etc/fail2ban/jail.conf ä¿®æ”¹é…ç½®ï¼Œç„¶åæ¿€æ´» # æ£€éªŒæœ‰æ²¡æœ‰æ­£ç¡®å¯åŠ¨ fail2ban-client ping # æŸ¥çœ‹ç›®å‰å¯ç”¨çš„è§„åˆ™ fail2ban-client status # æŸ¥çœ‹æŸä¸ªè§„åˆ™ä¸‹è¢«å°ç¦çš„æ¬¡æ•°ã€ip fail2ban-client status sshd æ›´æ”¹ç»ˆç«¯é¢œè‰² è¿›å…¥ /etc/profile æ–‡ä»¶ï¼Œvim /etc/profileï¼Œä¿®æ”¹å‘½ä»¤è¡Œæç¤ºç¬¦çš„é¢œè‰²è®¾ç½®\nPS1=\u0026#39;[\\[\\e[32m\\]\\u\\[\\e[0m\\]\\[\\e[35m\\]@\\[\\e[0m\\]\\[\\e[33m\\]\\h\\[\\e[0m\\]\\[\\e[36m\\] \\W\\[\\e[0m\\]]\\$ \u0026#39; # æ›´æ–°æ–‡ä»¶ source /etc/profile è§£é‡Šï¼šPS1å˜é‡ä»£è¡¨\u0026lt;ç”¨æˆ·å+ä¸»æœºå+è·¯å¾„åï¼ˆé•¿è·¯å¾„ï¼‰+ $\u0026gt;\næ·»åŠ  SWAP ç¡®è®¤æ˜¯å¦å·²å­˜åœ¨ SWAP\nfree -m æœ‰ Swap é¡¹è€Œä¸” total åˆ—ä¸ä¸ºé›¶ï¼Œè¯´æ˜ Swap å·²å­˜åœ¨ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹åˆ†åŒºå®¹é‡ï¼Œå‚è€ƒï¼šä¸º Linux æ·»åŠ  swap åˆ†åŒºæˆ–ä¿®æ”¹ swap åˆ†åŒºå®¹é‡\ré˜²ç«å¢™ ufw allow OpenSSH ufw enable ufw allow http ufw allow https ufw allow 80/tcp ufw allow 443/tcp ufw status # or ufw default deny incoming ufw default allow outgoing ufw allow ssh ufw allow http ufw allow https ufw enable ufw status numbered ufw reload å‚è€ƒ \u0026amp; è‡´è°¢ è´­ä¹° VPS ä¹‹åéœ€è¦åšçš„äº‹æƒ…\rVPS æ€§èƒ½æµ‹è¯•\rå¦‚ä½•åˆ©ç”¨Dockeræ­å»ºMastodonå®ä¾‹ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€æ­å»ºç¯‡\r","date":"2023-06-01T23:29:38+08:00","permalink":"https://falasool.github.io/2023/buy-and-set-ups/","title":"Pleroma | è´­ä¹°æœåŠ¡å™¨åŠä¹‹åè¦åšä»€ä¹ˆ"},{"content":"æ”¯æŒ mermaidï¼Œæ–°å¢å¯¼èˆªæ ï¼Œæ·»åŠ ä¸€äº›å°åŠŸèƒ½ï¼Œå¾®è°ƒæ ·å¼\nä¿®æ”¹æ ‡é¢˜æ ·å¼ H2 å’Œ H3 åŒºåˆ†åº¦ä¸å¤§\né‚æ”¹\n# /assets/scss/partials/layout/article.scss .article-content { h1, h2, h3, h4, h5, h6 { margin-inline-start: calc((var(--card-padding)) * -1); padding-inline-start: calc( var(--card-padding) - var(--heading-border-size) ); } h1, h2 { border-inline-start: var(--heading-border-size) solid var(--accent-color); } h3, h4, h5, h6 { border-inline-start: var(--heading-border-size) solid #f5f5fa; } } è°ƒæ•´å‹æƒ…é“¾æ¥é¡µé¢å¸ƒå±€ ///assets/scss/custom.scss //å‹æƒ…é“¾æ¥åŒæ  + @media (min-width: 1024px) { + .article-list--compact.links { + display: grid; + grid-template-columns: 1fr 1fr; + background: none; + box-shadow: none; + + article { + background: var(--card-background); + border: none; + box-shadow: var(--shadow-l2); + margin-bottom: 8px; + border-radius: 10px; + \u0026amp;:nth-child(odd) { + margin-right: 8px; + } + } + } +} ä»£ç æ¥è‡ª Hugo | ç¬¬ä¸‰ç¯‡ Stack ä¸»é¢˜è£…ä¿®è®°å½•ï¼Œå ‚å ‚å†ä¸´ï¼\rå¤–éƒ¨é“¾æ¥çš„æ ·å¼ # layouts/_default/_markup/render-link.html {{ if strings.HasPrefix .Destination \u0026#34;http\u0026#34; }} \u0026lt;span style=\u0026#34;white-space: nowrap;\u0026#34;\u0026gt;\u0026lt;svg width=\u0026#34;.7em\u0026#34; height=\u0026#34;.7em\u0026#34; viewBox=\u0026#34;0 0 21 21\u0026#34; xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z\u0026#34; fill=\u0026#34;currentColor\u0026#34; /\u0026gt; \u0026lt;path d=\u0026#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z\u0026#34; fill=\u0026#34;currentColor\u0026#34;\u0026gt; \u0026lt;/svg\u0026gt;\u0026lt;/span\u0026gt; {{ end }} åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º TOC æŠ„äº†ä»£ç  Feature/add inline toc #615\rå¯¼èˆªæ  éšè—æŸä¸ªé€‰é¡¹ éšè—äº† Homeï¼Œå’Œç‚¹å‡» avatar çš„æ•ˆæœé‡å¤äº†\n.menu { li:first-child { display: none; } } æ–°å¢ menu é€‰é¡¹ åœ¨ /content/page ç›®å½•ä¸‹æ–°å»º dairy æ–‡ä»¶å¤¹ï¼ŒæŠŠ .md æ”¾è¿›æ¥ï¼ˆè¿™äº›æ–‡ç« ä¸ä¼šåœ¨ homepage æ˜¾ç¤ºï¼‰åˆ›å»º index.mdï¼Œåœ¨ Tabler Icons\rä¸‹è½½ icon å¹¶æ›¿æ¢ï¼Œä¿®æ”¹å¯¹åº”çš„ layout\n# layouts/_defualt/list.html - \u0026lt;div class=\u0026#34;section-card\u0026#34;\u0026gt;...\u0026lt;/div\u0026gt; + \u0026lt;section class=\u0026#34;article-list\u0026#34;\u0026gt; {{ range $paginator.Pages }} + {{ partial \u0026#34;article-list/default\u0026#34; . }} {{ end }} \u0026lt;/section\u0026gt; æ•ˆæœï¼š\nä¿®æ”¹èƒŒæ™¯è‰² åœ¨ Open Color\ré€‰ä¸ªå–œæ¬¢çš„é¢œè‰²\n# assets\\scss\\variables.scss --body-background: #f5f5f5; ç¦æ­¢éƒ¨åˆ†é¡µé¢æ˜¾ç¤º ReadingTime æ¯”å¦‚ /friends ï¼Œä¸æ˜¯æ–‡ç« ï¼Œä¸éœ€è¦æ˜¾ç¤ºé˜…è¯»æ—¶é—´\n# /blog/layouts/partials/article/components/details.html + {{ if and (not .Date.IsZero) (.Site.Params.article.readingTime) }} æš‚æ—¶ç¦ç”¨ç¿»è¯‘æŒ‰é’® å¦‚æœæœ‰å¯¹åº”çš„é¡µé¢ï¼Œæ¯”å¦‚ /page/about ä¸‹æœ‰ï¼š\n. â”œâ”€â”€ index.md â””â”€â”€ index.zh-cn.md å°±ä¼šæ˜¾ç¤ºç¿»è¯‘æŒ‰é’®ï¼Œæš‚æ—¶ç”¨ä¸åˆ°çš„è¯åœ¨ md æ–‡ä»¶é‡Œå†™ draft: trueå³å¯\næ·»åŠ  mermaid æ”¯æŒ æŒ‰ç…§ å®˜æ–¹æ–‡æ¡£\ræ–°å»ºæ–‡ä»¶ layouts/_default/_markup/render-codeblock-mermaid.html\n\u0026lt;div class=\u0026#34;mermaid\u0026#34;\u0026gt;{{- .Inner | safeHTML }}\u0026lt;/div\u0026gt; {{ .Page.Store.Set \u0026#34;hasMermaid\u0026#34; true }} åœ¨ layouts/partials/article/components/content.html æ·»åŠ ï¼š\n{{ .Content | replaceRE \u0026#34;(\u0026lt;table\u0026gt;(?:.|\\n)+?\u0026lt;/table\u0026gt;)\u0026#34; $wrappedTable | safeHTML }} {{ if .Page.Store.Get \u0026#34;hasMermaid\u0026#34; }} \u0026lt;script type=\u0026#34;module\u0026#34;\u0026gt; import mermaid from \u0026#39;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs\u0026#39;; mermaid.initialize({ startOnLoad: true }); \u0026lt;/script\u0026gt; {{ end }} æ¼”ç¤ºæ•ˆæœï¼šæ—¶åºå›¾/é¥¼å›¾/ç”˜ç‰¹å›¾/Git å›¾ï¼Œæ›´å¤šè¯·çœ‹ å®˜æ–¹æ–‡æ¡£\rsequenceDiagram participant Alice participant Bob Alice-\u003e\u003eJohn: Hello John, how are you? loop Healthcheck John-\u003e\u003eJohn: Fight against hypochondria end Note right of John: Rational thoughts prevail! John--\u003e\u003eAlice: Great! John-\u003e\u003eBob: How about you? Bob--\u003e\u003eJohn: Jolly good! pie title Pets adopted by volunteers \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 15 gantt title A Gantt Diagram dateFormat YYYY-MM-DD section Section A task :a1, 2014-01-01, 30d Another task :after a1 , 20d section Another Task in sec :2014-01-12 , 12d another task : 24d gitGraph commit commit branch develop checkout develop commit commit checkout main merge develop commit commit MarkDown å— å›ºå®šå—çš„é«˜åº¦ è¿‡é•¿çš„å†…å®¹å½±å“è§‚æ„Ÿï¼Œæ‰€ä»¥æŠŠ block çš„é«˜åº¦é™åˆ¶åœ¨ 20emï¼Œå¹¶éšè—æ»šåŠ¨æ¡\n# partials/layout/article.scss .article-content { .highlight { - padding: var(--card-padding); pre { margin: initial; + padding: var(--card-padding); margin: 0; width: auto; + max-height: 20em; + scrollbar-width: none; /* Firefox */ + \u0026amp;::-webkit-scrollbar { + display: none; /* Chrome Safari */ + } } } } ä»£ç å— macOS æ ·å¼ # custom.scss .highlight::before { content: \u0026#39;\u0026#39;; display: block; background: url(/code-header.svg); height: 30px; width: 100%; background-size: 45px; background-repeat: no-repeat; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px; position: absolute; top: 0; left: 0; } ä¿®æ”¹å­—ä½“ å¯¹æ ·å¼ä¸æ»¡æ„ã€å°±ä»æ§åˆ¶å°æ‰¾åˆ°å¯¹åº”çš„ç±»åï¼Œåœ¨ custom.scss é‡Œä¿®æ”¹å°±å¥½äº†\nä¿®æ”¹æ­£æ–‡å­—ä½“ å‚ç…§ï¼šExample: Custom font family for article content\r# layouts/partials/head/custom.html \u0026lt;style\u0026gt; /* Overwrite CSS variable */ :root { --article-font-family: \u0026#39;Noto Serif HK\u0026#39;, var(--base-font-family); } \u0026lt;/style\u0026gt; \u0026lt;script\u0026gt; ;(function () { const customFont = document.createElement(\u0026#39;link\u0026#39;) customFont.href = \u0026#39;https://fonts.googleapis.com/css2?family=Noto+Serif+HK:wght@300;400;500;600;700\u0026amp;display=swap\u0026#39; customFont.type = \u0026#39;text/css\u0026#39; customFont.rel = \u0026#39;stylesheet\u0026#39; document.head.appendChild(customFont) })() \u0026lt;/script\u0026gt; ä¿®æ”¹å…¨ç«™å­—ä½“ :root { --sys-font-family: \u0026#39;Noto Serif HK\u0026#39;, -apple-system, BlinkMacSystemFont, \u0026#39;Segoe UI\u0026#39;, \u0026#39;Droid Sans\u0026#39;, \u0026#39;Helvetica Neue\u0026#39;; --zh-font-family: \u0026#39;Noto Serif HK\u0026#39;, \u0026#39;Hiragino Sans GB\u0026#39;, \u0026#39;Droid Sans Fallback\u0026#39;, \u0026#39;Microsoft YaHei\u0026#39;; --base-font-family: \u0026#39;Noto Serif HK\u0026#39;, var(--sys-font-family); } è¿”å›é¡¶éƒ¨æŒ‰é’® # /layouts/partials/footer/custom.html \u0026lt;!--è¿”å›é¡¶éƒ¨æŒ‰é’® --\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; id=\u0026#34;back-to-top\u0026#34; title=\u0026#34;è¿”å›é¡¶éƒ¨\u0026#34;\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;!--è¿”å›é¡¶éƒ¨CSS --\u0026gt; \u0026lt;style\u0026gt; #back-to-top { display: none; position: fixed; bottom: 20px; right: 55px; width: 55px; height: 55px; border-radius: 7px; background-color: rgba(64, 158, 255, 0.5); box-shadow: var(--shadow-l2); font-size: 30px; text-align: center; line-height: 50px; cursor: pointer; } #back-to-top:before { content: \u0026#39; \u0026#39;; display: inline-block; position: relative; top: 0; transform: rotate(135deg); height: 10px; width: 10px; border-width: 0 0 2px 2px; border-color: var(--back-to-top-color); border-style: solid; } #back-to-top:hover:before { border-color: #2674e0; } /* åœ¨å±å¹•å®½åº¦å°äº 768 åƒç´ æ—¶ï¼Œé’®ä½ç½®è°ƒæ•´ */ @media screen and (max-width: 768px) { #back-to-top { bottom: 20px; right: 20px; width: 40px; height: 40px; font-size: 10px; } } /* åœ¨å±å¹•å®½åº¦å¤§äºç­‰äº 1024 åƒç´ æ—¶ï¼ŒæŒ‰é’®ä½ç½®è°ƒæ•´ */ @media screen and (min-width: 1024px) { #back-to-top { bottom: 20px; right: 40px; } } /* åœ¨å±å¹•å®½åº¦å¤§äºç­‰äº 1280 åƒç´ æ—¶ï¼ŒæŒ‰é’®ä½ç½®è°ƒæ•´ */ @media screen and (min-width: 1280px) { #back-to-top { bottom: 20px; right: 55px; } } /* ç›®å½•æ˜¾ç¤ºæ—¶ï¼Œéšè—æŒ‰é’® */ @media screen and (min-width: 1536px) { #back-to-top { visibility: hidden; } } \u0026lt;/style\u0026gt; \u0026lt;!--è¿”å›é¡¶éƒ¨JS --\u0026gt; \u0026lt;script\u0026gt; function backToTop() { document.documentElement.scrollIntoView({ behavior: \u0026#39;smooth\u0026#39;, }) } window.onload = function () { let scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop let totopBtn = this.document.getElementById(\u0026#39;back-to-top\u0026#39;) if (scrollTop \u0026gt; 0) { totopBtn.style.display = \u0026#39;inline\u0026#39; } else { totopBtn.style.display = \u0026#39;none\u0026#39; } } window.onscroll = function () { let scrollTop = this.document.documentElement.scrollTop || this.document.body.scrollTop let totopBtn = this.document.getElementById(\u0026#39;back-to-top\u0026#39;) if (scrollTop \u0026lt; 200) { totopBtn.style.display = \u0026#39;none\u0026#39; } else { totopBtn.style.display = \u0026#39;inline\u0026#39; totopBtn.addEventListener(\u0026#39;click\u0026#39;, backToTop, false) } } \u0026lt;/script\u0026gt; ShortCodes æŠ˜å å†…å®¹ é€šè¿‡ details æ ‡ç­¾å®ç°ï¼š\n# layouts/shortcodes/detail.html \u0026lt;details\u0026gt; \u0026lt;summary\u0026gt;{{ (.Get 0) }}\u0026lt;/summary\u0026gt; {{ .Inner | markdownify }} \u0026lt;/details\u0026gt; ä½¿ç”¨ï¼š\n{{/*\u0026lt; detail \u0026#34;ç”Ÿæ•ˆäº†\u0026#34; \u0026gt;*/}} (ã€ƒ`ğ“ŸÂ´ã€ƒ) å¤©æ‰ã§ã™ã‹ã‚‰ï¼ {{/*\u0026lt;/detail\u0026gt;*/}} ç”Ÿæ•ˆäº† (ã€ƒ`ğ“ŸÂ´ã€ƒ) å¤©æ‰ã§ã™ã‹ã‚‰ï¼ Spotify // layouts/shortcodes/spotify.html \u0026lt;!-- Parameters: type - (Required) album / track / playlist / artist id - (Required) Target ID width - (Optional) width height - (Optional) height --\u0026gt; {{ if .IsNamedParams }} \u0026lt;iframe src=\u0026#34;https://open.spotify.com/embed/{{ .Get \u0026#34;type\u0026#34; }}/{{ .Get \u0026#34;id\u0026#34; }}\u0026#34; width=\u0026#34;{{ default \u0026#34;100%\u0026#34; (.Get \u0026#34;width\u0026#34;) }}\u0026#34; height=\u0026#34;{{ default \u0026#34;380\u0026#34; (.Get \u0026#34;height\u0026#34;) }}\u0026#34; frameborder=\u0026#34;0\u0026#34; allowtransparency=\u0026#34;true\u0026#34; allow=\u0026#34;encrypted-media\u0026#34;\u0026gt;\u0026lt;/iframe\u0026gt; {{ else }} \u0026lt;iframe src=\u0026#34;https://open.spotify.com/embed/{{ .Get 0 }}/{{ .Get 1 }}\u0026#34; width=\u0026#34;{{ default \u0026#34;100%\u0026#34; (.Get 2) }}\u0026#34; height=\u0026#34;{{ default \u0026#34;380\u0026#34; (.Get 3) }}\u0026#34; frameborder=\u0026#34;0\u0026#34; allowtransparency=\u0026#34;true\u0026#34; allow=\u0026#34;encrypted-media\u0026#34;\u0026gt;\u0026lt;/iframe\u0026gt; {{ end }} ä½¿ç”¨ï¼š\n{{/*\u0026lt; spotify type=\u0026#34;track\u0026#34; id=\u0026#34;2D3gvohUyOfXIVX6Mvhqae\u0026#34; height=\u0026#34;80px\u0026#34;\u0026gt;*/}} æ·»åŠ  apple-touch-icon # /layouts/_default/baseof.html \u0026lt;head\u0026gt; \u0026lt;link rel=\u0026#34;apple-touch-icon\u0026#34; sizes=\u0026#34;180x180\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/xxxxxxxx\u0026#34; /\u0026gt; \u0026lt;/head\u0026gt; æ·»åŠ èƒŒæ™¯çš„è››ç½‘ç‰¹æ•ˆ åœ¨ /layouts/_default/baseof.html å¼•å…¥ \u0026lt;script type=\u0026quot;text/javascript\u0026quot; src=\u0026quot;https://demo.hellozwh.com/source/canvas-nest.min.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; æˆ–\n!(function () { function o(w, v, i) { return w.getAttribute(v) || i } function j(i) { return document.getElementsByTagName(i) } function l() { var i = j(\u0026#39;script\u0026#39;), w = i.length, v = i[w - 1] return { l: w, z: o(v, \u0026#39;zIndex\u0026#39;, -1), o: o(v, \u0026#39;opacity\u0026#39;, 0.5), c: o(v, \u0026#39;color\u0026#39;, \u0026#39;0,0,0\u0026#39;), n: o(v, \u0026#39;count\u0026#39;, 99), } } function k() { ;(r = u.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth), (n = u.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight) } function b() { e.clearRect(0, 0, r, n) var w = [f].concat(t) var x, v, A, B, z, y t.forEach(function (i) { ;(i.x += i.xa), (i.y += i.ya), (i.xa *= i.x \u0026gt; r || i.x \u0026lt; 0 ? -1 : 1), (i.ya *= i.y \u0026gt; n || i.y \u0026lt; 0 ? -1 : 1), e.fillRect(i.x - 0.5, i.y - 0.5, 1, 1) for (v = 0; v \u0026lt; w.length; v++) { x = w[v] if (i !== x \u0026amp;\u0026amp; null !== x.x \u0026amp;\u0026amp; null !== x.y) { ;(B = i.x - x.x), (z = i.y - x.y), (y = B * B + z * z) y \u0026lt; x.max \u0026amp;\u0026amp; (x === f \u0026amp;\u0026amp; y \u0026gt;= x.max / 2 \u0026amp;\u0026amp; ((i.x -= 0.03 * B), (i.y -= 0.03 * z)), (A = (x.max - y) / x.max), e.beginPath(), (e.lineWidth = A / 2), (e.strokeStyle = \u0026#39;rgba(\u0026#39; + s.c + \u0026#39;,\u0026#39; + (A + 0.2) + \u0026#39;)\u0026#39;), e.moveTo(i.x, i.y), e.lineTo(x.x, x.y), e.stroke()) } } w.splice(w.indexOf(i), 1) }), m(b) } var u = document.createElement(\u0026#39;canvas\u0026#39;), s = l(), c = \u0026#39;c_n\u0026#39; + s.l, e = u.getContext(\u0026#39;2d\u0026#39;), r, n, m = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (i) { window.setTimeout(i, 1000 / 45) }, a = Math.random, f = { x: null, y: null, max: 20000 } u.id = c u.style.cssText = \u0026#39;position:fixed;top:0;left:0;z-index:\u0026#39; + s.z + \u0026#39;;opacity:\u0026#39; + s.o j(\u0026#39;body\u0026#39;)[0].appendChild(u) k(), (window.onresize = k) ;(window.onmousemove = function (i) { ;(i = i || window.event), (f.x = i.clientX), (f.y = i.clientY) }), (window.onmouseout = function () { ;(f.x = null), (f.y = null) }) for (var t = [], p = 0; s.n \u0026gt; p; p++) { var h = a() * r, g = a() * n, q = 2 * a() - 1, d = 2 * a() - 1 t.push({ x: h, y: g, xa: q, ya: d, max: 6000 }) } setTimeout(function () { b() }, 100) })() æœ‰å…´è¶£äº†åšåš åšå®¢æ—¶é—´è½´ å¯¼èˆªé¡µ å‚è€ƒ \u0026amp; è‡´è°¢ Hugo | çœ‹ä¸­ Stack ä¸»é¢˜çš„å½’æ¡£åŠŸèƒ½ï¼Œæ¬å®¶å¹¶åšä¿®æ”¹\rHugo Stack ä¸»é¢˜æŠ˜è…¾ç¬”è®°\ræ‹¥æŠ±æœ€å¥½ç”¨çš„ hugo ä¹‹ stack\rã€Hugoã€Hugo Styles\ræ¥å†™ä¸€äº›å¥½ç©çš„ Hugo çŸ­ä»£ç å§\rHugo Stack ä¸»é¢˜è£…ä¿®ç¬”è®°\rHugo åšå®¢è‡ªå®šä¹‰ä¼˜åŒ–\r","date":"2023-05-11T21:28:27+08:00","permalink":"https://falasool.github.io/2023/custom-hugo-theme-stack/","title":"Hugoï½œè‡ªå®šä¹‰ hugo-theme-Stack"},{"content":"Nginx å‡ ä¸ªé‡è¦çš„Nginxæ–‡ä»¶å’Œç›®å½• ç½‘ç«™å†…å®¹ /var/www/htmlï¼šé»˜è®¤çš„ç½‘ç«™å†…å®¹å­˜æ”¾ç›®å½•ï¼ŒNginx é»˜è®¤çš„æ¬¢è¿ç•Œé¢å°±å­˜æ”¾åœ¨è¿™ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶æ›´æ”¹ã€‚ æœåŠ¡å™¨é…ç½® /etc/nginx/nginx.confï¼šNginxé…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å®ƒé…ç½®Nginxå…¨å±€è®¾ç½®ã€‚ /etc/nginx/sites-available/ï¼šå¯ç”¨ç«™ç‚¹é…ç½®æ–‡ä»¶æ”¾ç½®ç›®å½•ï¼Œå¯åœ¨æ­¤åˆ›å»ºå¤šä¸ªè™šæ‹Ÿä¸»æœºï¼Œæ¯ä¸€ä¸ªç«™ç‚¹ä¸€ä¸ªé…ç½®æ–‡ä»¶ /etc/nginx/sites-enabled/ï¼šå·²å¯ç”¨ç«™ç‚¹çš„è½¯é“¾æ¥ç›®å½•ï¼ŒNginxé»˜è®¤ç«™ç‚¹ç›®å½•ï¼Œnginc.conf é»˜è®¤åŒ…å«çš„æ–‡ä»¶å¤¹ã€‚åœ¨æ­¤æ–‡ä»¶å¤¹å»ºç«‹çš„ç«™ç‚¹ï¼Œéœ€è¦å»ºç«‹è½¯è¿æ¥åˆ°ç›®å½•/etc/nginx/sites-available/é‡Œ /etc/nginx/conf.dï¼šç”¨äºå­˜æ”¾å¼•å…¥çš„å…¶ä»–é…ç½®æ–‡ä»¶çš„ç›®å½•ï¼ˆå­˜æ”¾å…¬å…±é…ç½®ç‰‡æ®µï¼‰ /etc/nginx/mime.types: è®¾ç½®åª’ä½“ç±»å‹æ˜ å°„å…³ç³» /etc/nginx/fastcgi_params: ä¸€äº›é»˜è®¤çš„å‚æ•°æ–‡ä»¶ /etc/nginx/modules-available/enabled: Nginx æ¨¡å—ç›®å½• /etc/nginx/snippets: ä»£ç ç‰‡æ®µç›®å½• /etc/nginx/ko-utfã€/etc/nginx/win-utf ç­‰:ä¸€äº›ç¼–ç è½¬æ¢æ˜ å°„æ–‡ä»¶ æœåŠ¡æ—¥å¿— /var/log/nginx/access.logï¼šå¦‚æ— å…¶ä»–è®¾ç½®ï¼Œæ­¤æ–‡ä»¶è®°å½•äº†æ¯ä¸€æ¬¡çš„ç½‘é¡µæœåŠ¡è¯·æ±‚ã€‚ /var/log/nginx/error.logï¼šNginxé”™è¯¯è¯·æ±‚è®°å½•æ–‡ä»¶ã€‚ ","date":"2023-04-11T21:28:27+08:00","permalink":"https://falasool.github.io/2023/nginx-memos/","title":"Nginx"},{"content":"æœ¬æ¬¡æ­å»ºä½¿ç”¨ Ubuntu 22.10 ç³»ç»Ÿ\nè´­ä¹° VPS âš ï¸ä¸è¦ä¹°æœºæˆ¿åœ¨å¤§é™†çš„æœåŠ¡å•† VPS âš ï¸\nåœ¨å¤‡æ¡ˆé€šè¿‡ä¹‹å‰ 80 å’Œ 443 ç«¯å£æ˜¯å°ç¦çš„ -\u0026gt; æ— æ³•ç”³è¯· SSL è¯ä¹¦ -\u0026gt; Misskey éœ€è¦ SSL æ‰èƒ½è®¿é—®ï¼ŒGG\nï¼ˆå³ä½¿æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œä¹°å¤§é™†èŠ‚ç‚¹çš„æœåŠ¡å»ºç«™ä¹Ÿæ˜¯ä¸€ç§è‡ªæ€è¡Œä¸ºï¼‰\næ³¨å†Œ æ³¨å†ŒVultr è´¦å·ï¼Œå……å€¼\nåˆ›å»º VPS é€‰ Cloud Compute\nCPU é€‰ AMD å’Œ Intel éƒ½è¡Œ\næœºæˆ¿ä½ç½®é€‰æ‹©æ—¥æœ¬ã€æ–°åŠ å¡ã€ç¾è¥¿éƒ½è¡Œï¼Œä¸€èˆ¬ä¸æ¨èæ¬§æ´²ï¼ˆå¯¹äºä¸­å›½å›½å†…ï¼‰\né€‰æ‹©æ“ä½œç³»ç»Ÿï¼šUbuntu 22.10 x64\né€‰æ‹© Sizeï¼š$5 çš„ 1C1G1TB å¥—é¤ï¼ˆè®°å¾—å‹¾é€‰ No Thanksï¼‰\nå…³é—­è‡ªåŠ¨å¤‡ä»½ï¼Œçœ $1\nAdditional Featuresï¼šå‹¾é€‰ Enable IPv6\næ·»åŠ  SSH Keys\næ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥\nssh-keygen -t rsa -b 4096 -C \u0026#34;Example comment\u0026#34; åœ¨è¿™è¡Œæç¤ºåé¢è¾“å…¥ä½ æƒ³è¦ä¿å­˜å¯†é’¥çš„è·¯å¾„\nGenerating public/private rsa key pair. Enter file in which to save the key (/home/example_user/.ssh/id_rsa): æˆ‘è¾“å…¥ï¼ˆuuæ˜¯æˆ‘çš„ç”µè„‘ç”¨æˆ·åï¼‰\n/home/uu/.ssh/id_rsa_vultr æ‰€ä»¥åœ¨ /.ssh ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ° id_rsa_vultr å’Œ id_rsa_vultr.pub æ–‡ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ç§é’¥å’Œå…¬é’¥\næ¥ä¸‹æ¥è¦æŠŠå…¬é’¥å†…å®¹æ·»åŠ åˆ° vultr å»\n# è¿›å…¥.ssh ç›®å½• cd .ssh # æ‰“å°æ–‡ä»¶å†…å®¹ cat id_rsa_vultr.pub è¿™æ—¶åº•éƒ¨ä»˜æ¬¾æ åº”è¯¥æ˜¾ç¤º $5.00/month ï¼Œç‚¹å‡» Deploy Now ç¡®è®¤åˆ›å»ºæœåŠ¡å™¨ï¼Œç­‰å¾…ä¸€ä¼šï¼Œç­‰ Status å˜æˆ Running å°±å¥½äº† ç‚¹å‡»åˆšåˆšåˆ›å»ºçš„ VPSï¼Œçœ‹åˆ°å¦‚ä¸‹ç•Œé¢ã€‚\nå·¦ä¸‹è§’çš„ IP Addressã€Usernameã€Password æ˜¯å¾…ä¼šè¿æ¥æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¦ç”¨åˆ°çš„ SSH è¿æ¥ä¿¡æ¯\nç™»å½• VNCï¼šæŸ¥çœ‹æ§åˆ¶å° å…³æœºï¼šå°±å’Œå…³ç”µè„‘ä¸€æ ·ï¼ˆå…³æœºçš„æ—¶å€™ä»ç„¶åœ¨è®¡è´¹å“¦ï¼ï¼‰ é‡å¯ï¼šå°±å’Œé‡å¯ç”µè„‘ä¸€æ · é‡è£…ç³»ç»Ÿï¼šæŠŠæœåŠ¡å™¨é‡ç½®æˆåˆšåˆ›å»ºæ—¶çš„çŠ¶æ€ é”€æ¯/åˆ é™¤ï¼šé”€æ¯äº†æœåŠ¡å™¨å°±ä¸è®¡è´¹äº†ï¼Œæ•°æ®ä¸¢å¤±ï¼Œæ— æ³•æ‰¾å› Snapshotsï¼šå¿«ç…§ï¼ŒæŒ‡å°†å½“å‰ VPS çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œå¯¹ VPS è¿›è¡Œå®Œæ•´å¤‡ä»½\næœåŠ¡å™¨åˆ›å»ºå®Œæˆ\næ£€æŸ¥ IP Ping ä¸€ä¸‹ IP\nç”¨æ£€æŸ¥å·¥å…·æ¯”å¦‚ https://ip112.cn/\ræ£€æŸ¥ IPï¼Œæ­¤ IP å¯ç”¨\nå…¶å®ƒæµ‹è¯•å·¥å…·\nhttp://ping.pe/\râ€” å…¨çƒèŠ‚ç‚¹ Pingï¼ŒåŒ…æ‹¬ä¸­å›½çš„ä¸‰å¤§è¿è¥å•† http://ping.chinaz.com/\râ€” Ping æ£€æµ‹ä¸­å›½å¤§é™†çš„è®¿é—®æƒ…å†µ åŸŸå åœ¨åŸŸåå•† Dynadot\ræ³¨å†Œè´¦å·ï¼Œä¹°ä¸€ä¸ªåŸŸå\nè§£æåŸŸå ä¾æ¬¡ç‚¹å‡»\næš‚åœâ¸ï¸\nå» CloudFlare\ræ³¨å†Œç™»å½•è´¦å·ï¼Œä¾æ¬¡æ“ä½œï¼š\næ·»åŠ æ–°ç«™ç‚¹\nè¾“å…¥ä½ çš„åŸŸå\né€‰æ‹©å…è´¹æ–¹æ¡ˆ\næ·»åŠ  DNS è§£æè®°å½•\n* æ˜¯é€šé…ç¬¦ï¼Œæ„æ€æ˜¯æˆ‘çš„äºŒçº§åŸŸåï¼Œxxx.ponderduck.cc çš„ DNS è§£æä¹Ÿä¸€èµ·è¢«æ¥ç®¡äº†ã€‚ä¸ç”¨æˆ‘ä¸€ä¸ªä¸€ä¸ªè®¾ç½®\nç¬¬äºŒè¡Œæ˜¯åŸŸåæœ¬ä½“\nwww è®©è¾“å…¥ www.ponderduck.cc\rä¹Ÿèƒ½è®¿é—®\nå¤åˆ¶ CloudFlare æä¾›çš„ä¸¤ä¸ªåç§°æœåŠ¡å™¨ï¼Œå¡«è¿› Dynadot çš„ DNS è®¾ç½®ï¼Œä¿å­˜\nå›åˆ° CloudFlare ç‚¹å‡» Done, check nameserversï¼Œç­‰ä¸€ä¼š\næµ‹è¯•ï¼Œping ä½ çš„åŸŸåï¼Œè¿”å›æœåŠ¡å™¨ IP è¯´æ˜è§£æç”Ÿæ•ˆ\nå¼€å¯å®Œå…¨ SSLï¼Œå¦åˆ™è®¿é—®ç«™ç‚¹ä¼šæŠ¥ã€Œé‡å®šå‘æ¬¡æ•°è¿‡å¤šã€çš„é”™è¯¯\nâœ…åŸŸåè§£æå®Œæˆ\næœåŠ¡å™¨åŸºç¡€é…ç½® å¯¹å“ªä¸€æ­¥ä¸è‡ªä¿¡ï¼Œå¯ä»¥åœ¨å¼€å§‹åšä¹‹å‰å…ˆå»æœåŠ¡å™¨ç®¡ç†é¢æ¿åˆ›å»ºä¸€ä¸ªå¿«ç…§ï¼ˆsnapshotsï¼‰ï¼Œå¿«ç…§å°±æ˜¯å­˜æ¡£ç‚¹\nè¿œç¨‹è¿æ¥ ssh root@101.113.22.42 # æ¢æˆä½ çš„ipåœ°å€ï¼Œå›è½¦ ç„¶åæŠŠå¯†ç ä» vultr å¤åˆ¶è¿‡æ¥å›è½¦ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æç¤ºå°±è¡¨ç¤ºè¿æ¥æœåŠ¡å™¨æˆåŠŸ\nWelcome to Ubuntu 22.10 (GNU/Linux 5.19.0-23-generic x86_64) * Documentation: https://help.ubuntu.com * Management: https://landscape.canonical.com * Support: https://ubuntu.com/advantage ...çœç•¥ä¸€éƒ¨åˆ†å†…å®¹... root@vultr:~# å®‰å…¨è®¾ç½® å› ä¸º root æƒé™å¤ªå¤ªå¤ªå¼ºå¤§ï¼Œä¸ºäº†é¿å…å©´å„¿ï¼ˆæˆ‘ï¼‰æ‹¿æ ¸æ­¦å™¨å‘å°„æŒ‰é’®çš„æƒ…å†µå‡ºç°ï¼Œåˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·æ—¥å¸¸ä½¿ç”¨\næ–°å»ºæ™®é€šç”¨æˆ·å¹¶è®¾å®šå¯†ç  adduser vpsadmin # vpsadminæ˜¯ç”¨æˆ·å ç„¶åè¾“å…¥å¯†ç  - ç¡®è®¤å¯†ç ï¼ˆå¤ªç®€å•ä¼šè¢«æ‹’ç»==ï¼‰\nèµ‹äºˆ ã€Œvpsadminã€ ä½¿ç”¨ sudo æŒ‡ä»¤çš„æƒé™ ä»€ä¹ˆæ˜¯ su å’Œ sudo è¯·çœ‹ï¼šLinux çš„ su èˆ‡ sudo æŒ‡ä»¤æ•™å­¸èˆ‡ç¯„ä¾‹\rsudo adduser vpsadmin sudo å¦å¤–å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œç™»å½• vpsadmin è´¦å·\nssh vpsadmin@185.202.62.49 # æ¢æˆä½ çš„IPï¼Œå›è½¦ï¼Œç„¶åè¾“å…¥å¯†ç  éªŒè¯æ˜¯å¦è·å¾— sudo æƒé™\nsudo ls -al /root è¿”å›ç±»ä¼¼å†…å®¹ï¼ˆå±•ç¤º /root ç›®å½•ä¸‹çš„èµ„æ–™ï¼‰å°±è¡¨ç¤ºæˆåŠŸäº†\n[å¯é€‰]SSHå…å¯†ç™»å½• æ¯æ¬¡ç™»å½• vpsadmin éƒ½è¦æ‰‹åŠ¨è¾“å¯†ç å¾ˆéº»çƒ¦ï¼Œè®¾ç½®ä¸€ä¸‹å…å¯†ç™»å½•\nåœ¨ Tabby è®¾ç½® - Profiles \u0026amp; connections - + New profile - SSH connection\nç¦æ­¢ root ç™»å½• ï¼ˆç¦ç”¨æ ¸æŒ‰é’®ï¼‰\nç™»å½• root è´¦æˆ·ï¼Œè¾“å…¥\nnano /etc/ssh/sshd_config ä½¿ç”¨ control + W è¿›å…¥æœç´¢æ¨¡å¼ï¼Œè¾“å…¥ PerimitRootLogin å¹¶å›è½¦ï¼Œæ‰¾åˆ°æ‰€åœ¨è¡Œï¼Œæ”¹æˆï¼ˆè®°å¾—è¦å–æ‰æ³¨é‡Š #ï¼ï¼ï¼‰\nPermitRootLogin: no *prohibit-password/without-password æ„ä¸ºç¦æ­¢å¯†ç ç™»å½•\nä½¿ç”¨ control + Oï¼Œä¿å­˜æ›´æ”¹ï¼Œcontrol + X é€€å‡º\né‡æ–°å¯åŠ¨ SSH æœåŠ¡\nsudo /etc/init.d/ssh restart æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ï¼Œå°è¯•ç”¨ root ç™»å½•ï¼Œè¿”å› Permission denied\u0026hellip;\nâœ…æˆåŠŸç¦æ­¢ root ç™»å½•\nä»ç°åœ¨å¼€å§‹ï¼Œç”¨ã€Œvpsadminã€è¿™ä¸ªè´¦æˆ·è¿œç¨‹è¿æ¥ VPS å§\næ­å»ºç¯å¢ƒ ä¿®æ”¹æœåŠ¡å™¨æ—¶é—´ æŸ¥çœ‹æ—¶é—´\ntimedatectl åˆ—å‡ºæ‰€æœ‰æ—¶åŒº\ntimedatectl list-timezones æ”¹æˆé¦™æ¸¯ğŸ‡­ğŸ‡°\nsudo timedatectl set-timezone Asia/Hong_Kong å®‰è£…å¸¸ç”¨å‘½ä»¤ sudo apt-get install curl wget screen tree -y *curlç”¨äºè¯·æ±‚ Web æœåŠ¡å™¨\n*wgetç”¨æ¥ä¸‹è½½è½¯ä»¶åŒ…\n*screenç”¨äºå‘½ä»¤è¡Œç»ˆç«¯çš„çª—å£åˆ‡æ¢\n*treeç”¨äºæ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹çš„ç›®å½•ç»“æ„\nï¼ˆå¦‚æœä½ æœ‰å…¶å®ƒè¦ç”¨çš„ä¹Ÿä¸€èµ·åŠ è¿›æ¥ï¼Œæˆ–è€…è¦ç”¨äº†å†ç”¨è¿™ä¸ªå‘½ä»¤å•ç‹¬å®‰è£…ä¹Ÿå¯ä»¥ï¼‰\næ·»åŠ  SWAP swap æ˜¯ Linux ä¸­çš„è™šæ‹Ÿå†…å­˜ï¼Œç”¨äºåœ¨ç‰©ç†å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹å‚¨å­˜ä¸´æ—¶æ•°æ®ï¼Œå¯ä»¥æå‡å°å†…å­˜ VPS çš„è¿è¡Œæ•ˆç‡\nç¡®è®¤æ˜¯å¦å·²å­˜åœ¨ SWAP\nfree -m æœ‰ Swap é¡¹è€Œä¸” total åˆ—ä¸ä¸ºé›¶ï¼Œè¯´æ˜ Swap å·²å­˜åœ¨ï¼Œå¯ä»¥è‡ªè¡Œä¿®æ”¹åˆ†åŒºå®¹é‡ï¼Œå‚è€ƒï¼šä¸º Linux æ·»åŠ  swap åˆ†åŒºæˆ–ä¿®æ”¹ swap åˆ†åŒºå®¹é‡\ré…ç½®é˜²ç«å¢™ sudo ufw allow OpenSSH sudo ufw enable æ‰“å¼€é˜²ç«å¢™\nsudo ufw allow http sudo ufw allow https æ‰“å¼€ 80ã€443 çš„ç«¯å£\nsudo ufw allow 80/tcp sudo ufw allow 443/tcp ï¼ˆå…¶å®ƒæœåŠ¡éœ€è¦çš„ç«¯å£ä¹Ÿç”¨ sudo ufw allow xx/tcp å¼€å¯ï¼‰\néªŒè¯é˜²ç«å¢™æ˜¯å¦æ‰“å¼€ï¼Œç«¯å£æ˜¯å¦å¼€å¯\nsudo ufw status å’Œå…¶å®ƒæœåŠ¡å•†ä¸åŒï¼ŒVultr æ²¡æœ‰é»˜è®¤é˜²ç«å¢™è®¾ç½®ï¼Œæ‰€ä»¥è¦è‡ªå·±å¼€å¯\nåœ¨ Vultr æ·»åŠ é˜²ç«å¢™è§„åˆ™\nå®‰è£… Docker å’Œ Docker Compose *Compose æ˜¯ Docker çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡ yml æ–‡ä»¶å®šä¹‰ã€åˆ›å»ºã€ç®¡ç†å¤šå®¹å™¨çš„ Docker åº”ç”¨\nè·Ÿç€ å¦‚ä½•åœ¨ Ubuntu 22.04 LTS ä¸­å®‰è£… Docker å’Œ Docker Compose\rä¸æ»‘å®Œæˆå®‰è£…\næ¨èï¼šDocker Commands Tutorial | Getting Started With Docker In Linux\rä¿®æ”¹ Docker é…ç½® Docker çš„é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯ /etc/docker/daemon.jsonï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼š\nè¿›å…¥ /etc/docker ç›®å½•\ncd /etc/docker ç”¨ vim ç¼–è¾‘ daemon.json æ–‡ä»¶\nsudo vim daemon.json è¿›å…¥ vim åè¾“å…¥å¦‚ä¸‹å†…å®¹ï¼Œè¿™æ®µä»£ç ä¼šå¢åŠ ä¸€æ®µè‡ªå®šä¹‰å†…ç½‘ IPv6 åœ°å€ï¼Œå¼€å¯å®¹å™¨çš„ IPv6 åŠŸèƒ½ï¼Œé™åˆ¶æ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼ˆ20Mï¼‰ï¼Œé™åˆ¶æ—¥å¿—æ–‡ä»¶æ•°é‡ï¼Œé˜²æ­¢ Docker æ—¥å¿—è¿‡å¤šå ç”¨ç¡¬ç›˜\nï¼ˆä»£ç æ¥è‡ªçƒ§é¥¼åšå®¢\rï¼‰\n{ \u0026#34;log-driver\u0026#34;: \u0026#34;json-file\u0026#34;, \u0026#34;log-opts\u0026#34;: { \u0026#34;max-size\u0026#34;: \u0026#34;20m\u0026#34;, \u0026#34;max-file\u0026#34;: \u0026#34;3\u0026#34; }, \u0026#34;ipv6\u0026#34;: true, \u0026#34;fixed-cidr-v6\u0026#34;: \u0026#34;fd00:dead:beef:c0::/80\u0026#34;, \u0026#34;experimental\u0026#34;:true, \u0026#34;ip6tables\u0026#34;:true } âš ï¸ vim å’Œæ™®é€šé”®å…¥ç•¥æœ‰ä¸ç”¨\né¦–å…ˆ I è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¾“å…¥å†…å®¹ï¼ˆæ³¨æ„æ ¼å¼ï¼šå¤§æ‹¬å· {} é‡Œçš„å†…å®¹é™¤äº†æœ€åä¸€è¡Œï¼Œéƒ½å¿…é¡»ç”¨è‹±æ–‡é€—å· , ç»“å°¾ï¼‰\nå®Œæˆè¾“å…¥åï¼ŒæŒ‰ esc å›åˆ°ä¸€èˆ¬æ¨¡å¼\nè¾“å…¥ :wq ï¼Œå›è½¦ï¼ˆæ„ä¸ºä¿å­˜-ç¦»å¼€ï¼‰\nä¸æ”¾å¿ƒå¯ä»¥å†æ¬¡è¿›å…¥ daemon.json æ£€æŸ¥æ˜¯å¦æˆåŠŸå†™å…¥ï¼Œæ•ˆæœç±»ä¼¼ï¼š\näº†è§£ï¼šLinux vi/vim æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆä½¿ç”¨\ré‡å¯ Docker æœåŠ¡\nsudo systemctl daemon-reload sudo systemctl restart docker æ£€æŸ¥ Docker æ˜¯å¦æ­£åœ¨è¿è¡Œ sudo systemctl status docker æ¢ä¸ªæ–¹å¼ï¼Œå†æµ‹è¯•ä¸€ä¸‹\nsudo docker run hello-world ç»ˆäºæˆåŠŸäº† ğŸ˜­\nMisskey åˆ›å»ºå®‰è£…ç›®å½• ä¹‹å‰ç»™ Docker çš„æ•°æ®å’Œé…ç½®æ–‡ä»¶æ–°å»ºä¸€ä¸ªç›®å½• docker_dataï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯åŒ…ä½æ•´ä¸ª Misskey çš„ç›’å­\nsudo mkdir -p data/docker_data è¿›å…¥ç›®å½•\ncd data/docker_data åˆ›å»º misskey æ–‡ä»¶å¤¹\nsudo mkdir misskey é…ç½®å®‰è£…æ–‡ä»¶ è¿›å…¥ misskey æ–‡ä»¶å¤¹\ncd misskey åˆ›å»ºå¹¶ç¼–è¾‘ yml æ–‡ä»¶ï¼Œè®©å®ƒå»éƒ¨ç½²\nsudo vim docker-compose.yml æŒ‰ Iï¼Œåˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ï¼ŒæŠŠä»¥ä¸‹å†…å®¹ç²˜è´´è¿›å»\n# Misskey minimal deploy config version: \u0026#34;3\u0026#34; services: web: restart: unless-stopped # alwaysæ„å‘³ç€è‡ªåŠ¨é‡å¯ï¼Œè¯·æ³¨æ„å¦‚æœæ‚¨å¯¹æ‚¨çš„é…ç½®æ²¡æœ‰ä¿¡å¿ƒï¼Œè¯·ä¸è¦å¼€å¯è¿™ä¸ªé€‰é¡¹ï¼Œä»¥é¿å…è¿›ç¨‹å´©æºƒåå¤é‡å¯è€—è´¹å¤§é‡èµ„æºï¼ image: misskey/misskey:latest # è¿™é‡Œä½¿ç”¨äº†å®˜æ–¹é•œåƒï¼Œä»¥é¿å…æœ¬åœ°æ„å»ºæ—¶èµ„æºä¸è¶³çš„é—®é¢˜ container_name: misskey_web # å®¹å™¨åï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œæ‚¨å¯ä»¥è‡ªè¡Œä¿®æ”¹ä¸ºæ‚¨è§‰å¾—åˆé€‚çš„å†…å®¹ links: - db - redis ports: - \u0026#34;3001:3001\u0026#34; networks: - internal_network - external_network volumes: - ./config:/misskey/.config:ro # ç”¨äºæ˜ å°„é…ç½®æ–‡ä»¶ï¼Œè¯·æ ¹æ®æ‚¨çš„å®é™…é…ç½®æ¥å†³å®šæ–‡ä»¶å¤¹åç§°ï¼Œè®¾å®šä¸ºåªè¯»å³å¯ï¼› - ./files:/misskey/files # ç”¨æˆ·ä¸Šä¼ åˆ°æœ¬åœ°çš„æ–‡ä»¶ï¼Œå¦‚æœæ‚¨ä¸€å¼€å§‹å°±æ¥å…¥å¤–éƒ¨å­˜å‚¨ï¼ˆå¦‚wasabiæˆ–æ˜¯AWS S3ï¼‰æ‚¨å¯ä»¥å¿½ç•¥è¿™å—é…ç½® redis: restart: unless-stopped image: redis:latest container_name: misskey_redis networks: - internal_network volumes: - ./redis:/data # redisæ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å¤¹æ˜ å°„ï¼Œåˆ›å»ºåé»˜è®¤åœ¨ ./redis æ–‡ä»¶å¤¹ä¸­ db: restart: unless-stopped image: postgres:12.2-alpine container_name: misskey_db networks: - internal_network env_file: - ./config/docker.env # éœ€è¦ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ Docker ç¯å¢ƒå˜é‡ volumes: - ./db:/var/lib/postgresql/data # ä¸»æ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å¤¹æ˜ å°„ï¼Œåˆ›å»ºåé»˜è®¤åœ¨ ./db æ–‡ä»¶å¤¹ä¸­ networks: internal_network: # å†…éƒ¨ç½‘ç»œ internal: true external_network: # å¤–éƒ¨ç½‘ æŒ‰ esc ï¼ŒæŒ‰ :wq ï¼Œå›è½¦ï¼ˆä¿å­˜-é€€å‡ºï¼‰\nåˆ›å»º config/default.yml ç›®å½•å¹¶è¿›å…¥ yml æ–‡ä»¶ä¸­\nsudo mkdir config cd config sudo vim default.yml æŒ‰ Iï¼Œåˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹\n#â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” # Misskey configuration #â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” # â”Œâ”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ URL â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ # Final accessible URL seen by a user. url: https://ponderduck.cc/ # æ³¨æ„æ”¹æˆè‡ªå·±æœ€ååå‘ä»£ç†æƒ³è¦çš„ç½‘å€ # ONCE YOU HAVE STARTED THE INSTANCE, DO NOT CHANGE THE # URL SETTINGS AFTER THAT! # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ Port and TLS settings â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ # # Misskey requires a reverse proxy to support HTTPS connections. # # +----- https://example.tld/ ------------+ # +------+ |+-------------+ +----------------+| # | User | ---\u0026gt; || Proxy (443) | ---\u0026gt; | Misskey (3000) || # +------+ |+-------------+ +----------------+| # +---------------------------------------+ # # You need to set up a reverse proxy. (e.g. nginx) # An encrypted connection with HTTPS is highly recommended # because tokens may be transferred in GET requests. # The port that your Misskey server should listen on. port: 3001 # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ PostgreSQL configuration â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ db: host: db port: 5432 # Database name db: misskey # Auth user: example-misskey-user pass: example-misskey-pass # Whether disable Caching queries #disableCache: true # Extra Connection options #extra: # ssl: true # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ Redis configuration â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ redis: host: redis port: 6379 #family: 0 # 0=Both, 4=IPv4, 6=IPv6 #pass: example-pass #prefix: example-prefix #db: 1 # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ Elasticsearch configuration â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ #elasticsearch: # host: localhost # port: 9200 # ssl: false # user: # pass: # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ ID generation â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ # You can select the ID generation method. # You don\u0026#39;t usually need to change this setting, but you can # change it according to your preferences. # Available methods: # aid ... Short, Millisecond accuracy # meid ... Similar to ObjectID, Millisecond accuracy # ulid ... Millisecond accuracy # objectid ... This is left for backward compatibility # ONCE YOU HAVE STARTED THE INSTANCE, DO NOT CHANGE THE # ID SETTINGS AFTER THAT! id: \u0026#39;aid\u0026#39; # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” #â”€â”€â”€â”˜ Other configuration â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ # Whether disable HSTS #disableHsts: true # Number of worker processes #clusterLimit: 1 # Job concurrency per worker # deliverJobConcurrency: 128 # inboxJobConcurrency: 16 # Job rate limiter # deliverJobPerSec: 128 # inboxJobPerSec: 16 # Job attempts # deliverJobMaxAttempts: 12 # inboxJobMaxAttempts: 8 # IP address family used for outgoing request (ipv4, ipv6 or dual) #outgoingAddressFamily: ipv4 # Syslog option #syslog: # host: localhost # port: 514 # Proxy for HTTP/HTTPS #proxy: http://127.0.0.1:3128 #proxyBypassHosts: [ # \u0026#39;example.com\u0026#39;, # \u0026#39;192.0.2.8\u0026#39; #] # Proxy for SMTP/SMTPS #proxySmtp: http://127.0.0.1:3128 # use HTTP/1.1 CONNECT #proxySmtp: socks4://127.0.0.1:1080 # use SOCKS4 #proxySmtp: socks5://127.0.0.1:1080 # use SOCKS5 # Media Proxy #mediaProxy: https://example.com/proxy # Proxy remote files (default: false) #proxyRemoteFiles: true # Sign to ActivityPub GET request (default: false) #signToActivityPubGet: true #allowedPrivateNetworks: [ # \u0026#39;127.0.0.1/32\u0026#39; #] # Upload or download file size limits (bytes) #maxFileSize: 262144000 æŒ‰ esc ï¼ŒæŒ‰ :wq ï¼Œå›è½¦ï¼ˆä¿å­˜-é€€å‡ºï¼‰\nè¿›å…¥ env æ–‡ä»¶\nsudo vim docker.env æŒ‰ Iï¼Œåˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼ï¼Œå¡«å†™å¦‚ä¸‹å†…å®¹\n# db settings POSTGRES_PASSWORD=example-misskey-pass POSTGRES_USER=example-misskey-user POSTGRES_DB=misskey éƒ¨ç½² è¿˜è®°å¾—æˆ‘è¯´ã€Œåˆ›å»ºå¹¶ç¼–è¾‘ yml æ–‡ä»¶ï¼Œè®©å®ƒå»éƒ¨ç½²ã€å—ï¼Ÿ\nç°åœ¨æ–‡ä»¶å·²ç»é…ç½®å®Œæ¯•äº†ï¼Œæ˜¯æ—¶å€™è®©å®ƒè·‘èµ·æ¥äº†ï¼\nåŒæ‰‹åˆåğŸ™\nåˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•\ncd .. åˆå§‹åŒ–æ•°æ®åº“\nsudo docker-compose run --rm web yarn run init åå°å¯åŠ¨é¡¹ç›®å®¹å™¨\nsudo docker-compose up -d è®¿é—®ç«™ç‚¹ æŸ¥çœ‹ç«¯å£çŠ¶æ€\nsudo lsof -i:\u0026lt;port\u0026gt; å‡å¦‚è¿™ä¸ªç«¯å£ä¸èƒ½ç”¨ï¼Œé‚£å°±æ¢ä¸€ä¸ªã€‚\næ–°ç«¯å£è¦åœ¨æœåŠ¡å•†é˜²ç«å¢™ã€ufw å‘½ä»¤ã€default.yml å’Œ docker-compose.yml é‡Œéƒ½å¼€å¯ã€æ”¹è¿‡æ¥\nç„¶åé‡å¯ Docker\nsudo docker-compose restart [æŒ‡å®šæœåŠ¡çš„å®¹å™¨] å®Œæˆè¿™ä¸€æ­¥ä¹‹åï¼Œå°è¯•ç”¨ IP è®¿é—®ç«™ç‚¹å§\nåœ¨æµè§ˆå™¨è¾“å…¥ http://\u0026lt;ip\u0026gt;:\u0026lt;port\u0026gt;ï¼ˆIP å¯ä»¥ç”¨ curl ip.sb è¿”å›ï¼‰\nï¼ˆï¼›\nè¿˜æœ‰ä¸¤ä¸ªä»»åŠ¡\nSSL è¯ä¹¦ åå‘ä»£ç† Nginx å®‰è£… Nginx sudo apt update sudo apt install nginx è°ƒæ•´é˜²ç«å¢™ï¼Œå…è®¸ Nginx æœåŠ¡é€šè¿‡\nsudo ufw allow \u0026#39;Nginx HTTP\u0026#39; sudo ufw allow \u0026#39;Nginx HTTPS\u0026#39; sudo ufw allow \u0026#39;Nginx FULL\u0026#39; æŸ¥çœ‹æ›´æ”¹ç»“æœ\nsudo ufw status æŸ¥çœ‹ Nginx çŠ¶æ€ï¼ˆæ˜¯ active å°±è¡Œï¼‰\nsystemctl status nginx åœ¨æµè§ˆå™¨è¾“å…¥ http://your_vps_ipï¼Œè¿”å› Nginx é»˜è®¤é¡µé¢\nè®© Nginx åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨\nsudo systemctl enable nginx è®¾ç½®æœåŠ¡å™¨å— åˆ›å»ºç«™ç‚¹å¯¹åº”ç›®å½•\nsudo mkdir -p /var/www/ponderduck.cc/html ä½¿ç”¨$USERç¯å¢ƒå˜é‡åˆ†é…ç›®å½•çš„æ‰€æœ‰æƒ\nsudo chown -R $USER:$USER /var/www/ponderduck.cc/html å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¿®æ”¹è‡ªå·±çš„umaskå€¼ï¼Œé‚£ä¹ˆ Web æ ¹ç›®å½•çš„æƒé™åº”è¯¥æ­£ç¡®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥ç¡®è®¤ï¼š\nsudo chmod -R 755 /var/www/ponderduck.cc ç¼–è¾‘index.html\nsudo vim /var/www/ponderduck.cc/html/index.html æ·»åŠ ä»¥ä¸‹ç¤ºä¾‹HTML\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Welcome to ponderduck.cc!\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Success! The ponderduck.cc server block is working!\u0026lt;/h1\u0026gt; \u0026lt;/body\u0026gt; ä¸º Nginx åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å—\nåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶\nsudo vim /etc/nginx/sites-available/ponderduck.conf æ·»åŠ ä»¥ä¸‹å†…å®¹\nserver { listen 80; listen [::]:80; root /var/www/ponderduck.cc/html; index index.html index.htm index.nginx-debian.html; server_name ponderduck.cc www.ponderduck.cc; location / { try_files $uri $uri/ =404; } } é€šè¿‡ ls å‘½ä»¤åœ¨sites-enabledç›®å½•æ–°å»ºä¸€ä¸ªé“¾æ¥ï¼Œå¥½è®© Nginx åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šè¯»å–è¿™ä¸ªç›®å½•ï¼š\nsudo ln -s /etc/nginx/sites-available/ponderduck.conf /etc/nginx/sites-enabled/ æ‰“å¼€æ–‡ä»¶ï¼š\nsudo vim /etc/nginx/nginx.conf æ‰¾åˆ°server_names_hash_bucket_sizeæŒ‡ä»¤å¹¶åˆ é™¤#ç¬¦å·ï¼š\n... http { ... server_names_hash_bucket_size 64; ... } ... æ¥ä¸‹æ¥ï¼Œæµ‹è¯•ä»¥ç¡®ä¿æˆ‘ä»¬åœ¨ Nginx æ–‡ä»¶ä¸­çš„æ”¹åŠ¨ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼š\nsudo nginx -t å¦‚æœæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·é‡æ–°å¯åŠ¨ Nginxï¼š\nsudo systemctl restart nginx ç°åœ¨é€šè¿‡ http://ponderduck.cc\rè®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒNginx ä¼šæŒ‡å‘æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„é‚£ä¸ª HTML é¡µé¢\nSSL å®‰è£… Certbot æˆ‘ä»¬éœ€è¦è·å¾—è¢«ä¿¡ä»»çš„è¯ä¹¦æˆæƒä¸­å¿ƒï¼ˆ CA ï¼‰ç­¾å‘çš„å®‰å…¨è¯ä¹¦ã€‚Letâ€™s Encrypt æ˜¯ ISRG ï¼ˆ Internet Security Research Group ï¼Œäº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼‰çš„ç»„ç»‡æ¨å‡ºçš„å…è´¹å®‰å…¨è¯ä¹¦è®¡åˆ’ã€‚\nISRG çš„å‘èµ·è€… EFF ï¼ˆç”µå­å‰å“¨åŸºé‡‘ä¼šï¼‰ä¸º Letâ€™s Encrypt é¡¹ç›®å‘å¸ƒäº†ä¸€ä¸ªå®˜æ–¹çš„å®¢æˆ·ç«¯ Certbot ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å®Œå…¨è‡ªåŠ¨åŒ–çš„è·å–ã€éƒ¨ç½²å’Œæ›´æ–°å®‰å…¨è¯ä¹¦\nå®‰è£… Certbot\nå» å®˜ç½‘\ré€‰æ‹©æˆ‘æ­£åœ¨ä½¿ç”¨çš„ Web æœåŠ¡å™¨ï¼ˆNginxï¼‰å’Œæ“ä½œç³»ç»Ÿï¼ˆUbuntu 20ï¼‰ï¼Œæ“ä½œå¯¹åº”çš„å®‰è£…æ­¥éª¤\nUbuntu è‡ªå¸¦ Snapï¼Œç”¨ Snap å®‰è£… Certbot\nsudo snap install --classic certbot ç”¨ ln å‘½ä»¤åˆ›å»ºç¬¦å·è¿æ¥ï¼Œå°† Certbot åŠ å…¥ PATH ç¯å¢ƒå˜é‡ä¸­\nsudo ln -s /snap/bin/certbot /usr/bin/certbot ç”Ÿæˆ SSL è¯ä¹¦ sudo certbot --nginx -d www.ponderduck.cc è¾“å…¥é‚®ç®±åœ°å€ï¼Œç”¨äºæ¥æ”¶é‚®ä»¶\nè¾“å…¥ Yï¼ŒåŒæ„åè®®ï¼›è¯¢é—®æ˜¯å¦æ¥æ”¶å‰å“¨åŸºé‡‘ä¼šçš„é‚®ä»¶ï¼Œæ¥ä¸æ¥æ”¶éƒ½è¡Œ\nè¿”å›ï¼ˆæ³¨æ„è¯ä¹¦å‚¨å­˜ä½ç½®ï¼‰\nSuccessfully received certificate. Certificate is saved at: /etc/letsencrypt/live/www.ponderduck.cc/fullchain.pem Key is saved at: /etc/letsencrypt/live/www.ponderduck.cc/privkey.pem This certificate expires on 2023-02-18. These files will be updated when the certificate renews. Certbot has set up a scheduled task to automatically renew this certificate in the background. Let\u0026rsquo;s Encrypt çš„ SSL è¯ä¹¦ä¼šåœ¨ 90 å¤©åè¿‡æœŸï¼Œä½†æ˜¯ Certbot ä¼šè‡ªåŠ¨ç»­è®¢\næµ‹è¯•è¯ä¹¦è‡ªåŠ¨ç»­è®¢æ˜¯å¦ç”Ÿæ•ˆ\nsudo certbot renew --dry-run è¿”å›â¬‡ï¸è¯´æ˜å·²ç”Ÿæ•ˆ\nSimulating renewal of an existing certificate for www.ponderduck.cc æ‰¾åˆ°å­˜æ”¾ç«™ç‚¹è¯ä¹¦çš„ç›®å½•\nsudo ls /etc/letsencrypt/live æˆ‘çš„æ˜¯www.ponderduck.cc æŸ¥è¯¢è¯ä¹¦\nsudo ls /etc/letsencrypt/live/www.ponderduck.cc è¿”å›æ–‡ä»¶å\ncert.pem chain.pem fullchain.pem privkey.pem åä¸¤ä¸ªè¦æ·»åŠ åˆ° Nginx é…ç½®æ–‡ä»¶ .conf é‡Œ\nåå‘ä»£ç† ä¿®æ”¹ç½‘ç«™é…ç½®æ–‡ä»¶\nå‚è€ƒ å®˜ç½‘æ–‡æ¡£\rï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å®Œæ•´æ–‡ä»¶å†…å®¹\n# For WebSocket map $http_upgrade $connection_upgrade { default upgrade; \u0026#39;\u0026#39; close; } proxy_cache_path /tmp/nginx_cache levels=1:2 keys_zone=cache1:16m max_size=1g inactive=720m use_temp_path=off; server { listen 80; listen [::]:80; server_name www.ponderduck.cc ponderduck.cc; # For SSL domain validation root /var/www/html; location /.well-known/acme-challenge/ { allow all; } location /.well-known/pki-validation/ { allow all; } location / { return 301 https://$server_name$request_uri; } } server { listen [::]:443 ssl http2; listen 443 ssl http2; server_name ponderduck.cc www.ponderduck.cc; ssl_session_cache shared:ssl_session_cache:10m; # ssl ssl_certificate /etc/letsencrypt/live/www.ponderduck.cc/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/www.ponderduck.cc/privkey.pem; include /etc/letsencrypt/options-ssl-nginx.conf; ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; ssl_stapling on; ssl_stapling_verify on; # Change to your upload limit client_max_body_size 80m; # å¯¹\u0026#34;/\u0026#34;å¯ç”¨åå‘ä»£ç† location / { # æŒ‡å®šè½¬å‘åœ°å€ proxy_pass http://127.0.0.1:3001; proxy_set_header Host $host; proxy_http_version 1.1; proxy_redirect off; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $connection_upgrade; proxy_cache cache1; proxy_cache_lock on; proxy_cache_use_stale updating; add_header X-Cache $upstream_cache_status; } } æ¥ä¸‹æ¥ï¼Œæµ‹è¯•ä»¥ç¡®ä¿æˆ‘ä»¬åœ¨ Nginx æ–‡ä»¶ä¸­çš„æ”¹åŠ¨ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼š\nsudo nginx -t æœ‰é—®é¢˜çš„è¯æŒ‰ç…§æç¤ºä¿®æ”¹ï¼Œåšå®Œä¹‹åï¼Œé‡æ–°å¯åŠ¨ Nginxï¼š\nsudo systemctl restart nginx ç°åœ¨ SSL è¯ä¹¦å’Œåå‘ä»£ç†éƒ½ç”Ÿæ•ˆäº†ï¼Œå°è¯•ç”¨åŸŸåè®¿é—®ç«™ç‚¹\nå®ŒæˆğŸ‰\næ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œå›åˆ°å‘½ä»¤è¡Œå·¥å…·æŠŠå®ƒè®¾ç½®ä¸ºç®¡ç†å‘˜\næ—¥å¸¸ç»´æŠ¤ æ›´æ–° Docker-compose éƒ¨ç½²\ncd data/docker_data/misskey docker-compose down cp -r /root/data/docker_data/misskey /root/data/docker_data/misskey.archive # ä¸‡äº‹å…ˆå¤‡ä»½ï¼Œä»¥é˜²ä¸‡ä¸€ï¼Œå…¶å®è¿™è¾¹æ²¡å¿…è¦ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ˜ å°„åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ docker-compose pull docker-compose up -d # è¯·ä¸è¦ä½¿ç”¨docker-compose stopæ¥åœæ­¢å®¹å™¨ï¼Œå› ä¸ºè¿™ä¹ˆåšéœ€è¦é¢å¤–çš„æ—¶é—´ç­‰å¾…å®¹å™¨åœæ­¢ï¼›docker-compose up -dç›´æ¥å‡çº§å®¹å™¨æ—¶ä¼šè‡ªåŠ¨åœæ­¢å¹¶ç«‹åˆ»é‡å»ºæ–°çš„å®¹å™¨ï¼Œå®Œå…¨æ²¡æœ‰å¿…è¦æµªè´¹é‚£äº›æ—¶é—´ã€‚ docker image prune # prune å‘½ä»¤ç”¨æ¥åˆ é™¤ä¸å†ä½¿ç”¨çš„ docker å¯¹è±¡ã€‚åˆ é™¤æ‰€æœ‰æœªè¢« tag æ ‡è®°å’Œæœªè¢«å®¹å™¨ä½¿ç”¨çš„é•œåƒ æç¤ºï¼š\nWARNING! This will remove all dangling images. Are you sure you want to continue? [y/N] è¾“å…¥ y\nå¸è½½ cd /root/data/docker_data/misskey docker-compose down rm -rf /root/data/docker_data/misskey # å®Œå…¨åˆ é™¤æ˜ å°„åˆ°æœ¬åœ°çš„æ•°æ® åˆ é™¤æ—§æ•°æ® docker system prune ç£ç›˜ç©ºé—´åˆ†æåŠæ¸…ç† å†…å®¹ä¸»è¦æ¥æºï¼šhttps://www.cnblogs.com/jing99/p/10487174.html\næœ‰æ—¶å€™è¦ç”¨ sudo\ndf å‘½ä»¤ å¯ä»¥æŸ¥çœ‹ä¸€çº§æ–‡ä»¶å¤¹å¤§å°ã€ä½¿ç”¨æ¯”ä¾‹ã€æ¡£æ¡ˆç³»ç»Ÿå’ŒæŒ‚å…¥dian\n[root@oms ~]# df -Th Filesystem Type Size Used Avail Use% Mounted on /dev/vda1 ext4 40G 35G 3.1G 92% / devtmpfs devtmpfs 1.9G 0 1.9G 0% /dev tmpfs tmpfs 1.9G 0 1.9G 0% /dev/shm tmpfs tmpfs 1.9G 191M 1.7G 11% /run tmpfs tmpfs 1.9G 0 1.9G 0% /sys/fs/cgroup tmpfs tmpfs 379M 0 379M 0% /run/user/0 ä¸ƒä¸ªå­—æ®µåˆ†åˆ«ä¸ºæ¡£æ¡ˆç³»ç»Ÿã€ç±»å‹ã€è¯¥åˆ†å‰²åŒºçš„å®¹é‡ã€å·²ä½¿ç”¨çš„å¤§å°ã€å‰©ä¸‹çš„å¤§å°ã€ä½¿ç”¨çš„ç™¾åˆ†æ¯”å’ŒæŒ‚å…¥ç‚¹\nduå‘½ä»¤ ç”¨æ¥æŸ¥çœ‹ç›®å½•æˆ–æ–‡ä»¶æ‰€å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°ã€‚å¸¸ç”¨é€‰é¡¹ç»„åˆä¸ºï¼šdu -sh [ç›®å½•]\ndu -s ç›®å½• | sort -rn #è¿™æ˜¯æŒ‰å­—èŠ‚æ’åº du -sh ç›®å½• | sort -rn #è¿™æ˜¯æŒ‰å…†ï¼ˆMï¼‰æ¥æ’åº #ç”±äº-shå¤§å°æ˜¾ç¤ºçœ‹èµ·æ¥æ˜¯ä¹±çš„ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨du -s|sort -nr du -s ç›®å½• | sort -rn | head #é€‰å‡ºæ’åœ¨å‰é¢çš„10ä¸ª du -s ç›®å½• | sort -rn | tail #é€‰å‡ºæ’åœ¨åé¢çš„10ä¸ª å¸¸ç”¨é€‰é¡¹\n-hï¼šä»¥äººç±»å¯è¯»çš„æ–¹å¼æ˜¾ç¤º\n-aï¼šæ˜¾ç¤ºç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œè¿˜è¦æ˜¾ç¤ºå…¶ä¸‹ç›®å½•å’Œæ–‡ä»¶å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°\n-sï¼šåªæ˜¾ç¤ºç›®å½•å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œä¸æ˜¾ç¤ºå…¶å­ç›®å½•å’Œæ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°\n-cï¼šæ˜¾ç¤ºå‡ ä¸ªç›®å½•æˆ–æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ï¼Œè¿˜è¦ç»Ÿè®¡å®ƒä»¬çš„æ€»å’Œ\n\u0026ndash;apparent-sizeï¼šæ˜¾ç¤ºç›®å½•æˆ–æ–‡ä»¶è‡ªèº«çš„å¤§å°(æ–‡ä»¶æˆ–ç›®å½•å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°ä¸å®ƒä»¬è‡ªèº«å¤§å°æœ‰æ—¶å€™å¹¶éå®Œå…¨ä¸€è‡´)\n-l ï¼šç»Ÿè®¡ç¡¬é“¾æ¥å ç”¨ç£ç›˜ç©ºé—´çš„å¤§å°\n-Lï¼šç»Ÿè®¡ç¬¦å·é“¾æ¥æ‰€æŒ‡å‘çš„æ–‡ä»¶å ç”¨çš„ç£ç›˜ç©ºé—´å¤§å°ã€‚\nrm å‘½ä»¤ æ…ç”¨\nä»¥ä¸‹å¾…åšï¼š\nhttps://fediverse.eu.org/discussion/15/%E7%BB%99%E6%96%B0%E7%AB%99%E9%95%BF-%E5%BB%BA%E7%AB%99%E5%90%8E%E5%8F%AF%E5%8F%82%E8%80%83%E7%9A%84%E8%BF%90%E7%BB%B4%E5%8F%8A%E8%A3%85%E4%BF%AE%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C#latest\rhttps://pullopen.github.io/tags/#Mastodon\ræ‰«æå‡ºä¸å±äºä»»ä½•åª’ä½“é™„ä»¶çš„æ–‡ä»¶å¹¶ç§»é™¤ä»–ä»¬ æ¸…é™¤ç¼“å­˜å­˜å‚¨ ä»æ•°æ®åº“ä¸­åˆ é™¤æœªè¢«å¼•ç”¨çš„å˜Ÿæ–‡ï¼Œä¾‹å¦‚æ¥è‡ªä¸­ç»§çš„æˆ–æ¥è‡ªæœ¬åœ°ç”¨æˆ·ä¸å†å…³æ³¨çš„ç”¨æˆ·çš„å˜Ÿæ–‡ï¼ŒåŒæ—¶æ²¡æœ‰è¢«å›å¤çš„æˆ–ä»¥å…¶ä»–æ–¹å¼ä¸ä¹‹äº’åŠ¨çš„ å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹ docker å®¹å™¨çŠ¶æ€\nsudo docker container stats å…¶å®ƒå‚è€ƒ mjjç‰ˆçš„linuxå…¥é—¨æ•™ç¨‹\r[User] Linux æ–°å¢ä½¿ç”¨è€…ä¸¦è³¦äºˆå…¶ä½¿ç”¨ sudo çš„æ¬Šé™\rä¿æŠ¤å¥½ä½ çš„å°é¸¡ï¼ä¿å§†çº§æœåŠ¡å™¨å®‰å…¨æ•™ç¨‹ï¼\rã€å¥½ç©å„¿çš„Dockeré¡¹ç›®ã€‘10åˆ†é’Ÿæ­å»ºä¸€ä¸ªå»ä¸­å¿ƒåŒ–å¾®åšå¹³å°â€”â€”Misskey ï½œäºŒæ¬¡å…ƒé£æ ¼ã€è”é‚¦å®‡å®™\rä½¿ç”¨Dockeræœ€å°åŒ–éƒ¨ç½²Misskey\ræ­å»ºå±äºè‡ªå·±çš„å»ä¸­å¿ƒåŒ–ç¤¾äº¤å¹³å° Misskey\rå¦‚ä½•åœ¨ Ubuntu 20.04 ä¸­å®‰è£…å’Œé…ç½® Nginx\rNginx æ•™ç¨‹ï¼šå¦‚ä½•åœ¨ Ubuntu 20.04 ä¸‹å®‰è£…å¹¶é…ç½® Nginx\rå¦‚ä½•åœ¨Ubuntu 20.04 Nginxé…ç½®Let\u0026rsquo;s Encrypt SSLè¯ä¹¦\r","date":"2022-11-19T20:19:15+08:00","permalink":"https://falasool.github.io/2022/misskey/","title":"Misskey å®ä¾‹æ­å»ºæ•™ç¨‹"},{"content":" å®‰è£… PicGo brew install picgo --cask åˆ›å»º GitHub å›¾åºŠä»“åº“ åç§°æ— æ‰€è°“ï¼Œè®°å¾—å‹¾é€‰ README\nç”Ÿæˆä»¤ç‰Œï¼ˆTokenï¼‰ åœ¨ Account-Settings-Developer Settings-Personal Access Tokens ä¸‹ç”Ÿæˆï¼ˆå‹¾é€‰ repoï¼‰å¹¶ä¿å­˜ï¼Œæˆ‘çš„Tokenï¼šï¼ˆéšè—ï¼‰\né…ç½® PicGo è‡ªå®šä¹‰åŸŸåæ˜¯ï¼šhttps://cdn.jsdelivr.net/gh/\u0026lt;githubç”¨æˆ·å\u0026gt;/\u0026lt;å›¾åºŠä»“åº“å\u0026gt;@\u0026lt;ä»“åº“ç‰ˆæœ¬å·\u0026gt;/\næ’ä»¶ Updateï¼šä½¿ç”¨å›¾ç‰‡å‹ç¼©æ’ä»¶ compress\nå‚è€ƒ PicGoæ’ä»¶å¼€å‘æŒ‡å—1 å’Œ issue#22 å®‰è£…æ’ä»¶\ncd /Users/username/Library/Application\\ Support/picgo/ brew install libtool automake autoconf nasm npm cache clean --force # åˆ é™¤node_modulesæ–‡ä»¶å¤¹ npm install picgo-plugin-compress --save --ignore-scripts --registry=https://registry.npm.taobao.org npm install --registry=https://registry.npm.taobao.org é‡å¯ PicGoï¼Œåœ¨æ’ä»¶è®¾ç½®é‡Œç‚¹å‡»âš™ï¸ï¼Œé…ç½®plugin - picgo-plugin-compressï¼Œé€‰æ‹©å‹ç¼©æ–¹å¼\u0026ndash; imagemin\næœ€åç‚¹å‡»âš™ï¸ï¼Œå¯ç”¨transformer-compress\næµ‹è¯•å›¾åºŠ è¿™å¼ å›¾ç‰‡ä½¿ç”¨compressæ’ä»¶ä¸Šä¼ ï¼š\n*****\n[å¯é€‰] æ‰‹åŠ¨ç”¨ Squoosh\ræŠŠå›¾ç‰‡è½¬æ ¼å¼ï¼ˆwebpï¼‰å¹¶å‹ç¼©\nè®¾ç½®æˆåŠŸåç›´æ¥æŠŠå›¾ç‰‡æ”¾è¿› Typora å°±OK\né”µé”µï½è¯·çœ‹ï¼ï¼\nç›¸å…³å‚è€ƒ PicGo\ræˆ‘å†™åšå®¢éƒ½ç”¨äº†å“ªäº›å·¥å…·ï¼Ÿ\rhttps://picgo.github.io/PicGo-Core-Doc/zh/dev-guide/deploy.html#gui%E6%8F%92%E4%BB%B6\r\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhttps://picgo.github.io/PicGo-Core-Doc/zh/dev-guide/deploy.html#gui%E6%8F%92%E4%BB%B6\r\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","date":"2022-10-21T23:29:38+08:00","permalink":"https://falasool.github.io/2022/picture-bed/","title":"Hugo | ç»™åšå®¢é…ç½®å›¾åºŠ"},{"content":" åœ¨ zoho.com æ³¨å†Œè´¦å·ï¼Œé€‰æ‹© Free Planï¼ŒAdd an existing domainï¼Œæ¥ç€å»éªŒè¯åŸŸå\nåœ¨åŸŸåæ‰˜ç®¡å•†ï¼ˆæ¯”å¦‚ Cloudflareï¼‰æ·»åŠ ä¸€æ¡ TXT è®°å½•ç„¶åéªŒè¯\næ¥ç€å¡«å†™ä»»æ„åŸŸåå‰ç¼€ï¼Œæ¯”å¦‚ adminï¼Œå®Œæˆåˆ›å»ºã€‚è·³è¿‡è®¾ç½® Groupsï¼Œæ¥åˆ° DNS Mappingï¼ŒåŒæ ·å¡«å†™\næ³¨æ„ DKIM\néªŒè¯åå®Œæˆï¼Œåˆ° mail.zoho.com æµ‹è¯•æ”¶å‘é‚®ä»¶åŠŸèƒ½\n","date":"2022-10-21T23:29:38+08:00","permalink":"https://falasool.github.io/2022/zoho-mail-services/","title":"Pleroma | å¼€å¯é‚®ä»¶æœåŠ¡ï¼ˆZOHOï¼‰"},{"content":"åŸºäº macOS Montereyï¼ŒHugo æ¡†æ¶å’Œ GitHub Pages ç½‘é¡µå¯„å­˜æœåŠ¡ï¼Œåšå®¢ä¸»é¢˜ä¸º Stack\rï¼Œæ­å»ºè¿‡ç¨‹å°½é‡ç®€å•ï¼ŒåŒæ—¶å‡å°‘åç»­éšæ‚£\né¢„è­¦ï¼šéå¸¸å•°å—¦\nå‰æœŸå‡†å¤‡ å®‰è£… Hugo # å®‰è£… brew install hugo # æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ hugo version # è¿”å›â¬‡ï¸ hugo v0.104.1+extended darwin/arm64 BuildDate=unknown å®‰è£… Git åœ¨ Git\rä¸‹è½½ã€å®‰è£…ç¨‹åºï¼ŒæŒ‰é»˜è®¤é€‰é¡¹å®‰è£…å³å¯\nè®¾ç½®ä½ çš„ç”¨æˆ·åå’Œé‚®ä»¶åœ°å€\n# å¡«ä½ çš„ GitHub ID å’Œæ³¨å†Œé‚®ç®± git config --global user.name \u0026#34;\u0026lt;username\u0026gt;\u0026#34; git config --global user.email user@example.com GitHub https://raw.githubusercontent.com/Falasool/blog-pic-bed/main/blog/new-public-repo-1.png\rhttps://raw.githubusercontent.com/Falasool/blog-pic-bed/main/blog/image-20221115113949496.png\råˆ›å»ºå…¬å¼€ä»“åº“ å­˜æ”¾ç¼–è¯‘å¥½çš„é™æ€é¡µé¢\nåˆ›å»ºç§å¯†ä»“åº“ å­˜æ”¾æºç \nç»‘å®š Token å› ä¸ºæˆ‘ä»¬éœ€è¦ä»åšå®¢ä»“åº“æ¨é€åˆ°å¤–éƒ¨ GitHub Pages ä»“åº“ï¼Œéœ€è¦ç‰¹å®šæƒé™ï¼Œè¦åœ¨ GitHub è´¦æˆ·ä¸‹ Setting - Developer setting - Personal access tokens ä¸‹åˆ›å»ºä¸€ä¸ª Token Hugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ\råœ¨ Account- Settings- Developer Settings- Personal access tokens-Tokens(classic) é‡Œåˆ›å»º Tokenï¼Œå‹¾é€‰ repo å’Œ workflowï¼Œå¹¶å¤åˆ¶ä¿å­˜ åœ¨ç§æœ‰ä»“åº“ hugo-scources-settings-secrets-Actions åˆ›å»º Secretï¼Œåä¸º PERSONAL_TOKENï¼Œå€¼ä¸ºåˆšæ‰çš„ Tokenï¼Œè¿™æ ·å°±å®Œæˆäº† Token çš„è®¾ç½® æ­å»ºæ­¥éª¤ å…‹éš† private ä»“åº“åˆ°æœ¬åœ° æ–°å»º Hugo ç«™ç‚¹ åœ¨æœ¬åœ° hugo-sources æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œ â¬‡ï¸ï¼Œåœ¨å½“å‰ç›®å½•ç”Ÿæˆ Hugo æºç \nhugo new site . --force æ‰¾åˆ° blog æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€ä¼šå‘ç°ç»“æ„å¦‚ä¸‹\nblog â”œâ”€â”€ archetypes # é…ç½®æ–‡ä»¶ï¼Œå†³å®šåˆ›å»ºæ–°åšæ–‡æ—¶çš„è‡ªå¸¦æ ¼å¼ â”‚ â””â”€â”€ default.md â”œâ”€â”€ config.toml # ç½‘ç«™é…ç½®æ–‡ä»¶ â”œâ”€â”€ content # ç½‘ç«™å†…å®¹ï¼Œå…¨éƒ¨æ˜¯ markdown æ ¼å¼ â”œâ”€â”€ data â”œâ”€â”€ layouts # ç½‘ç«™æ¨¡æ¿ï¼Œä¼˜å…ˆäº themes/\u0026lt;THEME\u0026gt;/layouts â”œâ”€â”€ static # é™æ€èµ„æºï¼ˆcss/js/fonts/mediaç­‰ï¼‰ â””â”€â”€ themes Hugo ä¸»é¢˜ æœ‰äº†ä¸»é¢˜ï¼Œå†…å®¹æ‰ä¼šæ¸²æŸ“å‡ºæ¥\nåœ¨ github.com æœç´¢ hugo theme ï¼Œæˆ–åœ¨ Hugo Themes\ré€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜ã€‚æˆ‘é€‰æ‹© stack\rï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œæ”¯æŒå¤šç§è¯„è®ºç³»ç»Ÿï¼Œä½¿ç”¨äººæ•°å¤š bug å¥½è§£å†³\nfork ä¸»é¢˜ä»“åº“ï¼Œå¹¶ä½¿ç”¨ git submodule æ–¹å¼æ·»åŠ åˆ° themes é‡Œï¼Œè¿™æ ·æ–¹ä¾¿åç»­å¯¹ä¸»é¢˜çš„ä¿®æ”¹è¿›è¡Œå•ç‹¬ç»´æŠ¤ # åœ¨hugo-sourcesç›®å½•ä¸‹ git init git submodule add https://github.com/\u0026lt;Uname\u0026gt;/hugo-theme-stack themes/hugo-theme-stack æ›´æ–°ä¸»é¢˜ï¼š # åˆå§‹åŒ– git submodule update --init --recursive # åŒæ­¥ä¸»é¢˜ä»“åº“çš„æœ€æ–°ä¿®æ”¹ git submodule update --remote åˆ é™¤æ ¹ç›®å½•ä¸‹çš„ config.toml æ–‡ä»¶ï¼ŒæŠŠ ./themes/hugo-theme-stack/exampleSite/ é‡Œçš„ config.yaml å’Œ content è½¬ç§»åˆ°æ ¹ç›®å½•ä¸‹ï¼Œåœ¨ config.yaml ä¸­è¿›è¡Œç«™ç‚¹ç»†èŠ‚é…ç½® åˆ æ‰ examplesite/content/post/rich-content/index.mdï¼Œå› ä¸º Twitter ç­‰ç­‰è¢«å¢™åº”ç”¨çš„ API ä¸­å›½å¤§é™†æ— æ³•è®¿é—® Issus #191@CaiJimmy/hugo-theme-stack\ræœ¬åœ°é¢„è§ˆ hugo server -D # åœ¨æµè§ˆå™¨æ‰“å¼€localhost:1313 é¢„è§ˆæ»¡æ„äº† Control+C ç»ˆæ­¢é¢„è§ˆ æ¨é€åˆ° GitHub git add . git commit -m \u0026#34;first commit\u0026#34; git push -u origin main GitHub Actions é…ç½® åœ¨ GitHub çš„ Private ä»“åº“é¡µé¢ï¼Œåˆ‡æ¢åˆ° Actions tabï¼Œç‚¹å‡»set up a workflow yourselfï¼Œç²˜è´´ä»¥ä¸‹æ–‡ä»¶ï¼Œå¹¶ commit name: Deploy Hugo Site to Github Pages on Main Branch on: push: branches: - main workflow_dispatch: schedule: # Runs everyday at 8:00 AM - cron: \u0026#39;0 0 * * *\u0026#39; jobs: build-deploy: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v3 with: submodules: true fetch-depth: 0 - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;0.104.1\u0026#39; # æŸ¥çœ‹ä½ çš„ç‰ˆæœ¬æŠŠå®ƒæ›¿æ¢æ‰ï¼Œé˜²æ­¢å…¼å®¹é—®é¢˜ extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: PERSONAL_TOKEN: ${{ secrets.PERSONAL_TOKEN }} # è¿™é‡Œçš„ ACTIONS_DEPLOY_KEY åˆ™æ˜¯ä¸Šé¢è®¾ç½® Private Keyçš„å˜é‡å external_repository: uname/uname.github.io # Pages è¿œç¨‹ä»“åº“ publish_dir: \u0026#39;./public\u0026#39; keep_files: false # remove existing files publish_branch: main # deploying branch commit_message: ${{ github.event.head_commit.message }} cname: anodicseal.xyz # è¿™é‡Œè¦æ”¹æˆä½ çš„ä¸ªäººåŸŸåï¼Œæ²¡æœ‰å°±æŠŠè¿™è¡Œæ³¨é‡Šæ‰ åœ¨æœ¬åœ° hugo-sources ç›®å½•ä¸‹æ‰§è¡Œ git pull origin mainï¼ŒæŸ¥çœ‹æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œå‡ºç°äº† .github/workflows/main.yml æ–‡ä»¶ æ£€æŸ¥æµæ°´çº¿æ˜¯å¦è¢«æ­£å¸¸è§¦å‘ï¼ˆæŸ¥çœ‹æµæ°´çº¿æ—¥å¿—ï¼‰ åšå®¢æ­å»ºå®Œæˆ\nä¿®å¤åšå®¢æœç´¢åŠŸèƒ½ è¾“å…¥å…³é”®è¯åé¡µé¢ç©ºç™½ï¼Œåœ¨æ§åˆ¶å° Network çœ‹åˆ°æ˜¯ search.json çš„è·¨åŸŸé—®é¢˜ã€‚\nåŸå› æ˜¯åšå®¢ä½¿ç”¨ xx.github.io åŸŸåå ç”¨ CNAME æŒ‡å‘ä¸ªäººåŸŸåã€‚æ¨¡ç‰ˆçš„ {{ .Permalink }} æ‹¿åˆ°çš„æ˜¯é…ç½®æ–‡ä»¶é‡Œçš„ baseURLï¼Œæ‰€ä»¥å°±è·¨åŸŸäº†ã€‚æœ€ç²—æš´çš„åŠæ³•ï¼ŒæŠŠæ¨¡ç‰ˆå†™æ­»ï¼Œæœç´¢åŠŸèƒ½å°±å¥½äº†\nä½¿ç”¨æ­¥éª¤ # æ–°å»ºæ–‡ç«  hugo new post/\u0026lt;title\u0026gt;.md # æ‰“å¼€\u0026lt;title.md\u0026gt;ï¼Œç¼–è¾‘å¹¶ä¿å­˜ # æœ¬åœ°é¢„è§ˆ hugo server -D # æ²¡é—®é¢˜äº†å°±pushåˆ°è¿œç¨‹ä»“åº“ï¼ŒActionsä¼šè‡ªåŠ¨éƒ¨ç½² git add . git commit -m \u0026#34;test\u0026#34; git push origin main æ‹“å±• Github Actions å®ç°çš„ä¸‰ç§æ–¹æ¡ˆï¼š\ngithub_token deploy_key personal_token é€‚ç”¨æƒ…å†µå’Œå·®å¼‚è¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£\rç›¸å…³å‚è€ƒ Hugo æ­å»ºåšå®¢å®è·µ\rGit Submodule å‘½ä»¤ä¸ç†è§£\rGithub Pages + Hugo æ­å»ºä¸ªäººåšå®¢\rè‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ\nGitHub Actions å…¥é—¨æ•™ç¨‹\rWorkflow syntax for GitHub Actions\rCI/CD æ˜¯ä»€éº¼ï¼Ÿä¸€ç¯‡èªè­˜ CI/CD å·¥å…·åŠå„ªå‹¢ï¼Œå°‡æ—¥å¸¸ç‘£äº‹è‡ªå‹•åŒ–\rHugo + GitHub Actionï¼Œæ­å»ºä½ çš„åšå®¢è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿ\rHugo æ­é… Github Actions å¯¦ç¾ Github Pages çš„è‡ªå‹•éƒ¨ç½²\råˆ©ç”¨ GitHub Action å®ç° Hugo åšå®¢åœ¨ GitHub Pages è‡ªåŠ¨éƒ¨ç½²\rGitHubAction + Hugo è‡ªåŠ¨æ„å»ºå‘å¸ƒä¸ªäººåšå®¢\rä½¿ç”¨ Github Actions è‡ªåŠ¨å‘å¸ƒ hugo ç«™ç‚¹\r***\næŠ˜è…¾ Hugo | GitHub Pages | Github Actions è‡ªåŠ¨æ„å»ºå‘å¸ƒå…è´¹ä¸ªäººç½‘ç«™\rå°† Hugo é™æ€ç½‘ç«™éƒ¨ç½²åˆ° Github Pages\rç”¨ Hugo é…åˆ GitHub Actions å’Œ GitHub Pages æ­å»ºåšå®¢\r","date":"2022-10-21T21:28:27+08:00","permalink":"https://falasool.github.io/2022/build-hugo-site-on-macos/","title":"Hugoï½œGithub Pagesï½œStackä¸»é¢˜ï½œæ­å»ºè®°å½•"},{"content":" Updateï¼šç”¨è¿‡ Catausã€Disqusï¼ŒCataus å’ŒåŒåä¸»é¢˜é…åˆèµ·æ¥å¾ˆå¯çˆ±ï¼Œç”¨äº†ä¸€æ®µæ—¶é—´ Disqus åå¯¹å®ƒçš„ UI ä¸å¤ªæ»¡æ„ï¼Œå†åŠ ä¸Šå¼ºåˆ¶ç™»å½•æ¯”è¾ƒæ¼äººï¼Œå°±æ¢æˆè±¡å‹æ¨èçš„ Twikoo è¯•è¯•\nTwikoo è®¾ç½®æ•°æ®åº“ MongoDB æŒ‰ç…§ å®˜æ–¹æ–‡æ¡£\rï¼Œæˆ‘ç”¨çš„ Vercel éƒ¨ç½²\nåˆ›å»ºæ•°æ®åº“ï¼Œé€‰ Free æ–¹æ¡ˆï¼ŒåŒºåŸŸé€‰æ‹© AWS / N. Virginia (us-east-1)ï¼Œè®¾ç½®å¹¶ä¿å­˜å¥½ç”¨æˆ·åå’Œå¯†ç \nåœ¨ Where would you like to connect from? è¿™ä¸€æ­¥å¡« 0.0.0.0ï¼Œç„¶åç‚¹ Add Entryï¼Œæœ€åç¡®è®¤åˆ›å»ºæ•°æ®åº“\nè¿›å…¥æ•°æ®åº“ï¼Œconnect - Drivers - Node.jsï¼ŒæŠŠå®ä¾‹çš„ç”¨æˆ·åå’Œå¯†ç æ”¹æˆè‡ªå·±çš„ï¼Œä¾‹å¦‚ï¼š\nmongodb+srv://twikoo:fhahflanclal3o2u0@cluster0.tke1htc.mongodb.net/?retryWrites=true\u0026amp;w=majority Vercel éƒ¨ç½² æŒ‰ç…§æ–‡æ¡£çš„ä¸€é”®éƒ¨ç½²ï¼Œç­‰å¾…\u0026hellip;\nåœ¨æ§åˆ¶å° - settings - Environment Variablesï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ MONGODB_URIï¼Œå€¼ä¸ºä¹‹å‰çš„æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²\nè¿›å…¥ Deployments , ç„¶ååœ¨ä»»æ„ä¸€é¡¹åé¢ç‚¹å‡»æ›´å¤šï¼ˆä¸‰ä¸ªç‚¹ï¼‰ , ç„¶åç‚¹å‡»Redeploy , æœ€åç‚¹å‡»ä¸‹é¢çš„Redeploy\nè®¿é—® Vercel åˆ†é…çš„åŸŸåï¼Œå¦‚æœç¯å¢ƒé…ç½®æ­£ç¡®ï¼Œå¯ä»¥çœ‹åˆ° â€œTwikoo äº‘å‡½æ•°è¿è¡Œæ­£å¸¸â€ çš„æç¤º\né…ç½®åˆ°åšå®¢ comments: enabled: true provider: twikoo twikoo: envId: https://twikoo.vercel.app/ éƒ¨ç½²æˆåŠŸåç‚¹å³ä¸‹è§’â†˜ï¸çš„é½¿è½®âš™ï¸å›¾æ ‡ï¼Œè®¾ç½®ç®¡ç†å¯†ç \næ›´æ–° ç®¡ç†é¡µé¢æç¤ºï¼šClient version: 1.5.11ï¼Œ Server version: 1.6.16ï¼Œ è¯·å‚è€ƒ ç‰ˆæœ¬æ›´æ–°\rè¿›è¡Œå‡çº§\nåœ¨ twikoo.html é‡ŒæŠŠå¼•å…¥çš„jsæ–‡ä»¶ç‰ˆæœ¬ä¿®æ”¹åˆ°1.6.16\nDisqus é€‰æ‹© Disqus æ˜¯å› ä¸º Hugo å†…ç½®äº†å®ƒçš„æ¨¡æ¿ï¼ŒåŒæ—¶å®ƒå¯¹è¿ç§»çš„æ”¯æŒè¾ƒå¥½ï¼Œæœ¬èº«åŠŸèƒ½éå¸¸é½å…¨ï¼Œæ¯”è¾ƒé—æ†¾çš„æ˜¯ä» 2015 å¹´å¼€å§‹è¢«å¢™äº†\nå‚è€ƒ å®˜æ–¹æ–‡æ¡£\råŸºç¡€è®¾ç½® åœ¨ Disqus\ræ³¨å†Œå¹¶ç™»å½•è´¦å·ï¼Œæ·»åŠ ç«™ç‚¹ï¼ˆé€‰æ‹©I want to install Disqus on my siteï¼‰\nè¾“å…¥ä½ æƒ³è¦çš„ Website Nameï¼Œç”¨ä½œæ’å…¥ config æ–‡ä»¶çš„åå­—ï¼ŒåæœŸå¯ä»¥åœ¨ Disqus -\u0026gt; Setting -\u0026gt; General ä¸‹æŸ¥çœ‹å’Œä¿®æ”¹\nåœ¨ Configure Disqus for Your Site é¡µé¢è¾“å…¥ Website URLï¼Œè¦è¾“å…¥å®Œæ•´çš„åœ°å€ï¼Œæ¯”å¦‚å¦‚æœåƒæˆ‘ä¸€æ ·ä½¿ç”¨çš„æ˜¯ GitHub Pages ï¼Œå°±è¦åŠ ä¸Š https:// çš„åè®®åï¼›\né€‰æ‹© Categoryï¼Œç‚¹å‡» Create Site å®Œæˆæ³¨å†Œ\né€‰æ‹©æ–¹æ¡ˆï¼Œæˆ‘é€‰ free\nç¼–è¾‘åšå®¢çš„é…ç½®æ–‡ä»¶ config.yamlï¼Œæ·»åŠ  disqusShortname è®¾ç½®\n# åœ¨ç¬¬ 23 è¡Œå·¦å³ disqusShortname: YOURSITENAME å¯é€‰é¡¹ æ·»åŠ å¯ä¿¡åŸŸ Disqus çš„ç«™ç‚¹åç§°æ˜¯å…¬å¼€çš„ï¼Œå¦‚æœè¦é˜²æ­¢è¢«åˆ«äººæ»¥ç”¨ï¼Œå¯ä»¥è¿›è¡ŒåŸŸåç»‘å®šï¼Œåªå…è®¸ä¿¡ä»»çš„åŸŸåä½¿ç”¨ä½ çš„è¯„è®º\nåœ¨ Disqus -\u0026gt; Site -\u0026gt; Advanced æ·»åŠ  Trusted Domains\nç‰¹å®šåšæ–‡å¼€å¯/å…³é—­è¯„è®º https://lvv.me/posts/2019/12/10_hugo_disqus/\rç›¸å…³å‚è€ƒ æ„Ÿè°¢å‰äººçš„è€•è€˜å’Œåˆ†äº«ï¼Œå¸Œæœ›æœ¬æ–‡ä¹Ÿèƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¸®åŠ© â¤ï¸\nåœ¨é™æ€åšå®¢é‡Œæ·»åŠ Twikooè¯„è®ºç³»ç»Ÿï¼Œå¹¶é…ç½®é‚®ç®±å’ŒTGé€šçŸ¥\rç§‘å­¦ä½¿ç”¨ Disqus\rDisqusè¯„è®ºæ¡†æ”¹é€ å·¥ç¨‹-å®ç° Disqus ä»£ç†çš„ Serverless æœåŠ¡\rDisqusJS - ä¸€ä¸ªè¶…è½»é‡çº§çš„ DISQUSã€Œè¯„è®ºåŸºç¡€æ¨¡å¼ã€çš„å®ç°\rç»™ Hugo å¼€å¯ Disqus è¯„è®ºç³»ç»Ÿ\r","date":"2022-10-14T19:12:42+08:00","permalink":"https://falasool.github.io/2022/hugo-comment-system-disqusjs/","title":"Hugo | ç»™åšå®¢æ·»åŠ è¯„è®ºç³»ç»Ÿ"},{"content":"ä»€ä¹ˆæ˜¯ Front Matter æ˜¯æŒ‡ .md æ–‡ä»¶æœ€ä¸Šé¢çš„è¿™ä¸€éƒ¨åˆ†å†…å®¹\n--- title: xxxxxx date: 2022-10-10 09:39:50 type: tags layout: tags= --- æ¯æ¬¡æ‰§è¡Œ hugo new å‘½ä»¤æ–°å»ºæ–‡ç« æ—¶ï¼ŒHugo ä¼šä» ./archetypes ä¸­å¯»æ‰¾å¯¹åº”çš„ Front Matter æ¨¡æ¿å¹¶è‡ªåŠ¨æ·»åŠ åˆ°æ–°å»ºæ–‡ä»¶çš„æœ€ä¸Šæ–¹\nFront Matter é‡Œçš„å‚æ•°å®šä¹‰äº†æ‰€åœ¨åšæ–‡çš„å¤–è§‚ã€åŠŸèƒ½\nå¸¸ç”¨ Front Matter è®¾ç½® æ²¡æœ‰å…´è¶£å®¢åˆ¶åŒ–å¯ä»¥å¤åˆ¶ä»¥ä¸‹ä»£ç ï¼Œæ·»åŠ è¿› ./archetypes/default.md æ–‡ä»¶\n--- # ä½¿ç”¨æ—¶éœ€åˆ é™¤æ³¨é‡Šå’Œç©ºè¡Œ # åˆ›å»ºå’Œæ–‡ä»¶åç›¸åŒçš„æ–‡ç« æ ‡é¢˜ title: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; description: \u0026#34;\u0026#34; # ä¼˜åŒ– URL slug: \u0026#34;{{ replace .Name \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#34; author: [\u0026#34;Rubberduck\u0026#34;] type: post/draft/page date: {{ .Date }} draft: false # éšæœºåŒ¹é…ä¸€å¼ å›¾ç‰‡ image: https://picsum.photos/800/600.webp?random={{ substr (md5 (.Date)) 4 8 }} categories: [\u0026#34;Tutorials\u0026#34;] tags: [\u0026#34;Hugo\u0026#34;,\u0026#34;tech\u0026#34;] keywords: [\u0026#34;tutorials\u0026#34;, \u0026#34;Hugo\u0026#34;, \u0026#34;mac\u0026#34;,\u0026#34;tech\u0026#34;] metaAlignment: center coverMeta: in/out coverSize: partial coverCaption: \u0026#34;æ–‡ç« coverå›¾ç‰‡æè¿°\u0026#34; isCJKLanguage: true --- ä¸‹é¢å…·ä½“è¯´æ˜å„é¡¹å‚æ•°ï¼Œ\nFront Matter å†…å®¹ å‚æ•° æè¿° title æ ‡é¢˜ï¼Œé»˜è®¤ä¸æ–‡ä»¶åä¸€è‡´ date é»˜è®¤ä¸ºæ–‡ä»¶åˆ›å»ºæ—¥æœŸ type æ–‡ç« ç±»åˆ«ï¼Œå¯é€‰post/page/draftç­‰ç­‰ slug æŒ‡å®šæ–‡ç« ç½‘å€ update æ–‡ä»¶æ›´æ–°æ—¥æœŸ lastmod æ–‡ç« æœ€åæ›´æ–°æ—¥æœŸ description æ–‡ç« æè¿°ï¼Œä¼šè¢«æŠ“å»åšSEOæ”¾åœ¨HTMLçš„headerä¸­ categories åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ tags æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ hidden æ˜¯å¦éšè—æ–‡ç« ï¼Œå€¼ä¸º true æ—¶è¾“å…¥æ­£ç¡®ç½‘å€å°±å¯ä»¥æŸ¥çœ‹ draft æ˜¯å¦ä¸ºè‰ç¨¿ï¼Œå€¼ä¸º true æ—¶ Hugo ä¸ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ layout æŒ‡å®šæ–‡ç« ä½¿ç”¨çš„æ¨¡æ¿ï¼Œä¸æŒ‡å®šçš„è¯ä¼šä½¿ç”¨ æ ¹ç›®å½•/_config.toml ä¸­çš„é»˜è®¤é…ç½® default_layout:post comments å¼€å¯æ–‡ç« è¯„è®ºåŠŸèƒ½ï¼Œé»˜è®¤ä¸º true permalink è¦†ç›–æ–‡ç« ç½‘å€ coverImage è®¾ç½®æ–‡ç« å°é¢å›¾ç‰‡ metaAlignment è®¾ç½®æ–‡ç« titleçš„ä½ç½® coverMeta æ–‡ç« titleæ”¾åœ¨å°é¢å›¾ç‰‡ä¸­å¤®è¿˜æ˜¯å¤–é¢ coverSize å°é¢å›¾ç‰‡å¤§å° å¦‚æœéœ€è¦æ·»åŠ  Hugo åˆ›å»ºçš„ .md æ–‡ä»¶çš„ Front Matter æ¨¡æ¿æ²¡æœ‰çš„å‚æ•°ï¼Œå¯ä»¥ç¼–è¾‘ archetypes æ–‡ä»¶å¤¹ä¸‹çš„ default.md æ–‡ä»¶\næ›´å¤šè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ Hugoï½œFront Matter\rç›¸å…³å‚è€ƒ æ„Ÿè°¢å‰äººçš„è€•è€˜å’Œåˆ†äº«ï¼Œå¸Œæœ›æœ¬æ–‡ä¹Ÿèƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¸®åŠ© â¤ï¸\nè²¼èº«æ‰“é€ å€‹äººéƒ¨è½æ ¼ - 02. æ–‡ç«  Front Matter\rHugoä¹‹è·¯ 2 | hugo-theme-stack é…ç½®\râ€”â€” å‚è€ƒäº†åŒ¹é…éšæœºå›¾ç‰‡çš„ä»£ç \n","date":"2022-10-12T20:08:18+08:00","permalink":"https://falasool.github.io/2022/hugo-front-matter/","title":"Hugo | Front Matter"},{"content":"å‰æœŸå‡†å¤‡ å®‰è£… Hugo æ‰“å¼€ Github ä¸­çš„ Hugo\råº“ï¼Œä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬ï¼Œæœ¬æ¬¡ä¸‹è½½ï¼šhugo_extended_0.99.1_Windows-64bit.zip å› ä¸ºä¸€äº›ä¸»é¢˜éœ€è¦è¿›è¡Œ SCSS/SASS æ„å»ºï¼Œæ‰€ä»¥æ¨èä¸‹è½½ extended ç‰ˆæœ¬ï¼Œæ™®é€šç‰ˆæœ¬å¯èƒ½ä¼šæŠ¥é”™ï¼šyou need the extended version to build SCSS/SASS é…ç½®ç¯å¢ƒå˜é‡ åœ¨ æ§åˆ¶é¢æ¿ -\u0026gt; ç³»ç»Ÿ -\u0026gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -\u0026gt; é«˜çº§ ä¸­æ‰¾åˆ°ç¯å¢ƒå˜é‡ åœ¨ç”¨æˆ·å˜é‡ä¸­æ‰¾åˆ° Path å˜é‡ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©æ–°å»ºï¼Œè¾“å…¥ Hugo.exe æ–‡ä»¶çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆä¸è¦åŒ…æ‹¬ Hugo.exe æœ¬èº«ï¼‰ æµ‹è¯•é…ç½®æ˜¯å¦æˆåŠŸï¼šåœ¨ E:\\ ç©ºç™½å¤„å³é”®ï¼Œç‚¹å‡» Git Bash Here ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ hugo version ï¼Œè‹¥è¿”å› Hugo ç‰ˆæœ¬å·ä¿¡æ¯ï¼Œè¯´æ˜é…ç½®æˆåŠŸ å®‰è£… Git åœ¨ Git\rä¸‹è½½ã€å®‰è£…ç¨‹åºï¼ŒæŒ‰é»˜è®¤é€‰é¡¹å®‰è£…å³å¯\nè®¾ç½® åœ¨å¼€å§‹èœå•æ‰¾åˆ° Git Bash ï¼Œæ‰“å¼€è¾“å…¥ï¼š\ngit config --global user.name \u0026#34;Your Name\u0026#34; git config --global user.email \u0026#34;email@example.com\u0026#34; é…ç½® SSH SSH å¯†é’¥ç”¨æ¥é“¾æ¥æœ¬åœ°å’Œ Git æœåŠ¡å™¨ï¼Œå®ƒæˆå¯¹ç”Ÿæˆï¼Œåˆ†åˆ«æ˜¯â€ å…¬é’¥ â€œå’Œâ€ ç§é’¥ â€œï¼Œæˆ‘ä»¬å°†å…¶ä¸­çš„â€ å…¬é’¥ â€œä¿å­˜åˆ° Git ä»“åº“åï¼Œå°±å¯ä»¥åœ¨ç”µè„‘ä¸Šå‘è¿™ä¸ª Git ä»“åº“æäº¤ä»£ç ã€‚\nç”Ÿæˆ SSH åœ¨ Git Bash Here é‡Œè¾“å…¥ï¼š\nssh-keygen -t rsa -C\u0026#34;æ³¨å†Œ github è´¦å·æ—¶ä½¿ç”¨çš„é‚®ç®±\u0026#34; æŒ‰ç…§ç³»ç»Ÿæç¤ºæŒ‡å®šå¯†é’¥ä½ç½®ã€æ˜¯å¦éœ€è¦å¯†ç ï¼Œæ‡’å¾—è®¾ç½®å¯ä»¥ç›´æ¥å›è½¦ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ç»“æœè¯´æ˜ SSH ç”ŸæˆæˆåŠŸï¼š\nYour identification has veen saved in id_rsa Your public key has been saved in id_rsa.pub è¿æ¥ SSH åœ¨ C:/Users/ç”¨æˆ·å/.ssh/ è·¯å¾„æ‰¾åˆ°å…¬é’¥ id_rsa.pub ï¼Œå³é”®ç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹åˆ° Github è´¦å· -\u0026gt; Settings -\u0026gt; SSH and GPG keys ï¼Œæ–°å»ºä¸€ä¸ª SSH å¯†é’¥ï¼ŒæŠŠå…¬é’¥ç²˜è´´ä¿å­˜ æµ‹è¯• SSH è¿æ¥æ˜¯å¦å®Œæˆï¼Œåœ¨ Git Bash Here è¾“å…¥ï¼š\nssh -T git@github.com å¦‚æœè¿”å›ï¼š\nHi username!YOu\u0026#39;ve successfully authenticated,but GitHub does not provide shell access. è¯´æ˜ SSH è¿æ¥æˆåŠŸ\nåˆ›å»º Github ä»“åº“ æ³¨æ„ä»“åº“åè¦å’Œ GitHub ç”¨æˆ·åä¸€è‡´ï¼Œæ¯”å¦‚ä½ æ˜¯ xiaohongï¼Œé‚£ä¹ˆä½ è¦è¾“å…¥ xiaohong.github.io ï¼Œæœ€ç»ˆä»“åº“çš„å®Œæ•´åæ˜¯ xiaohong/xiaohong.github.io\nå®‰è£… VSCode Visual Studio Code (ç®€ç§° VS Code / VSC) æ˜¯ä¸€æ¬¾å…è´¹å¼€æºçš„ç°ä»£åŒ–è½»é‡çº§ä»£ç ç¼–è¾‘å™¨\nåœ¨ å®˜æ–¹ä¸‹è½½åœ°å€\ré€‰æ‹©ç›¸åº”çš„ç‰ˆæœ¬ä¸‹è½½ï¼ŒæŒ‰ç…§é»˜è®¤é€‰é¡¹å®‰è£…ï¼Œå®‰è£…æ±‰åŒ–æ’ä»¶ Chinese (Simplified) Language Pack for Visual Studio Code\nå®‰è£… Typoraï¼ˆå¯é€‰ï¼‰ Typora\ræ˜¯ä¸€æ¬¾è½»å‹ MarkDown ç¼–è¾‘å™¨ï¼Œå…¶å® VSCode å®‰è£… md æ’ä»¶åä¹Ÿèƒ½èƒœä»»å®ƒçš„å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä»¬å°±è®©ä¸“ä¸šçš„ Typora åšä¸“ä¸šçš„äº‹å§\nåœ¨å®˜ç½‘ releases é¡µé¢è´­ä¹°ï¼Œæˆ–ç‚¹å‡» Dev/Beta Released -\u0026gt; ä¸‹æ‹‰åˆ°åº•ç«¯ old macOS beta/old Windows/Linux beta ä¸‹è½½ beta ç‰ˆ\nâš ï¸ å»ºè®®åœ¨åå¥½è®¾ç½®é‡Œï¼Œè®¾ç½®æ’å…¥å›¾ç‰‡æ—¶å¤åˆ¶åˆ°æŒ‡å®šè·¯å¾„ï¼ˆ./xx/ï¼‰ï¼Œè¿™æ ·å¤åˆ¶çš„å›¾ç‰‡å°±ä¼šè‡ªåŠ¨ä¿å­˜åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„xxæ–‡ä»¶å¤¹é‡Œï¼Œæ–¹ä¾¿åç»­ç®¡ç†ä¸è½¬ç§»ã€‚\nå¼€å§‹å»ºç«™ æ–°å»º Hugo ç½‘ç«™ æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ Hugo ç½‘ç«™çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šH:/HugoWebsite åœ¨ HugoWebsite æ–‡ä»¶å¤¹å†…ç©ºç™½å¤„ç‚¹å‡»å³é”®ï¼Œé€‰æ‹© Git Bush Here ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ–°å»ºä¸€ä¸ª Hugo ç½‘ç«™ hugo new site blog # blogæ˜¯ç½‘ç«™æ–‡ä»¶å¤¹å é€‰æ‹© Hugo ä¸»é¢˜ åœ¨ github.com æœç´¢ hugo theme ï¼Œæˆ–åœ¨ Hugo Themes\ré€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜ã€‚æ­¤å¤„ä»¥ cactus\rä¸¾ä¾‹\nâš ï¸ æ¨èå°†ä¸»é¢˜ä»“åº“ fork åˆ°è‡ªå·±çš„è´¦å·ï¼Œä½¿ç”¨ git submodule æ–¹å¼è¿›è¡Œä»“åº“è¿æ¥ï¼Œè¿™æ ·æ–¹ä¾¿åç»­å¯¹ä¸»é¢˜çš„ä¿®æ”¹è¿›è¡Œå•ç‹¬ç»´æŠ¤ï¼ˆå¦åˆ™\ncd blog git init git submodule add https://github.com/monkeyWzr/hugo-theme-cactus themes/hugo-theme-cactus âš ï¸ git clone å‘½ä»¤ä¹Ÿå¯ä»¥ï¼Œå°±æ˜¯ä¿®æ”¹å¯èƒ½ä¼šå’ŒåŸä¸»é¢˜å†²çªï¼Œä¸æ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†å’Œåç»­æ›´æ–°ï¼Œåœ¨æ–‡ä»¶å¤¹ blog ç©ºç™½å¤„å³é”®ç‚¹å‡» Git Bush Here\n# è¿›å…¥ themes ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ç”¨ mkdir -p themes è‡ªè¡Œåˆ›å»º cd themes # ä¸‹è½½ä¸»é¢˜åˆ° cactus æ–‡ä»¶å¤¹ä¸‹ git clone git@github.com:monkeyWzr/hugo-theme-cactus.git é…ç½®ä¸»é¢˜ å¤‡ä»½ blog æ–‡ä»¶å¤¹é‡Œçš„ config.toml æ–‡ä»¶ï¼Œç”¨ blog/themes/hugo-theme-cactus/exampleSite/ ä¸‹çš„ config.toml è¦†ç›– blog æ–‡ä»¶å¤¹ä¸‹çš„ config.toml ï¼Œç„¶åæ‰“å¼€ config.toml ä¿®æ”¹é…ç½®\nå¿…è¦çš„ä¿®æ”¹ # ä¿®æ”¹ URL ä¸ºä½ çš„ GitHub ä»“åº“åç§° baseURL = \u0026#34;https://username.github.io\u0026#34; # è¿™é‡Œå¿…é¡»å’Œ themes æ–‡ä»¶å¤¹é‡Œçš„ä¸»é¢˜æ–‡ä»¶å¤¹åç§°ä¸€è‡´ï¼Œæ‰€ä»¥æŠŠä¸»é¢˜æ–‡ä»¶åä» hugo-theme-cactus ä¿®æ”¹ä¸º cactus theme = \u0026#34;cactus\u0026#34; æœ¬åœ°é¢„è§ˆ æ–°å»ºæ–‡ç«  åœ¨ç½‘ç«™æ–‡ä»¶æ ¹ç›®å½•ï¼šE:\\HugoWebsite\\blog ä¸‹æ‰§è¡Œï¼š\nhugo new post/first_article.md åˆ° blog/content/post é‡Œæ‰“å¼€å¹¶ç¼–è¾‘æ–‡ç« å†…å®¹ï¼Œä¿å­˜\nå¯åŠ¨ Hugo server hugo server -D æ‰“å¼€ç½‘å€ http://localhost:1313/ è¿›è¡Œé¢„è§ˆï¼Œåœ¨ config.toml é‡Œè°ƒæ•´é¡µé¢æ•ˆæœ\néƒ¨ç½²åˆ° GitHub è¿›å…¥ E:\\HugoWebsite\\blog\\public ç›®å½•ï¼Œåˆå§‹åŒ– Git åº“\n# è¿›å…¥ public æ–‡ä»¶å¤¹ cd public # åˆå§‹åŒ– git init # å°† git æœ¬åœ°åº“å…³è”è‡³è¿œç¨‹åº“ git remote add origin git@github.com:username/username.github.io.git # æäº¤ä¿®æ”¹ git commit -m \u0026#34;firstarticle\u0026#34; # æŸ¥çœ‹å½“å‰ä¿®æ”¹çŠ¶æ€ git status # æ·»åŠ æ‰€æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ git add . # æäº¤åˆ°æœ¬åœ°åº“ï¼Œ\u0026#34;add first-post\u0026#34;æ˜¯æœ¬æ¬¡æäº¤å†…å®¹çš„è¯´æ˜ä¿¡æ¯ git commit -m\u0026#34;add first-post\u0026#34; # æäº¤åˆ°è¿œç¨‹åº“ git push origin main âœ¨ æ›¾ç» github çš„é»˜è®¤åˆ†æ”¯æ˜¯ masterï¼Œæ—¶é—´æ¯”è¾ƒä¹…çš„æ•™ç¨‹ã€Œæäº¤åˆ°è¿œç¨‹åº“ã€è¿™ä¸€æ­¥éƒ½æ˜¯git push origin master ï¼Œè¿™é‡Œè¦æ³¨æ„\næ—¥å¸¸ä½¿ç”¨åšå®¢è¦çŸ¥é“çš„ Front Matter ä»€ä¹ˆæ˜¯ Front Matter æ˜¯æŒ‡ .md æ–‡ä»¶æœ€ä¸Šé¢çš„è¿™ä¸€éƒ¨åˆ†å†…å®¹\ntitle: tags\ndate: 2019-08-13 09:39:50\ntype: tags\nlayout: tag\nFront Matter å†…å®¹ å‚æ•° æè¿° title æ ‡é¢˜ï¼Œé»˜è®¤ä¸æ–‡ä»¶åä¸€è‡´ date é»˜è®¤ä¸ºæ–‡ä»¶åˆ›å»ºæ—¥æœŸ slug æŒ‡å®šæ–‡ç« ç½‘å€ update æ–‡ä»¶æ›´æ–°æ—¥æœŸ lastmod æ–‡ç« æœ€åæ›´æ–°æ—¥æœŸ description æ–‡ç« æè¿°ï¼Œä¼šè¢«æŠ“å»åšSEOæ”¾åœ¨HTMLçš„headerä¸­ categories åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ tags æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ hidden æ˜¯å¦éšè—æ–‡ç« ï¼Œå€¼ä¸º true æ—¶è¾“å…¥æ­£ç¡®ç½‘å€å°±å¯ä»¥æŸ¥çœ‹ draft æ˜¯å¦ä¸ºè‰ç¨¿ï¼Œå€¼ä¸º true æ—¶ Hugo ä¸ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ layout æŒ‡å®šæ–‡ç« ä½¿ç”¨çš„æ¨¡æ¿ï¼Œä¸æŒ‡å®šçš„è¯ä¼šä½¿ç”¨ æ ¹ç›®å½•/_config.toml ä¸­çš„é»˜è®¤é…ç½® default_layout:post comments å¼€å¯æ–‡ç« è¯„è®ºåŠŸèƒ½ï¼Œé»˜è®¤ä¸º true permalink è¦†ç›–æ–‡ç« ç½‘å€ coverImage è®¾ç½®æ–‡ç« å°é¢å›¾ç‰‡ metaAlignment è®¾ç½®æ–‡ç« titleçš„ä½ç½® coverMeta æ–‡ç« titleæ”¾åœ¨å°é¢å›¾ç‰‡ä¸­å¤®è¿˜æ˜¯å¤–é¢ coverSize å°é¢å›¾ç‰‡å¤§å° å¦‚æœéœ€è¦æ·»åŠ  Hugo åˆ›å»ºçš„ .md æ–‡ä»¶è‡ªå¸¦çš„ Front Matter æ¨¡æ¿æ²¡æœ‰çš„å‚æ•°ï¼Œå¯ä»¥ç¼–è¾‘ archetypes æ–‡ä»¶å¤¹ä¸‹çš„ default.md æ–‡ä»¶\næ›´å¤šè¯·å‚è€ƒHugoï½œFront Matter\rå¦‚ä½•æ–°å»ºæˆ–ä¿®æ”¹åšæ–‡ # åœ¨æ ¹ç›®å½•ï¼šE:/HugoWebsite/blog ä¸‹æ–°å»ºæ–‡ç« æˆ–ç¼–è¾‘æ–‡ç«  hugo new post/title.md # æœ¬åœ°é¢„è§ˆï¼Œhttp://localhost:1313/ hugo server -D # æ„å»º Hugo ç½‘ç«™ hugo # åˆ‡æ¢åˆ°ç›®å½•ï¼šE:/HugoWebsite/blog/public cd public # æäº¤ä¿®æ”¹åˆ°æœ¬åœ°åº“ git add . git commit -m\u0026#34;commit info\u0026#34; # æŠŠå†…å®¹æ‹‰ä¸‹æ¥ä»¥rebaseæ–¹å¼åˆå¹¶ git pull --rebase # å°†ä¿®æ”¹æ¨åˆ°è¿œç¨‹åº“ git push -u origin main å¦‚ä½•åˆ é™¤æ–‡ç«  # åœ¨ç›®å½• E:/HugoWebsite/blog/content/post å’Œ E:/HugoWebsite/blog/public æ‰¾åˆ°å¯¹åº”æ–‡ç« åˆ é™¤ # å…¶ä¸­publicä¸‹æ–‡ä»¶ä¸åˆ é™¤ä¸ä¼šå½±å“æ˜¾ç¤ºï¼Œåªæ˜¯æ–‡ä»¶å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œé™¤.gitåˆ é”™äº†ä¹Ÿä¸è¦ç´§ï¼Œhugoå‘½ä»¤ä¼šé‡å»º # æœ¬åœ°é¢„è§ˆï¼Œhttp://localhost:1313/ hugo server -D # æ„å»º Hugo ç½‘ç«™ hugo # åˆ‡æ¢åˆ°ç›®å½•ï¼šE:/HugoWebsite/blog/public # æäº¤ä¿®æ”¹åˆ°æœ¬åœ°åº“ git add . git commit -m\u0026#34;commit info\u0026#34; # æŠŠå†…å®¹æ‹‰ä¸‹æ¥ä»¥rebaseæ–¹å¼åˆå¹¶ git pull --rebase # å°†ä¿®æ”¹æ¨åˆ°è¿œç¨‹åº“ git push -u origin main è£…ä¿®æ²¡æœ‰æ­¢å¢ƒ è¯„è®ºç³»ç»Ÿç”¨ cactusï¼ŒåŸè£…ï¼å¯çˆ±ï¼\nï¼ˆ202210:æ¢äº†ä¸»é¢˜æ‰€ä»¥ä¸å†è¡¥å……äº†ï¼‰\næŠ¥é”™å’Œè§£å†³æ–¹æ³• ç›¸å…³å‚è€ƒ æ„Ÿè°¢å‰äººçš„è€•è€˜å’Œåˆ†äº«ï¼Œå¸Œæœ›æœ¬æ–‡ä¹Ÿèƒ½ç»™ä½ å¸¦æ¥ä¸€äº›å¸®åŠ© â¤ï¸\nGithub Pages + Hugo æ­å»ºä¸ªäººåšå®¢\rHugo | ä¸€èµ·åŠ¨æ‰‹æ­å»ºä¸ªäººåšå®¢å§\rè®°å½•ä¸€ä¸‹å¦‚ä½•ç”¨ Hugo å’Œ Github Page å»ºç«‹ç®€å•çš„åšå®¢ Blog\rHugo ä»å…¥é—¨åˆ°ä¼šç”¨\rå°ç™½å¦‚ä½•ä½æˆæœ¬å»ºç«‹ä¸ªäººç½‘ç«™æˆ–ä½œå“é›†ï¼ˆè¯¦ç»†æ•™ç¨‹ï¼‰\rä½¿ç”¨ Hugo å’Œ GitHub æ­å»ºåšå®¢\r***\nfront-matter ä½¿ç”¨è¯¦è§£\rhugo å»ºç«™å…¨æŒ‡å— | æˆ‘çš„ç¬¬ä¸€ä¸ªåšå®¢ç½‘ç«™\råœ¨é™æ€ç½‘ç«™ä¸ŠåŒ…å«è¯„è®ºçš„å„ç§æ–¹æ³•\r***\nç‚ºä½ è‡ªå·±å­¸Gitï½œæ€éº¼æœ‰æ™‚å€™æ¨ä¸ä¸Šå»\rGit æŠŠæœ¬åœ°ä»“åº“ä¸ GitHub è¿œç¨‹ä»“åº“å…³è”è¿›è¡ŒåŒæ­¥\rå°† Git é»˜è®¤åˆ†æ”¯ä» master ä¿®æ”¹ä¸º main\r","date":"2022-10-12T16:06:44+08:00","permalink":"https://falasool.github.io/2022/build-blog-site-use-hugo-win/","title":"Hugo | åˆæ¬¡æ­å»ºè®°å½•"}]
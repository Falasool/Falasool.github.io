<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Vue | Note | Monster Slayer Game - Falasool</title><link rel=icon type=image/png href=static/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Live Deploy Github 仓库 写静态页面 实现功能 点击 ATTACK 怪兽血量下降随机数值 ⭐️ 最关键的：随机数值。 所以 Math.floor(Math.random() * (15 - 10) + 10)，即『生成 [10,15) 范围内的随机浮点数并向下取整"><meta property="og:image" content><meta property="og:title" content="Vue | Note | Monster Slayer Game"><meta property="og:description" content="Live Deploy Github 仓库 写静态页面 实现功能 点击 ATTACK 怪兽血量下降随机数值 ⭐️ 最关键的：随机数值。 所以 Math.floor(Math.random() * (15 - 10) + 10)，即『生成 [10,15) 范围内的随机浮点数并向下取整"><meta property="og:type" content="article"><meta property="og:url" content="https://falasool.github.io/posts/vuejs-monster-slayer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-08-31T15:25:38+08:00"><meta property="article:modified_time" content="2023-08-31T15:25:38+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Vue | Note | Monster Slayer Game"><meta name=twitter:description content="Live Deploy Github 仓库 写静态页面 实现功能 点击 ATTACK 怪兽血量下降随机数值 ⭐️ 最关键的：随机数值。 所以 Math.floor(Math.random() * (15 - 10) + 10)，即『生成 [10,15) 范围内的随机浮点数并向下取整"><script src=https://falasool.github.io/js/feather.min.js></script>
<link href=https://falasool.github.io/css/fonts.4bacf4386d3f58fdc378d205a903311c80158bf414d25698589b658e0273156d.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://falasool.github.io/css/main.409b4163748cd4906669e4c6d5a0483433fd78fba4753a71f4d1748dbc962736.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://falasool.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)"></head><body><div class=content><header><div class=main><a href=https://falasool.github.io/>Falasool</a></div><nav><a href=/friends/></a>
<a href=/about>About</a>
<a href=/friends>Friends</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>Vue | Note | Monster Slayer Game</h1><div class=meta>Posted on Aug 31, 2023</div></div><section class=body><ul><li><a href=https://monster-slayer.ponder.lol/>Live Deploy</a></li><li><a href=https://github.com/Falasool/vuejs-monster-slayer>Github 仓库</a></li></ul><h2 id=写静态页面>写静态页面</h2><p><img src=https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202308290007098.webp alt=image></p><h2 id=实现功能>实现功能</h2><h3 id=点击-attack-怪兽血量下降随机数值>点击 ATTACK 怪兽血量下降随机数值</h3><p>⭐️ 最关键的：随机数值。
所以 <code>Math.floor(Math.random() * (15 - 10) + 10)</code>，即『生成 [10,15) 范围内的随机浮点数并向下取整』。因为有好几种类型的攻击都要用到这个方法，所以把它提出来:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getRandomValue</span>(<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>m</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> Math.<span style=color:#a6e22e>floor</span>(Math.<span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> (<span style=color:#a6e22e>m</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>n</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>n</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>⭐️ 设定初始健康值 monsterHealth 为 100</p><p>⭐️ 绑定点击事件 <code>@click=“attackMonster”</code>，每次点击摇出一个随机伤害值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>attackMonster</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>attackValue</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getRandomValue</span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>monsterHealth</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>attackValue</span>
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><p>⭐️ 给 health process 动态绑定属性 <code>:style="monsterBarStyle"</code>，写计算属性 monsterBarStyle</p><p>⭐️ 注意：1️⃣this2️⃣ 模板字符串,可以内嵌变量和表达式 3️⃣${damage} 是模板字符串中嵌入的一个变量 4️⃣scaleX() 是 CSS transform 的一个方法,用于缩放元素的宽度</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>monsterBarStyle</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>damage</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>monsterHealth</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>transform</span><span style=color:#f92672>:</span> <span style=color:#e6db74>`scaleX(</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>damage</span><span style=color:#e6db74>}</span><span style=color:#e6db74>)`</span> }
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><h3 id=攻击怪兽后被反击>攻击怪兽后被反击</h3><p>⭐️ 『攻击降血条』的逻辑一样。在 attackMonster() 里调用 attackKnight()</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>attackMonster</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ……………… //
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// 怪兽反击
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>attackKnight</span>()
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><h3 id=特殊攻击>特殊攻击</h3><p>⭐️ 每三次普通攻击/治疗攒够一个蓝条，这时 special attack 才能用。其它时间按扭灰色不起作用 ==> 用 css 伪类 <code>:disabled</code> 实现</p><p>⭐️ 每次调用普攻和治疗时 currentRound + 1（default = 0），当 currentRound 积累到 3 时 <code>:disabled</code> 失效</p><p>⭐️ 设置一个 computed，用于控制 <code>:disabled</code>，攒够蓝条但不用大招也没关系, btn 会保持 active</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>mayUseSpecialAttack</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentRound</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><p>⭐️ 通过 v-bind 动态绑定给 btn: <code>：style="mayUseSpecialAttack"</code></p><p>⭐️ 使用大招后蓝条清空重新开始计数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span> <span style=color:#a6e22e>specialAttackMonster</span>(<span style=color:#a6e22e>event</span>) {
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 使用大招后蓝条清空，重新积累
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>disabled</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>currentRound</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>},
</span></span></code></pre></div><h3 id=点击-heal-治疗自己随机数值怪兽发起攻击>点击 HEAL 治疗自己随机数值，怪兽发起攻击</h3><p>⭐️ 和普通攻击的逻辑一致，只不过变成 +=</p><p>⭐️ knightHealth 不能超过上限 100</p><h3 id=投降>投降</h3><p>给 knightHealth 赋值为 0</p><h3 id=玩家输入昵称>玩家输入昵称</h3><p>⭐️ 输入昵称前隐藏 input 以下的结构 v-if</p><p>⭐️ 用 v-model 双向绑定 input 和 value</p><h3 id=监视比赛结果>监视比赛结果</h3><p>⭐️ watch 属性用于监视 data()里的数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-Vue data-lang=Vue><span style=display:flex><span><span style=color:#a6e22e>knightHealth</span>(<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>monsterHealth</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;draw&#39;</span>
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>value</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>winner</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;monster&#39;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=显示比赛结果>显示比赛结果</h3><ul><li>v-if</li><li>v-else-if</li><li>v-else</li></ul><p>联合使用显示对应的比赛结果</p><h3 id=battle-log>battle log</h3><p>⭐️ 设置 <code>data(){logs:[]}</code></p><p>⭐️ 设置 methods addLogs(){}</p><p>⭐️ 每次攻击 / 治愈时调用 addLogs(),这样战斗数据就传入 logs array 了</p><p>⭐️ 用 v-for 遍历把 log 排列出来，用 currentTime() 作为索引</p><p>⭐️ 时间戳转换为可读的时间格式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>currentTime</span>(<span style=color:#a6e22e>date</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>date</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Date(<span style=color:#a6e22e>date</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1000</span>) <span style=color:#75715e>//如果date为13位不需要乘1000
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>Y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getFullYear</span>() <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMonth</span>() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMonth</span>() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMonth</span>() <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>D</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getDate</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getDate</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getDate</span>()) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39; &#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>h</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getHours</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getHours</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getHours</span>()) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;:&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMinutes</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMinutes</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getMinutes</span>()) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;:&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getSeconds</span>() <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getSeconds</span>() <span style=color:#f92672>:</span> <span style=color:#a6e22e>date</span>.<span style=color:#a6e22e>getSeconds</span>()
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>Y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>M</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>D</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>h</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>m</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>s</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=restart-按扭>restart 按扭</h3><p>把 data(){} 里的各项数据重置</p><h3 id=适应小屏幕>适应小屏幕</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-css data-lang=css><span style=display:flex><span>@<span style=color:#66d9ef>media</span> <span style=color:#f92672>(</span><span style=color:#f92672>max-width</span><span style=color:#f92672>:</span> <span style=color:#f92672>393px</span><span style=color:#f92672>)</span> {
</span></span><span style=display:flex><span>  <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/vue>Vue</a></li><li><a href=/tags/project>Project</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/falasool/ rel=me title=GitHub><i data-feather=github></i></a><a class=soc href=https://gitlab.com/athul/ rel=me title=GitLab><i data-feather=gitlab></i></a></div><div class=footer-info>2025 © Falaool<br>Built with <a href=https://gohugo.io>Hugo</a> & Theme <a href=https://github.com/athul/archie>Archie</a> design by Athul</div></footer><script>feather.replace()</script></div></body></html>
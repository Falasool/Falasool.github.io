<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>SQL 入门 - Falasool</title><link rel=icon type=image/png href=static/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="常用命令 CREATE DATABASE test; # 创建数据库 CREATE TABLE t1(id int,body varchar(100)); # 创建表(记得使用\c命令切换数据库) CREATE USER test WITH PASSWORD 'Test#1357'; # 创建用户 ALTER USER test WITH PASSWORD 'Test#2468'; # 修改密码 ALTER USER test createdb; # 指定用户添加"><meta property="og:image" content><meta property="og:title" content="SQL 入门"><meta property="og:description" content="常用命令 CREATE DATABASE test; # 创建数据库 CREATE TABLE t1(id int,body varchar(100)); # 创建表(记得使用\c命令切换数据库) CREATE USER test WITH PASSWORD 'Test#1357'; # 创建用户 ALTER USER test WITH PASSWORD 'Test#2468'; # 修改密码 ALTER USER test createdb; # 指定用户添加"><meta property="og:type" content="article"><meta property="og:url" content="https://falasool.github.io/posts/sql/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-29T19:13:22+08:00"><meta property="article:modified_time" content="2023-06-29T19:13:22+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SQL 入门"><meta name=twitter:description content="常用命令 CREATE DATABASE test; # 创建数据库 CREATE TABLE t1(id int,body varchar(100)); # 创建表(记得使用\c命令切换数据库) CREATE USER test WITH PASSWORD 'Test#1357'; # 创建用户 ALTER USER test WITH PASSWORD 'Test#2468'; # 修改密码 ALTER USER test createdb; # 指定用户添加"><script src=https://falasool.github.io/js/feather.min.js></script>
<link href=https://falasool.github.io/css/fonts.4bacf4386d3f58fdc378d205a903311c80158bf414d25698589b658e0273156d.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://falasool.github.io/css/main.42ea0af34aee3ba499cf9fa3204f9c629e4d0c0434c099da10346cf97e22e0c6.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://falasool.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)"></head><body><div class=content><header><div class=main><a href=https://falasool.github.io/>Falasool</a></div><nav><a href=/friends/></a>
<a href=/about>About</a>
<a href=/friends>Friends</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>SQL 入门</h1><div class=meta>Posted on Jun 29, 2023</div></div><section class=body><h2 id=常用命令>常用命令</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> test; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>创建数据库</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> t1(id int,body varchar(<span style=color:#ae81ff>100</span>)); <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>创建表</span>(<span style=color:#960050;background-color:#1e0010>记得使用\</span>c命令切换数据库)
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>USER</span> test <span style=color:#66d9ef>WITH</span> PASSWORD <span style=color:#e6db74>&#39;Test#1357&#39;</span>; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>创建用户</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> test <span style=color:#66d9ef>WITH</span> PASSWORD <span style=color:#e6db74>&#39;Test#2468&#39;</span>; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>修改密码</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>USER</span> test <span style=color:#66d9ef>createdb</span>; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>指定用户添加指定角色</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> test <span style=color:#66d9ef>TO</span> test; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>赋予指定账户指定数据库所有权限</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>REVOKE</span> <span style=color:#66d9ef>ALL</span> <span style=color:#66d9ef>PRIVILEGES</span> <span style=color:#66d9ef>ON</span> <span style=color:#66d9ef>DATABASE</span> test <span style=color:#66d9ef>TO</span> test; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>移除指定账户指定数据库所有权限</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#66d9ef>table_name</span> [(column1, c2, ...)] <span style=color:#66d9ef>VALUES</span> (v1, v2, ...); <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>在表中插入新数据（在列</span><span style=color:#ae81ff>1</span>,<span style=color:#960050;background-color:#1e0010>列</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>插入</span>v1<span style=color:#960050;background-color:#1e0010>，</span>v2<span style=color:#960050;background-color:#1e0010>）</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*/</span><span style=color:#66d9ef>column_name</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span> <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>查询数据</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DISTINCT</span> <span style=color:#66d9ef>column_name</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span> <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>显示结果时去除重复值</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#960050;background-color:#1e0010>列名称</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>标名称</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>列</span> <span style=color:#960050;background-color:#1e0010>运算符</span> <span style=color:#960050;background-color:#1e0010>值</span>; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>条件过滤</span>
</span></span></code></pre></div><p>操作符</p><table><thead><tr><th style=text-align:center>操作符</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:center>=</td><td style=text-align:center></td></tr><tr><td style=text-align:center>&lt;>/!=</td><td style=text-align:center>不等于</td></tr><tr><td style=text-align:center>></td><td style=text-align:center></td></tr><tr><td style=text-align:center>&lt;</td><td style=text-align:center></td></tr><tr><td style=text-align:center>>=</td><td style=text-align:center></td></tr><tr><td style=text-align:center>&lt;=</td><td style=text-align:center></td></tr><tr><td style=text-align:center>IN</td><td style=text-align:center>多选</td></tr><tr><td style=text-align:center>NOT BEWTEEN&mldr; AND</td><td style=text-align:center>( , )/[ , ]/[ , )</td></tr><tr><td style=text-align:center>LIKE/NOT LIKE</td><td style=text-align:center>某种搜索模式</td></tr><tr><td style=text-align:center>AND</td><td style=text-align:center></td></tr><tr><td style=text-align:center>OR</td><td style=text-align:center></td></tr><tr><td style=text-align:center>AS</td><td style=text-align:center>指定表别名&rsquo;&rsquo;/列别名""</td></tr><tr><td style=text-align:center>JOIN</td><td style=text-align:center>多表关联（匹配）</td></tr><tr><td style=text-align:center>UNION/UNION ALL</td><td style=text-align:center>合并 select 结果集</td></tr><tr><td style=text-align:center>NOT NULL</td><td style=text-align:center>非空</td></tr><tr><td style=text-align:center>VIEW</td><td style=text-align:center>是结果集的可视化的表</td></tr><tr><td style=text-align:center></td><td style=text-align:center></td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> c1,c2 <span style=color:#66d9ef>DESC</span><span style=color:#f92672>/</span>LASTNAME<span style=color:#f92672>/</span>ID_P; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>结果按</span> <span style=color:#960050;background-color:#1e0010>降序</span><span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>字母顺序</span><span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>数字顺序</span> <span style=color:#960050;background-color:#1e0010>排列</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> <span style=color:#960050;background-color:#1e0010>表名称</span> <span style=color:#66d9ef>SET</span> <span style=color:#960050;background-color:#1e0010>列名称</span> <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>新</span>value <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>列名称</span> <span style=color:#f92672>=</span> sth.; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>更新数据</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表名称</span> <span style=color:#66d9ef>WHERE</span> <span style=color:#960050;background-color:#1e0010>列名称</span> <span style=color:#f92672>=</span> sth.; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>删除某行数据</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>table_name</span>; <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>删除所有行（表的结构属性索引完整）</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>TRUNCATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名称</span> <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>删除表内数据</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#960050;background-color:#1e0010>表名称</span> <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>删除表</span>
</span></span></code></pre></div><h2 id=常用函数>常用函数</h2><p>语法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>function</span>(<span style=color:#960050;background-color:#1e0010>列</span>) <span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>表</span>;
</span></span></code></pre></div><h3 id=avg>AVG</h3><p>返回字段的平均值，不包括 null</p><h3 id=count>COUNT</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>返回表的记录数</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>COUNT</span>(<span style=color:#66d9ef>DISTINCT</span> <span style=color:#960050;background-color:#1e0010>列名</span>) <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>返回列的总数（除去重复的）</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>COUNT</span>(<span style=color:#960050;background-color:#1e0010>列名</span>) <span style=color:#f92672>#</span> <span style=color:#960050;background-color:#1e0010>返回列的值的总数</span>
</span></span></code></pre></div><h3 id=sum>SUM</h3><p>求和</p><h3 id=group-by>GROUP BY</h3><p>结合统计函数 COUNT，根据某些列对结果集进行分组</p><h3 id=having>HAVING</h3><p>WHERE 不能和 COUNT 一起使用，所以在统计函数前加上 HAVING</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> lastname,<span style=color:#66d9ef>count</span>(city) <span style=color:#66d9ef>from</span> persons
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span> city <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;xx&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span> lastname
</span></span><span style=display:flex><span><span style=color:#66d9ef>having</span> <span style=color:#66d9ef>count</span>(city) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><h3 id=ucaseupper--lcaselower>UCASE/UPPER & LCASE/LOWER</h3><p>把字段的值转换为大写/小写</p><h3 id=lenlength>LEN/LENGTH</h3><p>返回字段的值的长度</p><h3 id=round列名-精度>ROUND(列名, 精度)</h3><p>字段舍入为指定的小树位数</p><h3 id=nowsysdate>NOW/SYSDATE</h3><p>获取当前日期时间</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/sql>sql</a></li><li><a href=/tags/tech>tech</a></li><li><a href=/tags/database>database</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/falasool/ rel=me title=GitHub><i data-feather=github></i></a></div><div class=footer-info>2024 © Falaool | Built with <a href=https://gohugo.io>Hugo</a> & Theme <a href=https://github.com/athul/archie>Archie</a> design by Athul</div></footer><script>feather.replace()</script></div></body></html>
<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>博客域名设置 - Falasool</title><link rel=icon type=image/png href=static/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="购买域名、设置DNS、给博客自定义域名"><meta property="og:image" content><meta property="og:title" content="博客域名设置"><meta property="og:description" content="购买域名、设置DNS、给博客自定义域名"><meta property="og:type" content="article"><meta property="og:url" content="https://falasool.github.io/posts/domain/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-22T22:27:40+08:00"><meta property="article:modified_time" content="2022-10-22T22:27:40+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="博客域名设置"><meta name=twitter:description content="购买域名、设置DNS、给博客自定义域名"><script src=https://falasool.github.io/js/feather.min.js></script>
<link href=https://falasool.github.io/css/fonts.4bacf4386d3f58fdc378d205a903311c80158bf414d25698589b658e0273156d.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://falasool.github.io/css/main.a562939875f5647d4bcd33af2971cc96f9630e2452c4aa7c92f5f25e14077830.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://falasool.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css media="(prefers-color-scheme: dark)"></head><body><div class=content><header><div class=main><a href=https://falasool.github.io/>Falasool</a></div><nav><a href=/friends/></a>
<a href=/about>About</a>
<a href=/friends>Friends</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>博客域名设置</h1><div class=meta>Posted on Oct 22, 2022</div></div><section class=body><h2 id=设置步骤>设置步骤</h2><ul><li><p>在 <a href=https://www.dynadot.com/>Dynadot</a> 买个域名（NameSlio 和 namecheap 也很好）</p></li><li><p>解析域名：</p></li><li><p>注册 <a href=https://dash.cloudflare.com/>Cloudflare</a> 账号，点 Add Site，输入你的域名</p></li></ul><ul><li>选择免费方案</li></ul><ul><li>ping 一下目前的 &lt;username>.github.io ，得到目标 IP 地址（Github 官方会提供 4 条 IPv4 地址）</li></ul><ul><li>检查 IP 是否和刚刚 ping 出来的一致（不一致的话改掉），然后点 Continue</li></ul><p><img src=https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed/blog/check-ip.png alt=check-ip></p><ul><li>配置页面规则</li></ul><ul><li>更改 SSL 设置</li></ul><ul><li>分到了两个姓名服务器，复制下来</li></ul><ul><li>回到 <a href=https://www.dynadot.com/>Dynadot</a>， 点击：我的域名-管理域名-&lt;域名></li></ul><ul><li>点击：DNS设置</li></ul><ul><li>在 GitHub 的 xxx.github.io 仓库，Settings- Pages 里填上你的域名，勾选 Enforce HTTPS</li></ul><ul><li>把根目录下的 <code>.yaml</code> 文件的 baseURL 改为个人域名</li></ul><p>现在可以从域名访问博客了</p><h2 id=解决报错>解决报错</h2><p>从域名或 xxx.github.io 访问博客都会404</p><p>在公开仓库的 Settings-Pages 里查看，发现设置的个人域名消失了，又变回了 falasool.github.io。搜索相关问题发现，有人反馈每次 push 之后都需要重新设置个人域名。</p><p>我试了一下也是这样：设置域名后会自动创建 CNAME 文件，此时从域名或 xxx.github.io 都能访问博客。push 操作后 CNAME 又没了，个人域名或 xxx.github.io 都返回404 😮‍💨</p><p>尝试：在 Cloudflare 里把 DNS 类型改成 A 和 CNAME</p><p>还是不行，一旦 push 就打回原形</p><p>解决方法：查阅资料发现问题在于 源码仓库 hugo-sources 的Actions 配置文件，deploy 时会自动覆盖CNAME 😭，所以在原配置文件添加：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>cname</span>: <span style=color:#ae81ff>anodicseal.xyz</span>
</span></span></code></pre></div><p>解决！🎉🎉🎉</p><h2 id=相关参考>相关参考</h2><p><a href=https://oldtang.com/2420.html>Dynadot 网站注册账户、购买域名、支付宝付款、解析域名教程</a></p><p><a href=https://www.bandwagonhost.net/5986.html>使用 Cloudflare 免费 DNS 服务器解析域名到搬瓦工 VPS 主机建站教程</a></p><p><a href=https://ruanyifeng.com/blog/2016/06/dns.html>DNS 原理入门</a></p><p><a href=https://www.ruanyifeng.com/blog/2022/08/dns-query.html>DNS 查询原理详解</a></p></section><div class=post-tags></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/falasool/ rel=me title=GitHub><i data-feather=github></i></a></div><div class=footer-info>2024 © Falaool | Built with <a href=https://gohugo.io>Hugo</a> & Theme <a href=https://github.com/athul/archie>Archie</a> design by Athul</div></footer><script>feather.replace()</script></div></body></html>
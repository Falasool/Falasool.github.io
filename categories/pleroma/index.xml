<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pleroma on Rubber Duck's Bizarre Adventure</title><link>https://falasool.github.io/categories/pleroma/</link><description>Recent content in Pleroma on Rubber Duck's Bizarre Adventure</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Mon, 15 May 2023 18:52:31 +0800</lastBuildDate><atom:link href="https://falasool.github.io/categories/pleroma/index.xml" rel="self" type="application/rss+xml"/><item><title>Pleroma | ç»´æŠ¤æ—¥å¿—</title><link>https://falasool.github.io/2023/pleroma-operation-and-maintenance/</link><pubDate>Mon, 15 May 2023 18:52:31 +0800</pubDate><guid>https://falasool.github.io/2023/pleroma-operation-and-maintenance/</guid><description>&lt;p>æ­å»ºæ­¥éª¤å®Œå…¨å‚è€ƒ &lt;a class="link" href="https://suicablog.cobaltkiss.blue/posts/pleroma-installation-on-linux-using-otp-releases/" target="_blank" rel="noopener"
>åœ¨ Debian 10 / Ubuntu 20.04 ä¸Šå®‰è£… Pleroma&lt;/a>ï¼Œæ„Ÿè°¢ Suicaï¼&lt;/p>
&lt;h2 id="å…³é—­å¼€å¯æ³¨å†Œ">å…³é—­/å¼€å¯æ³¨å†Œ&lt;/h2>
&lt;p>Settings &amp;gt; Instance &amp;gt; Registrations open&lt;/p>
&lt;p>ï¼ˆç«™ç‚¹åç§°ã€å­—æ•°ä¸Šé™ã€æŠ•ç¥¨é€‰é¡¹ä¸Šé™ã€å°ç¦å…¶å®ƒå®ä¾‹ç­‰ç­‰éƒ½åœ¨ &lt;code>instance&lt;/code>ï¼‰&lt;/p>
&lt;h2 id="æ›´æ¢å®ä¾‹å›¾æ ‡">æ›´æ¢å®ä¾‹å›¾æ ‡&lt;/h2>
&lt;p>åˆ†ä¸ºä¸‰æ­¥ï¼š&lt;/p>
&lt;ul>
&lt;li>å‡†å¤‡å¥½ LOGO æ–‡ä»¶&lt;/li>
&lt;li>æ‰¾åˆ°æ”¾ favicon çš„ä½ç½®&lt;/li>
&lt;li>ä¸Šä¼ &lt;/li>
&lt;/ul>
&lt;p>å…·ä½“æ¥è¯´ï¼š&lt;/p>
&lt;p>æ‰¾åˆ°æœ¬åœ°è¦ä¸Šä¼ çš„å›¾ç‰‡çš„ç»å¯¹è·¯å¾„ï¼Œä¾‹å¦‚ï¼š&lt;code>/Users/user/Pictures/favicon.png&lt;/code>&lt;/p>
&lt;p>å®šä½æœåŠ¡å™¨ä¸­ favicon ä½ç½®&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">find / -type f -iname favicon.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;p>&lt;code>find&lt;/code> å‘½ä»¤ï¼šæ ¹æ®ç”¨æˆ·æŒ‡å®šçš„è¡¨è¾¾å¼åœ¨ç›®å½•å±‚æ¬¡ç»“æ„ä¸­æœç´¢æ–‡ä»¶å’Œç›®å½•&lt;/p>
&lt;p>&lt;code>/&lt;/code>ï¼šåœ¨æ ¹ç›®å½•èŒƒå›´å†…æœç´¢&lt;/p>
&lt;p>&lt;code>-type f&lt;/code>ï¼šæŒ‡å®šæ–‡ä»¶ç±»å‹ å¸¸è§„æ–‡ä»¶&lt;/p>
&lt;p>&lt;code>-iname&lt;/code>ï¼šç›®æ ‡æ–‡ä»¶åï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰&lt;/p>
&lt;/blockquote>
&lt;p>å¾—åˆ° favcion çš„è·¯å¾„&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/opt/pleroma/lib/pleroma-2.4.5-2-gd8e32646/priv/static/favicon.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸Šä¼ å›¾æ ‡ï¼šå¦å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ˆå› ä¸ºå½“å‰ç»ˆç«¯å·²ç»ç™»å½•äº†æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨é‡ŒæŸ¥æ‰¾è¿˜æœªä¸Šä¼ çš„æ–‡ä»¶æ˜¯æ‰¾ä¸åˆ°çš„ï¼‰ï¼Œæ‰§è¡Œ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">scp /Users/pika/Pictures/favicon.png root@149.248.0.119:/opt/pleroma/lib/pleroma-2.4.5-2-gd8e32646/priv/static/favicon.png
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>å‚æ•°è¯´æ˜ï¼š&lt;/p>
&lt;p>scp &amp;lt;æœ¬åœ°æ–‡ä»¶è·¯å¾„&amp;gt;&amp;lt; vpsç”¨æˆ·å@æœåŠ¡å™¨IP&amp;gt;:&amp;lt;ç›®æ ‡è·¯å¾„&amp;gt;&lt;/p>
&lt;/blockquote>
&lt;p>ä»¥åŠï¼Œç½‘é¡µ logo åœ¨ Settings &amp;gt; Frontend ï¼Œè®°å¾—å–æ¶ˆ Settings &amp;gt; Frontend &amp;gt; Logo mask&lt;/p>
&lt;p>åˆ·æ–°ç½‘é¡µï¼Œå›¾æ ‡æ›´æ”¹å®Œæ¯• ğŸ‰&lt;/p>
&lt;h2 id="æ€ä¹ˆæ¢ä¸€ä¸ªå‰ç«¯">æ€ä¹ˆæ¢ä¸€ä¸ªå‰ç«¯&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># ä¸‹è½½åˆ° /tmp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cd /tmp &amp;amp;&amp;amp; curl -L https://gitlab.com/soapbox-pub/soapbox-fe/-/jobs/artifacts/v3.0.0-beta.1/download?job=build-production -o soapbox-fe.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># è§£å‹åˆ° /var/lib/pleroma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">busybox unzip soapbox-fe.zip -o -d /var/lib/pleroma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ·æ–°ç½‘é¡µ&lt;/p>
&lt;h2 id="è‡ªå®šä¹‰è¡¨æƒ…">è‡ªå®šä¹‰è¡¨æƒ…&lt;/h2>
&lt;p>è¡¨æƒ…æ¥æºï¼š&lt;/p>
&lt;p>&lt;a class="link" href="https://emojos.in/" target="_blank" rel="noopener"
>https://emojos.in/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://slackmojis.com/" target="_blank" rel="noopener"
>https://slackmojis.com/&lt;/a>&lt;/p>
&lt;p>æˆ–è€… &lt;a class="link" href="https://pullopen.github.io/%E7%AB%99%E7%82%B9%E7%BB%B4%E6%8A%A4/2020/11/26/mastodon-manage.html" target="_blank" rel="noopener"
>å¦‚ä½•è£…é¥°ä½ çš„ç«™ç‚¹ï¼šè‡ªå®šä¹‰CSSã€ä¸­ç»§ç«™å’Œè‡ªå®šä¹‰è¡¨æƒ…&lt;/a> é‡Œæåˆ°çš„ã€Œå·è¡¨æƒ…ç¥å™¨ã€&lt;/p>
&lt;p>æŠŠå·æ¥çš„è¡¨æƒ…ï¼ˆ&amp;hellip;ï¼‰é€šè¿‡ SSH å®¢æˆ·ç«¯çš„ SFTP åŠŸèƒ½ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ &lt;code>/var/lib/pleroma/static/emoji&lt;/code> ç›®å½•ä¸‹ï¼ˆæˆ–è€…ä½ çš„è‡ªå®šä¹‰è·¯å¾„ï¼‰&lt;/p>
&lt;p>åœ¨ Admin FE çš„ Settings &amp;gt; Emoji &amp;gt; Settings &amp;gt; Shortcode globs é‡Œæ·»åŠ è¡¨æƒ…åŒ…ç›®å½•çš„è·¯å¾„ï¼Œæ¯”å¦‚ï¼š&lt;code>/emoji/**/*.png&lt;/code>ã€&lt;code>/emoji/**/*.gif&lt;/code> ï¼Œæ„å‘³ç€ emoji åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰ png/gif æ ¼å¼çš„æ–‡ä»¶éƒ½ä¼šè¢«è§†ä½œè‡ªå®šä¹‰è¡¨æƒ…åŒ…&lt;/p>
&lt;p>ç‚¹å‡» Reload emojiï¼ŒOK&lt;/p>
&lt;h2 id="æ”¾å¤§-emoji">æ”¾å¤§ Emoji&lt;/h2>
&lt;p>&lt;a class="link" href="https://kyo.iroiro.party/posts/pleroma-largemoji/" target="_blank" rel="noopener"
>Pleroma-fe çš„ emoji æ”¾å¤§é…ç½®ï¼ˆï¼Ÿï¼‰&lt;/a>&lt;/p>
&lt;h2 id="å®ä¾‹å±•ç¤ºé¡µé¢">å®ä¾‹å±•ç¤ºé¡µé¢&lt;/h2>
&lt;p>åœ¨ Settings &amp;gt; Frontend &amp;gt; Redirect root no login é‡Œæ”¹æˆ &lt;code>/about&lt;/code>&lt;/p>
&lt;p>åœ¨ Admin FE &amp;gt; Settings &amp;gt; Others æ”¹ç«™ç‚¹è§„åˆ™&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Hello!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ponderduck is a private instance and is not normally open for registration, so if you would like to join, please contact the admin with your fediverse account.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Thanks to those who have helped me in the build process! Sending lots of love and respect!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">See the Pleroma documentation for more information.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç¦æ­¢æœªéªŒè¯ç”¨æˆ·æµè§ˆæ—¶é—´çº¿ï¼šSettings &amp;gt; Instance &amp;gt; Public/Timelines/Profiles/Activites æ ¹æ®éœ€è¦æ›´æ”¹&lt;/p>
&lt;h2 id="è‡ªå®šä¹‰ä¸»é¢˜">è‡ªå®šä¹‰ä¸»é¢˜&lt;/h2>
&lt;p>è·å–ä¸»é¢˜ or è‡ªåˆ¶ï¼š&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://fediverse.eu.org/discussion/27/%E4%BA%94%E5%88%86%E9%92%9F%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E6%BC%82%E4%BA%AE%E7%9A%84pleroma%E4%B8%BB%E9%A2%98" target="_blank" rel="noopener"
>äº”åˆ†é’Ÿè®¾è®¡ä¸€ä¸ªæ¼‚äº®çš„pleromaä¸»é¢˜&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://mikan.bangdream.moe/2022/11/21/recommend-settings-for-pleroma/" target="_blank" rel="noopener"
>å…³äº Docker ä¸‹ Pleroma å®ä¾‹éƒ¨ç½²çš„ä¸€äº›æ¨èè®¾ç½®&lt;/a>&lt;/p>
&lt;p>æˆ–è€… Google ã€ŒPleroma FE theme jsonã€&lt;/p>
&lt;/blockquote>
&lt;p>ä¸€äº›æ¼‚äº®ä¸»é¢˜å±•ç¤ºï¼š&lt;/p>
&lt;p>&lt;a class="link" href="https://mindpalace.michaelis.website/tech/pleroma-theme.html" target="_blank" rel="noopener"
>https://mindpalace.michaelis.website/tech/pleroma-theme.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://plthemes.vulpes.one/" target="_blank" rel="noopener"
>https://plthemes.vulpes.one/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://suicablog.cobaltkiss.blue/posts/themes-gallery/" target="_blank" rel="noopener"
>https://suicablog.cobaltkiss.blue/posts/themes-gallery/&lt;/a>&lt;/p>
&lt;p>æ·»åŠ ä¸»é¢˜çš„æ­¥éª¤ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>æ‰¾åˆ° themes æ–‡ä»¶å¤¹ &lt;code>find / -type d -iname themes&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æŠŠä¸‹è½½çš„ &lt;code>.json&lt;/code> æ–‡ä»¶æ·»åŠ åˆ°ç›®æ ‡ç›®å½•ï¼Œæ¯”å¦‚æˆ‘æ·»åŠ åˆ°äº† &lt;code>/var/lib/pleroma/static/static/themes&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶ååœ¨ &lt;code>/var/lib/pleroma/static/static/styles.json&lt;/code> æŠŠåˆšåˆšçš„è‡ªå®šä¹‰ä¸»é¢˜æ·»åŠ è¿›å»ï¼ŒæŒ‰å¦‚ä¸‹æ ¼å¼&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;takeabreak&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;/static/themes/takeabreak.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;break&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="s2">&amp;#34;/static/themes/break.json&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ·æ–°ç½‘é¡µï¼Œåœ¨è®¾ç½®é‡Œæ‰¾åˆ°è‡ªå®šä¹‰ä¸»é¢˜ï¼Œå¯ä»¥ç”¨äº†&lt;/p>
&lt;p>æœ¬ç«™é»˜è®¤ä¸»é¢˜åœ¨ Admin FE/Pleroma FE é‡Œæ”¹ï¼Œè·¯å¾„ï¼šSettings &amp;gt; Frontend &amp;gt; Themes&lt;/p>
&lt;h2 id="è¿æ¥ä¸­ç»§">è¿æ¥ä¸­ç»§&lt;/h2>
&lt;blockquote>
&lt;p>ä¸­ç»§çš„ç®€ä»‹ã€é‡è¦æ€§å’Œä¸­æ–‡ä¸­ç»§æ¨èï¼šhttps://mstdn.one/@list/106729842177738917&lt;/p>
&lt;p>åŠ ä¸ä¸ŠæŸäº›ä¸­ç»§ï¼Œä½†æ˜¯åˆæƒ³tlä¸Šå‡ºç°æ›´å¤šå˜Ÿæ–‡æ€ä¹ˆåŠï¼Ÿ&lt;/p>
&lt;ul>
&lt;li>Kanaå‘Šè¯‰æˆ‘ä¸€ä¸ªåŠæ³•ï¼šå¯¹äº Pleroma å®ä¾‹è€Œè¨€ï¼ŒæŠŠ https://Pleromaå®ä¾‹åŸŸå/relay å½“ä½œä¸­ç»§è¿æ¥æ¥è¾“å…¥æ˜¯å¯ä»¥å…³æ³¨è¿™ä¸ªå®ä¾‹çš„ã€‚&lt;/li>
&lt;li>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—® ï¼ˆhttps://the-federation.info/pleroma ï¼‰å’Œï¼ˆhttps://fedidb.org/network ï¼‰è¿™ä¸¤ä¸ªfediverseé»„é¡µï¼Œæ‰‹åŠ¨æ·»åŠ è‡ªå·±å¿ƒä»ªçš„pleromaå®ä¾‹ã€‚å¯ä»¥ä¸€å£æ°”å…³æ³¨æ‰€æœ‰çš„ä¸­æ–‡pleromaï¼ˆå› ä¸ºå¤ªå°‘ï¼‰ï¼Œè¿˜å¯ä»¥å…³æ³¨å‡ ä¸ªå¤´éƒ¨å¤–æ–‡å®ä¾‹ï¼ˆbae.stçš„äººå‘é»„å›¾ä¸é€‰NFSWï¼ï¼‰&lt;/li>
&lt;/ul>
&lt;p>â€”â€”æ¥è‡ª &lt;a class="link" href="https://dasgelobteland.github.io/posts/22pleroma/" target="_blank" rel="noopener"
>æˆ‘çš„pleromaæ­å»ºç¬”è®°&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>å‡ ä¸ªä¸­æ–‡ä¸­ç»§ï¼šhttps://mstdn.one/@list/106729842177738917&lt;/p>
&lt;h2 id="å¤‡ä»½">å¤‡ä»½&lt;/h2>
&lt;p>Pleroma éœ€è¦å¤‡ä»½çš„åœ°æ–¹æœ‰ä¸‰ä¸ªï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>/etc/pleroma&lt;/code>ï¼šå­˜å‚¨å¯åŠ¨æ—¶çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœä½ å¼€å¯äº†æ•°æ®åº“å­˜å‚¨é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å¤‡ä»½ï¼›&lt;/li>
&lt;li>&lt;code>/var/lib/pleroma&lt;/code>ï¼šå­˜å‚¨ç”¨æˆ·åˆ›å»ºçš„é™æ€æ–‡ä»¶ï¼ˆè‡ªå®šä¹‰è¡¨æƒ…ã€å¤´åƒã€ä¸Šä¼ çš„æ–‡ä»¶ã€å‰ç«¯ã€â€¦â€¦ï¼‰ï¼Œå¦‚æœä¸æ˜¯ç»å¸¸ä¸Šä¼ æ–‡ä»¶ï¼Œå¯ä»¥æŒ‰æœˆå¤‡ä»½ï¼›&lt;/li>
&lt;li>PostgreSQL ä¸­çš„ pleroma æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ &lt;code>pg_dump&lt;/code> å¤‡ä»½ï¼š&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo -Hu postgres pg_dump -d pleroma --format=custom -f /var/lib/postgresql/pleroma.pgdump
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="ç»­æœŸsslè¯ä¹¦">ç»­æœŸSSLè¯ä¹¦&lt;/h2>
&lt;p>æ ¹æ® &lt;a class="link" href="[https://eff-certbot.readthedocs.io/en/stable/using.html#renewing-certificates]%28https://blog.csdn.net/wanghao_sh/article/details/124977429%29" >å®˜æ–¹æ–‡æ¡£&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install snapd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap install core
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap install hello-world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello-world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap install --classic certbot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap set certbot trust-plugin-with-root=ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap install certbot-dns-cloudflare
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ï¼ˆï¼Ÿæœ‰ç‚¹å›°æƒ‘ï¼Œä¸Šé¢æŠ˜è…¾äº†ä¸€å¤§å †ï¼Œæœ€åç®€ç®€å•å•æ•²ä¸ª &lt;code>certbot&lt;/code> ç„¶åè·Ÿç€é€‰å°±å¥½äº†ï¼‰&lt;/p>
&lt;h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤&lt;/h2>
&lt;p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">systemctl status &lt;span class="o">[&lt;/span>options&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹å†…å­˜&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">top
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹è´Ÿè½½&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">htop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://www.onitroad.com/jc/linux/how-to-install-htop-on-debian-linux-using-apt-get.html" target="_blank" rel="noopener"
>å¦‚ä½•åœ¨Debian Linuxä¸Šå®‰è£…htop&lt;/a>&lt;/p>
&lt;h2 id="502-bad-gateway">502 Bad Gateway&lt;/h2>
&lt;p>æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim /var/log/nginx/error.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[error] 825#825 :*8459 connect() failed (111: Connection refused)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">while connecting to upstream, client: x.x.x.x, server: ponderduck.cc,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">request: &amp;#34;POST /inbox HTTP/2.0&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">upstream: &amp;#34;http:127.0.0.1:4000/inbox&amp;#34;,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host: &amp;#34;ponderduck.cc&amp;#34;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>åˆ†æï¼šclientè¯·æ±‚èµ„æºæ—¶ï¼Œè½¬å‘åˆ°127.0.0.1:4000å»äº†&lt;/p>
&lt;/blockquote>
&lt;p>æ£€æŸ¥4000ç«¯å£ï¼Œè¿”å›ä¸ºç©º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">telnet &amp;lt;ip&amp;gt; &lt;span class="m">4000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>netstatæ²¡æœ‰å‘ç°å ç”¨ç«¯å£4000çš„ç¨‹åº&lt;/p>
&lt;p>é™„ä¸Š Debula åŸè¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>OTPå®‰è£…çš„Pleromaé»˜è®¤ç›‘å¬çš„æ˜¯æœ¬æœºçš„127.0.0.1:4000
ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨VPSä¸Šä½ å¯ä»¥ç›´æ¥é€šè¿‡ &lt;a class="link" href="http://127.0.0.1:4000/" target="_blank" rel="noopener"
>http://127.0.0.1:4000&lt;/a> è®¿é—® Pleromaï¼Œæ¯”å¦‚
curl -v http://127.0.0.1:4000/api/v1/instance&lt;/p>
&lt;p>NginXè´Ÿè´£æŠŠå¤–éƒ¨çš„è¿æ¥è¯·æ±‚è½¬å‘åˆ° 127.0.0.1:4000ï¼Œå¾—åˆ°å“åº”åè½¬å‘å›å» &lt;img src="https://bucket.alive.bar/cache/custom_emojis/images/000/163/820/original/7ffe1103db94842e.png"
loading="lazy"
alt=":ablobpanic:"
>&lt;/p>
&lt;p>å¦‚æœä½ ç”¨ netstat æ²¡å‘ç° 4000 ç«¯å£çš„ç¨‹åºï¼Œè¯´æ˜ Pleroma æŒ‚äº†ï¼Œè¯¥å»æ£€æŸ¥ Pleroma çš„é”™è¯¯æ—¥å¿— &lt;img src="https://bucket.alive.bar/cache/custom_emojis/images/000/047/971/original/c7b0bea715cd48c1.png"
loading="lazy"
alt=":ablobsweats:"
>&lt;/p>
&lt;p>ï¼ˆä¸è¿‡ç¡®å®å¾ˆå¥‡æ€ªï¼ŒOTPç‰ˆæœ¬åº”è¯¥ä¼šè‡ªåŠ¨é‡å¯çš„â€¦â€¦ï¼‰&lt;/p>
&lt;/blockquote>
&lt;p>pleromaä½ç½® /opt/pleroma&lt;/p>
&lt;p>æŸ¥çœ‹pleromaæ—¥å¿—&lt;code>journalctl -u pleroma&lt;/code>,ä¸ºç©º&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">-- Logs begin at Wed 2023-03-08 16:18:56 HKT, end at Wed 2023-03-08 19:38:34 HKT. --
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-- No entries --
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>äºæ˜¯å» &lt;code>/var/log/syslog&lt;/code> çœ‹æ—¥å¿—ï¼Œéƒ½æ˜¯infoï¼Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜&lt;/p>
&lt;p>é‡å¯ä¹‹åè«åå…¶å¦™å¥½äº†&lt;/p>
&lt;p>è¿‡äº†4å¤©ï¼Œåˆ502äº†â€¦â€¦&lt;/p>
&lt;p>Update: 20230528å†æ¬¡ 502&lt;/p>
&lt;p>æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="p">|&lt;/span> grep pleroma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹ pleroma æ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">journalctl -u pleroma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pleroma: cat: write error: No space left on device
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pleroma: ERROR: Cannot start release because it could not write /opt/pleroma/tmp/pleroma-2.4.5-2-gd8e32646-2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ²¡æœ‰è¶³å¤Ÿç©ºé—´å†™å…¥è¿è¡Œæ—¶é…ç½®æ–‡ä»¶&lt;/p>
&lt;p>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">free -m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> total used free shared buff/cache available
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Mem: 987 144 117 30 724 634
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Swap: 2399 3 2396
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆæ»¡äº†è€¶&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/vda1 24G 24G 0 100% /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹å„ä¸ªæ–‡ä»¶å ç”¨å¤§å°&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">du -sh *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.4G swapfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.7G usr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">19G var
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ¸…ç©ºæ—¥å¿—ï¼Œç¨å¾®è…¾å‡ºä¸€ç‚¹ç©ºé—´äº†&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat /dev/null &amp;gt; filename
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>/usr/lib/postgresql/11/bin/pg_ctl&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/etc/postgresql/11/main#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ conf.d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ environment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ pg_ctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ pg_hba.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ pg_ident.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ postgresql.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ start.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ•°æ®åº“å¸¸ç”¨å‘½ä»¤&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç™»å½• PG æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql -U postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">\l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¿›å…¥æŸæ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">\c&lt;/span> pg-name
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æŸ¥çœ‹æŸæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">select&lt;/span> tablename from pg_tables&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># é€€å‡ºæ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ctrl + z
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹æ•°æ®åº“å¤§å°ï¼Œæ˜¯å°æœåŠ¡å™¨ä¸èƒ½æ‰¿å—ä¹‹é‡&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">postgres=# SELECT pg_size_pretty( pg_database_size(&amp;#39;pleroma&amp;#39;) );
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pg_size_pretty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 14 GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(1 row)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‡çº§æœåŠ¡å™¨ï¼Œç„¶åæŸ¥çœ‹ç£ç›˜å ç”¨æƒ…å†µ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/vda1 52G 23G 27G 46% /
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æŸ¥çœ‹ postgresql æ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim /var/log/postgresql/postgresql.log
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ›å»ºæ•°æ®åº“æ–‡ä»¶çš„å¤‡ä»½ç›®å½•å¹¶èµ‹æƒ&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mkdir -p /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod 777 /pleromabackup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å…è®¸ pleroma ç”¨æˆ·å…å¯†ç™»å½•æ•°æ®åº“&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vim /etc/postgresql/11/main/pg_hba.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host replication repl 127.0.0.1/32 md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¤‡ä»½æ•°æ®åº“&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ‡æ¢ç”¨æˆ·ä¸º postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su - postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç™»å½•æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql -U postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤‡ä»½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">postgres&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="c1"># \! pg_dump pleroma -f /pleromabackup/pleroma.pgdump&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>åˆ é™¤ 15 å¤©å‰çš„å¤–ç«™ç¼“å­˜ï¼ˆè¿™ä¸ª n å¤©æ˜¯åœ¨ Admin FE - settings - instance - Remote post retention days é‡Œä¿®æ”¹çš„ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">su pleroma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl database prune_objects&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">11:32:27.912 &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span> Pruning objects older than &lt;span class="m">15&lt;/span> days
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¦‚æœæŠ¥é”™ï¼š&lt;code>â€“rpc-eval : RPC failed with reason :nodedown&lt;/code>ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ²¡å¯åŠ¨ Pleromaã€‚æ„Ÿè°¢ &lt;a class="link" href="https://seviche.cc/" target="_blank" rel="noopener"
>Seviche&lt;/a> !!&lt;/p>
&lt;p>æ•´ç†æ•°æ®åº“&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">su pleroma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl database vacuum full&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>0530æ‰§è¡Œè®°å½•&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># é‡æ–°ç”Ÿæˆæ•°æ®åº“é…ç½®æ–‡ä»¶
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su pleroma -s $SHELL -lc &amp;#34;./bin/pleroma_ctl instance gen --output /tmp/config.exs --output-psql /tmp/setup_db.psql&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># æ¸…ç©ºæ•°æ®åº“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -Hu postgres psql -c &amp;#39;DROP DATABASE pleroma;&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP DATABASE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -Hu postgres psql -c &amp;#39;DROP USER pleroma;&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DROP ROLE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># æ¥ä¸‹æ¥è¯¥é‡å»ºæ•°æ®åº“äº†
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -Hu postgres psql -f /tmp/setup_db.psql
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># é‡å»ºåçš„æ•°æ®åº“size
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">postgres=# SELECT pg_size_pretty( pg_database_size(&amp;#39;pleroma&amp;#39;) );
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pg_size_pretty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8045 kB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">(1 row)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># æ¢å¤æ•°æ®16:17-
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -u postgres psql pleroma &amp;lt; /pleromabackup/pleroma.pgdump
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="å‚è€ƒ--è‡´è°¢">å‚è€ƒ &amp;amp; è‡´è°¢&lt;/h2>
&lt;p>&lt;a class="link" href="https://dasgelobteland.github.io/posts/23pleroma/" target="_blank" rel="noopener"
>https://dasgelobteland.github.io/posts/23pleroma/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://blog.debula.ml/index.php/archives/5/#1.%E7%A4%BE%E4%BA%A4%E7%BD%91%E7%BB%9C%EF%BC%9APleroma" target="_blank" rel="noopener"
>ç¤¾äº¤ç½‘ç»œï¼šPleroma&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://bigshans.github.io/post/troubleshoot-pleroma/" target="_blank" rel="noopener"
>https://bigshans.github.io/post/troubleshoot-pleroma/&lt;/a>&lt;/p></description></item><item><title>Pleroma | å¼€å¯é‚®ä»¶æœåŠ¡ï¼ˆZOHOï¼‰</title><link>https://falasool.github.io/2022/zoho-mail-services/</link><pubDate>Fri, 21 Oct 2022 23:29:38 +0800</pubDate><guid>https://falasool.github.io/2022/zoho-mail-services/</guid><description>&lt;!-- raw HTML omitted -->
&lt;p>åœ¨ zoho.com æ³¨å†Œè´¦å·ï¼Œé€‰æ‹© Free Planï¼ŒAdd an existing domainï¼Œæ¥ç€å»éªŒè¯åŸŸå&lt;/p>
&lt;p>åœ¨åŸŸåæ‰˜ç®¡å•†ï¼ˆæ¯”å¦‚ Cloudflareï¼‰æ·»åŠ ä¸€æ¡ TXT è®°å½•ç„¶åéªŒè¯&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202306020051407.png"
loading="lazy"
alt="image-20230602005133357"
>&lt;/p>
&lt;p>æ¥ç€å¡«å†™ä»»æ„åŸŸåå‰ç¼€ï¼Œæ¯”å¦‚ adminï¼Œå®Œæˆåˆ›å»ºã€‚è·³è¿‡è®¾ç½® Groupsï¼Œæ¥åˆ° DNS Mappingï¼ŒåŒæ ·å¡«å†™&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202306020104815.png"
loading="lazy"
alt="image-20230602010444789"
>&lt;/p>
&lt;p>æ³¨æ„ DKIM&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blogzmail_domain.webp"
loading="lazy"
alt="image"
>&lt;/p>
&lt;p>éªŒè¯åå®Œæˆï¼Œåˆ° mail.zoho.com æµ‹è¯•æ”¶å‘é‚®ä»¶åŠŸèƒ½&lt;/p></description></item></channel></rss>
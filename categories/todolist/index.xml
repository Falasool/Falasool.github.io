<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ToDoList on Falasool</title><link>https://falasool.github.io/categories/todolist/</link><description>Recent content in ToDoList on Falasool</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Mon, 31 Jul 2023 16:22:45 +0800</lastBuildDate><atom:link href="https://falasool.github.io/categories/todolist/index.xml" rel="self" type="application/rss+xml"/><item><title>Migrant ot Akkoma</title><link>https://falasool.github.io/2023/migrant-oto-akkoma/</link><pubDate>Mon, 31 Jul 2023 16:22:45 +0800</pubDate><guid>https://falasool.github.io/2023/migrant-oto-akkoma/</guid><description>&lt;h2 id="ÂáÜÂ§á">ÂáÜÂ§á&lt;/h2>
&lt;p>üåüÂ§á‰ªΩ&lt;/p>
&lt;p>‚û°Ô∏èË¥¶Âè∑Ôºö Settings &amp;ndash; Data import/exportÔºåÂÖ®ÈÉ®ÂØºÂá∫&lt;/p>
&lt;p>‰ª•‰∏ãÊñá‰ª∂Â§πÁî® FTP ÂÆ¢Êà∑Á´ØÔºàFileZillaÔºâÂ§á‰ªΩÂà∞ÁîµËÑë&lt;/p>
&lt;p>‚û°Ô∏èÊï∞ÊçÆÂ∫ìÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">777&lt;/span> /pleromabackup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁôªÂÖ•Êï∞ÊçÆÂ∫ì&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">su&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">postgres&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="o">!&lt;/span> &lt;span class="n">pg_dump&lt;/span> &lt;span class="n">pleroma&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">pleromabackup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pleroma&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">pgdump&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‚û°Ô∏èPleroma ÈÖçÁΩÆÔºö/etc/pleroma/&lt;/p>
&lt;p>‚û°Ô∏èPleroma ÈùôÊÄÅÊñá‰ª∂Ôºö/var/lib/pleroma&lt;/p>
&lt;p>üåüÊääÂüüÂêçÁöÑIPÊåáÂêëÊñ∞ÊúçÂä°Âô®&lt;/p>
&lt;h2 id="Êê≠Âª∫ËøáÁ®ã">Êê≠Âª∫ËøáÁ®ã&lt;/h2>
&lt;p>ÂÆâË£Ö‰æùËµñ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt upgrade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install curl unzip libncurses5 postgresql postgresql-contrib nginx libmagic-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install imagemagick ffmpeg libimage-exiftool-perl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂÆâË£ÖÊú¨‰ΩìÔºöÊ≥®ÊÑè Ubuntu22 ÁöÑFLAVOURÂèòÈáèÊòØamd64-ubuntu-jammy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">adduser --system --shell /bin/false --home /opt/akkoma akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">FLAVOUR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;amd64-ubuntu-jammy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">curl &amp;#39;https://akkoma-updates.s3-website.fr-par.scw.cloud/stable/akkoma-&lt;/span>&lt;span class="nv">$FLAVOUR&lt;/span>&lt;span class="s2">.zip&amp;#39; -o /tmp/akkoma.zip
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">unzip /tmp/akkoma.zip -d /tmp/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">mv /tmp/release/* /opt/akkoma
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">rmdir /tmp/release
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">rm /tmp/akkoma.zip
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/akkoma/uploads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /var/lib/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/akkoma/static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /var/lib/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /etc/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /etc/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl instance gen --output /etc/akkoma/config.exs --output-psql /tmp/setup_db.psql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su postgres -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;psql -f /tmp/setup_db.psql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl migrate&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma daemon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep &lt;span class="m">20&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> curl http://localhost:4000/api/v1/instance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma stop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Áî≥ËØ∑SSLËØÅ‰π¶ÔºöÂèÇËÄÉ&lt;a class="link" href="https://ponder.lol/2023/new-pleroma-isntance-on-debian11/#%E9%80%9A%E9%85%8D%E7%AC%A6-ssl-%E8%AF%81%E4%B9%A6%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F" target="_blank" rel="noopener"
>ÈÄöÈÖçÁ¨¶ SSL ËØÅ‰π¶Ëá™Âä®Áª≠Êúü&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>NginxÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/akkoma/installation/akkoma.nginx /etc/nginx/sites-available/akkoma.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>‰øÆÊîπÊâÄÊúâ example.tld ‰∏∫ÂáÜÂ§áÂ•ΩÁöÑÂüüÂêç&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim /etc/nginx/sites-available/akkoma.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /opt/akkoma/installation/akkoma.service /etc/systemd/system/akkoma.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> akkoma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂàõÂª∫ÁÆ°ÁêÜÂëòË¥¶Êà∑„ÄÅÂÆâË£ÖÂâçÁ´Ø&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /opt/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s $SHELL -lc &amp;#34;./bin/pleroma_ctl user new admin cyouike@duck.com --admin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./bin/pleroma_ctl frontend install pleroma-fe --ref stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./bin/pleroma_ctl frontend install admin-fe --ref stable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="Êú¨Âú∞ÂÆöÊó∂Â§á‰ªΩ">Êú¨Âú∞ÂÆöÊó∂Â§á‰ªΩ&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /opt/local_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/local_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim backup.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËÑöÊú¨ÂÜÖÂÆπÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /etc/profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äîbackup to local directory‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="sb">`&lt;/span>date +&lt;span class="s2">&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;now starting backup&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;stop akkoma&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl stop akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;0.create a backup day directory&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -d /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">``&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Floder&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;already exists.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;New floder&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +777 /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;1.dump database&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -Hu postgres pg_dump -d akkoma --format&lt;span class="o">=&lt;/span>custom -f /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>/akkoma.pgdump
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;2. copy upload &amp;amp; static folder&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r /var/lib/akkoma/static /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r /var/lib/akkoma/uploads /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;3. copy config file&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /etc/akkoma/config.exs /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;restart akkoma&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="sb">`&lt;/span>date +&lt;span class="s2">&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;finished&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Backup for&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;done!&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Âà†Èô§Ë∂ÖËøá15Â§©ÁöÑÂ§á‰ªΩ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim clear.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /opt/local_backup/ -type d -mtime +15 -exec rm -rf &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËÆæÁΩÆÂÆöÊó∂‰ªªÂä°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">crontab -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">00&lt;/span> &lt;span class="m">04&lt;/span> * * &lt;span class="m">6&lt;/span> root /bin/bash /opt/local_backup/backup.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">00&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="m">1&lt;/span> * * root /bin/bash /opt/local_backup/clear.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÂèÇËÄÉ--Ëá¥Ë∞¢">ÂèÇËÄÉ &amp;amp; Ëá¥Ë∞¢&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.akkoma.dev/stable/installation/otp_en/#detecting-flavour" target="_blank" rel="noopener"
>Installing on Linux using OTP releases&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>&lt;a class="link" href="https://im.happytoo.cyou/posts/2301%E5%A4%87%E4%BB%BDpleroma/#%E6%9C%AC%E5%9C%B0%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD" target="_blank" rel="noopener"
>Â§á‰ªΩpleromaËÆ∞ÂΩï&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.akkoma.dev/stable/administration/CLI_tasks/instance/#managing-instance-configuration" target="_blank" rel="noopener"
>Managing instance configuration&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p></description></item><item><title>iTerm2 ÈÖçÁΩÆ</title><link>https://falasool.github.io/2023/iterm2/</link><pubDate>Tue, 18 Jul 2023 18:41:59 +0800</pubDate><guid>https://falasool.github.io/2023/iterm2/</guid><description>&lt;p>SSH ËøúÁ®ãËøûÊé•ÈÖçÁΩÆ&lt;/p>
&lt;p>ÂàõÂª∫ÁôªÂΩïËÑöÊú¨ &lt;code>/.ssh/remote-login-vps.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/usr/bin/expect
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">set&lt;/span> timeout &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spawn ssh -p &lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 0&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 1&lt;span class="o">]&lt;/span>@&lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 2&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">expect &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;(yes/no)?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>send &lt;span class="s2">&amp;#34;yes\n&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>exp_continue&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;password:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>send &lt;span class="s2">&amp;#34;[lindex &lt;/span>&lt;span class="nv">$argv&lt;/span>&lt;span class="s2"> 3]\n&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">interact
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Êéà‰∫àÊâßË°åÊùÉÈôê &lt;code>chmod +x remote-login-vps.sh&lt;/code>&lt;/p>
&lt;p>ËøõÂÖ•iTerm2 -&amp;gt; preference -&amp;gt; ProfilesÔºåÂàõÂª∫‰∏Ä‰∏™ProfileÔºåÂú® General - Command - Send text at start ËæìÂÖ•&lt;code>~/.ssh/remote-login-vps.sh 22 Áî®Êà∑ ip ÂØÜÁ†Å&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307181916887.webp"
loading="lazy"
alt="image (1)"
>&lt;/p></description></item><item><title>ÂàùÈÅá PostgreSQL</title><link>https://falasool.github.io/2023/postgresql/</link><pubDate>Mon, 26 Jun 2023 11:21:32 +0800</pubDate><guid>https://falasool.github.io/2023/postgresql/</guid><description>&lt;p>‰ª•Áé∞Êúâ Pleroma Êï∞ÊçÆÂ∫ì‰∏∫Âü∫Á°ÄÂ≠¶‰π† postgreSQL&lt;/p>
&lt;h2 id="Êú¨Âú∞ÂÆâË£Ö-pg">Êú¨Âú∞ÂÆâË£Ö PG&lt;/h2>
&lt;h3 id="Áî®-homebrew-ÂÆâË£Ö">Áî® Homebrew ÂÆâË£Ö&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew install postgresql@13
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáè&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl"># ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ # PostgreSQL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ export PATH=&amp;#34;/opt/homebrew/Cellar/postgresql@13/13.11_1/bin:$PATH&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ export PGDATA=&amp;#34;/opt/homebrew/var/postgresql@13&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËÆ©‰øÆÊîπÁîüÊïà &amp;amp; ÊµãËØï&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc &lt;span class="c1"># ÂØπÈÖçÁΩÆÊñá‰ª∂ÁöÑ‰øÆÊîπÁîüÊïà&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pg_ctl -V &lt;span class="c1"># Êü•ÁúãÁâàÊú¨Ôºåreturn `pg_ctl (PostgreSQL) 13.1` &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="dmg-ÂÆâË£Ö">dmg ÂÆâË£Ö&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank" rel="noopener"
>‰∏ãËΩΩ&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>‰øÆÊîπÁéØÂ¢ÉÂèòÈáè&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Library/PostgreSQL/13/bin:&lt;/span>&lt;span class="nv">$PATH&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ËøúÁ®ãÊìç‰Ωú-pg">ËøúÁ®ãÊìç‰Ωú PG&lt;/h2>
&lt;h3 id="ÁôªÂΩï">ÁôªÂΩï&lt;/h3>
&lt;p>ÂÖÅËÆ∏ËøúÁ®ãÁôªÂΩï&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">locate postgresql.conf &lt;span class="c1"># ÂÆö‰ΩçÊñá‰ª∂‰ΩçÁΩÆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/postgresql/13/main/postgresql.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">listen_addresses&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span> &lt;span class="c1"># ‰øÆÊîπÂÜÖÂÆπ&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ê∑ªÂä†ÂÆ¢Êà∑Á´ØÈâ¥ÂÆöÊù°ÁõÆ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/postgresql/13/main/pg_hba.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÂÖÅËÆ∏Áî®Êà∑Âú®Êèê‰æõÊúâÊïàÂè£‰ª§Ôºàmd5ÔºâÂêé‰ªéÊüê‰∏™ IP Âú∞ÂùÄÁôªÂΩï&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host all all 0.0.0.0/0 md5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host all all ::0/0 md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>[ÂèØÈÄâ]‰øÆÊîπÂØÜÁ†Å&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">postgres&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="c1"># alter user postgres with password &amp;#39;xxxxxxxx&amp;#39;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER ROLE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊúÄÂêéÈáçÂêØ pg&lt;/p>
&lt;p>‰ΩÜÊòØ‰∏çÁü•ÈÅì‰∏∫Âï•Ôºà‰πüËÆ∏‰ª•ÂêéÂ∞±Áü•ÈÅì‰∫ÜÔºâÊàëÂºÄÂêØ 5432 Á´ØÂè£Êó†ÊïàÔºöufw ÂëΩ‰ª§ËøîÂõûÁªìÊûúÊòæÁ§∫Â∑≤ÂºÄÂêØÔºåÈò≤ÁÅ´Â¢ôËßÑÂàôÊ∑ªÂä†‰∫ÜÔºåip Ê£ÄÊü•Â∑•ÂÖ∑ËøòÊòØÊòæÁ§∫Á´ØÂè£Êú™ÂºÄÊîæ„ÄÇÁÑ∂ÂêéÈªõÈªõÊïô‰∫ÜÊàëÁ´ØÂè£ËΩ¨Âèë&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh -L 127.0.0.1:5432:127.0.0.1:5432 username@hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ëøû‰∏ä‰πãÂêé‰øùÊåÅÊâìÂºÄËøô‰∏™Á™óÂè£ÔºåÊàëÁî® Navicat Ëøû‰∏ä‰∫ÜÊï∞ÊçÆÂ∫ìÔºåÁ¨¨‰∏ÄÊ¨°ËßÅÂà∞‰∫ÜÊï∞ÊçÆÂ∫ìÂà∞Â∫ïÊòØÂï•ÁªìÊûÑ‚Ä¶‚Ä¶ÔºàNavicat ÊòØ‰ªÄ‰πàËØ∑Áúã &lt;a class="link" href="https://www.navicat.com.cn/manual/online_manual/cn/navicat_16/win_manual/#/main_window" target="_blank" rel="noopener"
>Áî®Êà∑ÊâãÂÜå&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
Ôºâ&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307032252841.webp"
loading="lazy"
alt="image"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îî‚îÄ‚îÄ public &lt;span class="c1"># public ÊòØÈªòËÆ§ÁöÑÊï∞ÊçÆÂ∫ìÊ®°ÂºèÔºàschemaÔºâ„ÄÇ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™Ê®°ÂºèÔºåËÄåÊØè‰∏™Ê®°ÂºèÂèàÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™Ë°®„ÄÅËßÜÂõæ„ÄÅÂáΩÊï∞Á≠âÂØπË±°.schema ÊòØ‰∏ÄÁßçÈÄªËæëÂÆπÂô®ÔºåÁî®‰∫éÁªÑÁªáÂíåÁÆ°ÁêÜÊï∞ÊçÆÂ∫ìÂØπË±°„ÄÇÂÆÉÂèØ‰ª•Â∏ÆÂä©Âú®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠ÂØπ‰∏çÂêåÁöÑÂØπË±°ËøõË°åÂàÜÁ±ªÂíåÂàÜÁªÑ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ Tables &lt;span class="c1"># Ë°®ÊòØÂ≠òÂÇ®Êï∞ÊçÆÁöÑÂü∫Êú¨ÂØπË±°ÔºåÁ±ª‰ºº‰∫éÁîµÂ≠êË°®Ê†ºÊàñÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®Ê†º„ÄÇÂÆÉ‰ª¨Áî±Ë°åÂíåÂàóÁªÑÊàêÔºåÁî®‰∫éÂ≠òÂÇ®ÂíåÁªÑÁªáÊï∞ÊçÆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ Views &lt;span class="c1"># ËßÜÂõæÊòØËôöÊãüË°®ÔºåÊòØÊ†πÊçÆÂ≠òÂÇ®Âú®ÂÖ∂‰ªñË°®‰∏≠ÁöÑÊï∞ÊçÆÂÆö‰πâÁöÑÊü•ËØ¢ÁªìÊûú„ÄÇËßÜÂõæÂèØ‰ª•ÁÆÄÂåñÂ§çÊùÇÊü•ËØ¢ÔºåÂπ∂Êèê‰æõ‰∏ÄÁßçÊñπÂºèÊù•ËÆøÈóÆÂíå‰ΩøÁî®Êï∞ÊçÆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ Materialized Views &lt;span class="c1"># ÊùêÊñôÂåñËßÜÂõæÊòØ‰∏ÄÁßçÁâπÊÆäÁ±ªÂûãÁöÑËßÜÂõæÔºåÂÆÉÂú®ÂàõÂª∫Êó∂Â∞ÜÊü•ËØ¢ÁªìÊûúÁºìÂ≠ò‰∏∫ÂÆûÈôÖÁöÑË°®„ÄÇ‰∏éÊôÆÈÄöËßÜÂõæ‰∏çÂêåÔºåÊùêÊñôÂåñËßÜÂõæÁöÑÂÜÖÂÆπÂú®Êü•ËØ¢Êó∂‰∏ç‰ºöÂÜçÊ¨°ËÆ°ÁÆóÔºåËÄåÊòØ‰ΩøÁî®È¢ÑÂÖàËÆ°ÁÆóÁöÑÁªìÊûú&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ Functions &lt;span class="c1"># ÂáΩÊï∞ÊòØ‰∏ÄÊÆµÂ∞ÅË£Ö‰∫ÜÁâπÂÆöÂäüËÉΩÁöÑÂèØÈáçÁî®‰ª£Á†ÅÂùó„ÄÇÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂáΩÊï∞Áî®‰∫éÊâßË°åÁâπÂÆöÁöÑËÆ°ÁÆó„ÄÅÂ§ÑÁêÜÊï∞ÊçÆÊàñËøîÂõûÁªìÊûú&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ Queries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ¬† ‚îî‚îÄ‚îÄ Backups
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="Ëß£ÂÜ≥Êï∞ÊçÆÂ∫ìÂ¢ûÈïøËøáÂø´ÁöÑÈóÆÈ¢òÂà∞Â∫ïËß£ÂÜ≥‰∫ÜÊ≤°ÊúâÂë¢">Ëß£ÂÜ≥Êï∞ÊçÆÂ∫ìÂ¢ûÈïøËøáÂø´ÁöÑÈóÆÈ¢òÔºàÂà∞Â∫ïËß£ÂÜ≥‰∫ÜÊ≤°ÊúâÂë¢ÔºüÔºâ&lt;/h3>
&lt;p>ÂâçÊèêÔºöÂ§á‰ªΩÊï∞ÊçÆÂ∫ì&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Â§á‰ªΩ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">777&lt;/span> /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su - postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql -U postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">postgres&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="c1"># \! pg_dump pleroma -f /pleromabackup/pleroma.pgdump&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ê£ÄÊü•Â§á‰ªΩÁõÆÂΩïÂ§ßÂ∞è&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>xxx@xxx pleromabackup&lt;span class="o">]&lt;/span>&lt;span class="c1"># du -hs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">341M .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü **Êü•ËØ¢ÊâÄÊúâË°®ÁöÑË°åÊï∞Ôºö**ÂàõÂª∫‰∏Ä‰∏™ &lt;code>count_em_all&lt;/code> ÂáΩÊï∞ÔºåÁÑ∂ÂêéË∞ÉÁî®ÂÆÉËé∑ÂæóÂáÜÁ°ÆÁöÑÁªüËÆ°‰ø°ÊÅØ&lt;/p>
&lt;ol>
&lt;li>ÂàõÂª∫Ôºö&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TYPE&lt;/span> &lt;span class="n">table_count&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">table_name&lt;/span> &lt;span class="nb">TEXT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num_rows&lt;/span> &lt;span class="nb">INTEGER&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">OR&lt;/span> &lt;span class="k">REPLACE&lt;/span> &lt;span class="k">FUNCTION&lt;/span> &lt;span class="n">count_em_all&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="k">RETURNS&lt;/span> &lt;span class="k">SETOF&lt;/span> &lt;span class="n">table_count&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">DECLARE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> the_count RECORD;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> t_name RECORD;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r table_count%ROWTYPE;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">BEGIN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FOR t_name IN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> SELECT
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> c.relname
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FROM
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> pg_catalog.pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> WHERE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> c.relkind = &amp;#39;&amp;#39;r&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> AND n.nspname = &amp;#39;&amp;#39;public&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> ORDER BY 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> LOOP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FOR the_count IN EXECUTE &amp;#39;&amp;#39;SELECT COUNT(*) AS &amp;#34;count&amp;#34; FROM &amp;#39;&amp;#39; || t_name.relname
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> LOOP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> END LOOP;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r.table_name := t_name.relname;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r.num_rows := the_count.count;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> RETURN NEXT r;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> END LOOP;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> RETURN;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">END;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="k">LANGUAGE&lt;/span> &lt;span class="n">plpgsql&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Ë∞ÉÁî®&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_em_all&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">r&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">num_rows&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁªìÊûúÔºö&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table_name&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">num_rows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--------------------------------------------+----------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">171772&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">120664&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags_objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">38433&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">22054&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">7719&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">deliveries&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">5420&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter_cache&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">876&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">notifications&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">570&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_authorizations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">479&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">474&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">following_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">472&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">schema_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">302&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apps&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">83&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">53&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participation_recipient_ships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">36&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instances&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">34&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_jobs&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmarks&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">backups&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moderation_log&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password_reset_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lists&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_peers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcements&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filters&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcement_read_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migration_failed_ids&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mfa_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chats&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chat_message_references&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">push_subscriptions&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">registrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">report_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scheduled_activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thread_mutes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_invite_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">42&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü &lt;strong>Êü•ËØ¢ÊâÄÊúâË°®ÁöÑÊÄªÂ§ßÂ∞è&lt;/strong>ÔºàÊã¨Ë°®Êï∞ÊçÆÊñá‰ª∂„ÄÅÁ¥¢ÂºïÊñá‰ª∂„ÄÅTOASTË°®„ÄÅFree Space MapÁ≠âÂØπË±°ÁöÑÂ§ßÂ∞èÔºâ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="n">relname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pg_size_pretty&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pg_total_relation_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">relid&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">size_mb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">pg_stat_user_tables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">pg_total_relation_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">relid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">relname&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">size_mb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--------------------------------------------+---------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">266&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">258&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_jobs&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">100&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">64&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags_objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">4096&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1288&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">deliveries&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">960&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">592&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_authorizations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">344&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">notifications&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">240&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">following_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">232&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter_cache&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">208&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apps&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">176&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instances&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">96&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">88&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lists&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_peers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">schema_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">64&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participation_recipient_ships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">56&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">56&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">backups&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmarks&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filters&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scheduled_activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">registrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chat_message_references&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moderation_log&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password_reset_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">24&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">push_subscriptions&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">24&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_invite_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mfa_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcement_read_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thread_mutes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcements&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">report_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chats&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migration_failed_ids&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">42&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂàóÂá∫Ë°åÊï∞Âíå size ÊéíÂâç‰∫îÁöÑË°®&lt;/p>
&lt;p>üåü &lt;strong>activities Ë°®&lt;/strong>&lt;/p>
&lt;p>type Â≠óÊÆµÁöÑÊâÄÊúâÂÄº&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="k">DISTINCT&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">?&lt;/span>&lt;span class="k">column&lt;/span>&lt;span class="o">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Block&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Announce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Delete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Undo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Create&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">EmojiReact&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Remove&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Like&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Reject&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Accept&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">14&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂàóÂá∫ÂÄºÊòØ Announce ÁöÑÊâÄÊúâË°å&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Announce&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pleroma_ctl&lt;/span> &lt;span class="k">database&lt;/span> &lt;span class="k">vacuum&lt;/span> &lt;span class="k">full&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;actor&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="k">type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;updated_at&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="s">&amp;#34;activities&amp;#34;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="s">&amp;#34;objects&amp;#34;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ON&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">COALESCE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;to&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;cc&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;updated_at&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü users Ë°®ÈáåÊúâÂæàÂ§öÂæàÂ§öÂè™Êúâ nickname ÁöÑÁî®Êà∑ÔºåÂÆÉ‰ª¨ÊâÄÂú®ÂÆû‰æãÊòØÁúüÂÆûÁöÑÔºå‰ΩÜÊòØ ID ‰∏çÊòØÔºåÊàëÊääËøô‰∫õË°åÂà†‰∫ÜÔºåÊöÇÊó∂ËøòÊ≤°Âá∫ÈóÆÈ¢ò&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">name&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">name&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü Âà†Èô§‰∫Ü‰∏Ä‰∏™ bot ÁöÑËÆ∞ÂΩï&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://xx.ca/users/xxxBot&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://xx.ca/users/xxxBot&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">485&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü Âà†Èô§‰∫Ü activities Ë°® 2023-06-15 ‰πãÂâç„ÄÅ‰∏éÊàëÊó†ËÆ®ËÆ∫ÂÖ≥Á≥ª„ÄÅ‰π¶Á≠æ‰ª•Â§ñÁöÑÂÜÖÂÆπ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">activity_id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">bookmarks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">AND&lt;/span> &lt;span class="n">inserted_at&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="s1">&amp;#39;2023-06-15&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">AND&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">SELECT&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">o&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">COALESCE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;to&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;cc&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">89430&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>üåü Âà†Èô§‰∫Ü objects Ë°®‰∏é‰ª•‰∏äÂÜÖÂÆπÂØπÂ∫îÁöÑË°å&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÂàõÂª∫‰∏Ä‰∏™‰∏¥Êó∂Ë°® temp_objects
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Êù•Â≠òÂÇ®ÈÇ£‰∫õÂú® activities Ë°®‰∏≠Êâæ‰∏çÂà∞ÂØπÂ∫îË°åÁöÑ objects Ë°®ÁöÑË°å
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">CREATE&lt;/span> &lt;span class="k">TEMPORARY&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">temp_objects&lt;/span> &lt;span class="k">AS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="mf">128652&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Êä•ÈîôÔºö
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÊâßË°åÂà†Èô§Êìç‰ΩúÊó∂ËøùÂèç‰∫ÜÂ§ñÈîÆÁ∫¶Êùü
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">objects Ë°®‰∏≠ÁöÑÊüê‰∫õË°å‰ªçÁÑ∂Ë¢´ deliveries Ë°®ÂºïÁî®ÔºåÂõ†Ê≠§Êó†Ê≥ïÁõ¥Êé•Âà†Èô§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">deliveries Ë°®ÊòØÁî®‰∫éË∑üË∏™Ê∂àÊÅØ‰º†ÈÄíÁöÑË°®ÔºåÈÄöÂ∏∏Âú® ActivityPub ÂçèËÆÆÁöÑÂÆûÁé∞‰∏≠‰ΩøÁî®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÂÆÉËÆ∞ÂΩï‰∫ÜÊ∂àÊÅØ‰º†ÈÄíÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºå‰æãÂ¶ÇÂèëÈÄÅÊñπ„ÄÅÊé•Êî∂Êñπ„ÄÅÊ∂àÊÅØÂÜÖÂÆπÁ≠â
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÊØèÊù°ËÆ∞ÂΩï‰ª£Ë°®‰∏ÄÊ¨°Ê∂àÊÅØ‰º†ÈÄíÊàñ‰∫§‰∫í„ÄÇ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">Âú® Pleroma ‰∏≠Ôºådeliveries Ë°®Áî®‰∫éÂ≠òÂÇ®Ê∂àÊÅØÁöÑ‰º†ÈÄíÁä∂ÊÄÅÂíåÁõ∏ÂÖ≥‰ø°ÊÅØÔºå‰ª•Á°Æ‰øùÊ∂àÊÅØËÉΩÂ§üÊ≠£Á°ÆÂú∞‰º†ÈÄíÁªôÁõÆÊ†áÁî®Êà∑
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÂÆÉ‰∏é objects Ë°®Âíå activities Ë°®‰πãÈó¥ÂèØËÉΩÂ≠òÂú®Â§ñÈîÆÂÖ≥Á≥ªÔºåÁî®‰∫é‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ERROR&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">update&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">delete&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;objects&amp;#34;&lt;/span> &lt;span class="n">violates&lt;/span> &lt;span class="k">foreign&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="k">constraint&lt;/span> &lt;span class="s">&amp;#34;deliveries_object_id_fkey&amp;#34;&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;deliveries&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DETAIL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">Key&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">75072&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">still&lt;/span> &lt;span class="n">referenced&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;deliveries&amp;#34;&lt;/span>&lt;span class="mf">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÊâÄ‰ª•ÂÖàÂà†Èô§Ë¢´ deliveries Ë°®ÂºïÁî®ÁöÑË°å
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">deliveries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">user_id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">6372&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ÁªßÁª≠ÊâßË°åÂà†Èô§Êìç‰ΩúÂπ∂Âà†Èô§‰∏¥Êó∂Ë°®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">128652&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DROP&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span> &lt;span class="k">TABLE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÊúÄÂêé &lt;code>su pleroma -s $SHELL -lc &amp;quot;./bin/pleroma_ctl database vacuum full &amp;quot;&lt;/code>Ôºå‰ΩÜÊòØÔºÅSQL ÂëΩ‰ª§ÊúâÈóÆÈ¢òÔºåÂà†‰∫ÜÊàëÂ•ΩÂ§öÂòüÔºåÂëúÂëúÂëúÂì≠ÁùÄÂÄíÂú∞„ÄÇÈáçÊñ∞Áúã‰∫Ü‰∏Ä‰∏ãÊï∞ÊçÆÂ∫ìÂ§ßÂ∞èÔºåÁé∞Âú®ÂÄíÊòØÂèòÂæóËø∑‰Ω†‰∫ÜÔºå164 MB„ÄÇ‰ΩÜÊòØËøô‰∏ÄÂàáÁúüÁöÑÂÄºÂæóÂêó‚Ä¶‚Ä¶ÂÆåÂÖ®Âú®ÊàëËÆ°ÂàíÂ§ñÁöÑ‚Ä¶‚Ä¶&lt;/p>
&lt;h3 id="Â∏∏Áî®-psql-ÂëΩ‰ª§">Â∏∏Áî® psql ÂëΩ‰ª§&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">ÊåáÂÆöÁî®Êà∑ËøûÊé•&lt;/span>&lt;span class="n">PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">ÊåáÂÆöÊï∞ÊçÆÂ∫ìËøûÊé•&lt;/span>&lt;span class="n">PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">127.0.0.1&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mf">5432&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">pg&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">ËøûÊé•Âà∞Êú¨Âú∞‰∏ªÊú∫Ôºà&lt;/span>&lt;span class="mf">127.0.0.1&lt;/span>&lt;span class="err">ÔºâÁöÑ&lt;/span> &lt;span class="n">PostgreSQL&lt;/span> &lt;span class="err">Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®Ôºå‰ΩøÁî®Áî®Êà∑Âêç&lt;/span> &lt;span class="n">pg&lt;/span> &lt;span class="err">ËøûÊé•Âà∞Âêç‰∏∫&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="err">ÁöÑÊï∞ÊçÆÂ∫ì&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">du&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">Êü•ÁúãÊâÄÊúâÁî®Êà∑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">Êü•ÁúãÊâÄÊúâÊï∞ÊçÆÂ∫ì&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">dbname&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">ÂàáÊç¢Âà∞Êï∞ÊçÆÂ∫ì&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">dt&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ìÁöÑÊâÄÊúâË°®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">Êü•ÁúãÊåáÂÆöË°®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span> &lt;span class="n">data_directory&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">Êü•ÁúãÊï∞ÊçÆÁõÆÂΩï&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">ÈÄÄÂá∫‰∫§‰∫íÊü•ËØ¢Ê®°Âºè&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vue3 | ToDoList</title><link>https://falasool.github.io/2023/vue3-todolist/</link><pubDate>Wed, 21 Jun 2023 01:29:15 +0800</pubDate><guid>https://falasool.github.io/2023/vue3-todolist/</guid><description>&lt;h2 id="ÂÆûÁé∞ÂäüËÉΩ">ÂÆûÁé∞ÂäüËÉΩ&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Â±ïÁ§∫‰ªªÂä°ÁöÑÂàóË°®&lt;/p>
&lt;ul>
&lt;li>‰ΩøÁî® &lt;code>v-for&lt;/code> Âú®Ê®°Êùø‰∏≠Âæ™ÁéØÊ∏≤Êüì‰ªªÂä°È°πÁªÑ‰ª∂ÔºåÂπ∂Ê†πÊçÆ‰ªªÂä°ÁöÑÁä∂ÊÄÅÔºàÂÆåÊàêÊàñÊú™ÂÆåÊàêÔºâËøõË°å‰∏çÂêåÁöÑÂ±ïÁ§∫Ê†∑Âºè&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Êñ∞Â¢û todo&lt;/p>
&lt;ul>
&lt;li>&lt;code>v-model&lt;/code> ÂÆûÁé∞ËæìÂÖ•Ê°ÜÂíåÊï∞ÊçÆÁöÑÂèåÂêëÁªëÂÆö&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>‰øÆÊîπ todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Âà†Èô§ todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÂÖ®ÈÄâ/ÂèñÊ∂àÂÖ®ÈÄâ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÁªüËÆ°‰ªªÂä°&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÈöêËóèÂ∑≤ÂÆåÊàê todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Êú¨Âú∞ÂÇ®Â≠ò&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>ËøõÈò∂&lt;/p>
&lt;ol>
&lt;li>Á∑®ËºØ List È†ÜÂ∫è&lt;/li>
&lt;li>Â∞áÂÆåÊàêÁöÑÈ†ÖÁõÆÁßªËá≥FinishÂçÄÂüüÔºå‰∏¶‰∏îÂ∞áÂ≠óÈ´îÊîπÊàêÂà™Èô§Á∑öÊïàÊûú&lt;/li>
&lt;li>Â¢ûÂä† Icon ‰ª•ÂèäÈñãÂ†¥ÂãïÁï´&lt;/li>
&lt;li>Ë®≠ÂÆöÊó•ÊúüËàáÊôÇÈñìÊé®Êí≠&lt;/li>
&lt;/ol>
&lt;h2 id="È°πÁõÆÂÆâË£Ö">È°πÁõÆÂÆâË£Ö&lt;/h2>
&lt;p>Áî® npm Âíå vite Êñ∞Âª∫È°πÁõÆ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">npm init vite-app ToDoList
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ËøõÂÖ•È°πÁõÆ„ÄÅÂÆâË£Ö‰æùËµñ„ÄÅÂêØÂä®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ToDoList
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="Â∑•Á®ãÁõÆÂΩïÁªìÊûÑ">Â∑•Á®ãÁõÆÂΩïÁªìÊûÑ&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îú‚îÄ‚îÄ index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îú‚îÄ‚îÄ node_modules &lt;span class="c1"># È°πÁõÆ‰æùËµñ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îú‚îÄ‚îÄ package-lock.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îú‚îÄ‚îÄ package.json &lt;span class="c1"># Â≠òÊîæ‰æùËµñÂåÖÁÆ°ÁêÜÂèäÂëΩ‰ª§ÁÆ°ÁêÜ‰ø°ÊÅØÊñá‰ª∂&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îú‚îÄ‚îÄ public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ favicon.ico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">‚îî‚îÄ‚îÄ src &lt;span class="c1"># Â≠òÊîævueÊñá‰ª∂&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ App.vue &lt;span class="c1"># È°πÁõÆÁöÑrootÁªÑ‰ª∂ÔºåÁî®Êù•ÂºïÂÖ•ÂÖ∂ÂÆÉÊ®°Âùó&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ components &lt;span class="c1"># Â≠òÊîæËá™ÂÆö‰πâÁöÑÂÖ¨ÂÖ±ÁªÑ‰ª∂Ôºà=ÈùûË∑ØÁî±ÁªÑ‰ª∂Ôºâ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Helloworld.vue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îú‚îÄ‚îÄ index.css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ‚îî‚îÄ‚îÄ main.js &lt;span class="c1"># ÂÖ•Âè£Êñá‰ª∂ÔºåÁî®‰∫éÂàùÂßãÂåñvueÂÆû‰æã&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ÊÄùË∑Ø">ÊÄùË∑Ø&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>ÂÖàÊê≠Âª∫Â•ΩÊ°ÜÊû∂ÔºöÂÜôÊ≠ªÊï∞ÊçÆÁúãÈ°µÈù¢ÊïàÊûúÂπ∂Ë∞ÉÊï¥&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÁÑ∂ÂêéÊää‰ª£Á†ÅÊãÜÂàÜËøõ‰∏â‰∏™ÁªÑ‰ª∂ÔºöHeader„ÄÅList„ÄÅFooterÔºàÊ†áÈ¢òÂíå‰ªªÂä°ËæìÂÖ•Ê°Ü„ÄÅ‰ªªÂä°ÂàóË°®È°π„ÄÅÊåâÈíÆÈÄâÊã©È°πÂíåËÆ°Êï∞Ôºâ&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ÂÜôJSÔºåÂπ∂Êõ¥Êç¢Ê®°ÊùøÈ°µÈù¢‰∏≠ÁöÑÊï∞ÊçÆÔºåÁî®Âä®ÊÄÅÁöÑÊï∞ÊçÆ‰ª£Êõø„ÄÇÂú®setup()ÂÖ•Âè£ÂáΩÊï∞‰∏≠ÂÜôÊï∞ÊçÆÊ∫êÂíåË¶ÅÂÆûÁé∞ÂäüËÉΩÁöÑÂáΩÊï∞&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="ÂÆûÁé∞Ê≠•È™§">ÂÆûÁé∞Ê≠•È™§&lt;/h2>
&lt;h3 id="html">HTML&lt;/h3>
&lt;p>Ëøô‰∏çÊòØÊúÄÁªàÁªìÊûÑÔºåÂêéÈù¢Êúâ‰øÆÊîπ&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307121504274.webp"
loading="lazy"
alt="image"
>&lt;/p>
&lt;h3 id="css">CSS&lt;/h3>
&lt;details>
&lt;summary>ÂÆâË£ÖÂíåÈÖçÁΩÆ TailwindCSS&lt;/summary>
&lt;p>Âú®VueÁöÑÊ†πÁõÆÂΩï‰∏ãÔºåÂÆâË£Ö Tailwind ÂèäÂÖ∂‰æùËµñÈ°πÔºàPostCSS &amp;amp; auto-prefixerÔºâ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install -D tailwindcss postcss autoprefixer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÁîüÊàêÈÖçÁΩÆÊñá‰ª∂Âπ∂Ê∑ªÂä†ÊâÄÊúâÊ®°ÊùøÊñá‰ª∂ÁöÑË∑ØÂæÑ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npx tailwindcss init -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//tailwind.config.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> content: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;./index.html&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;./src/**/*.{vue,js,ts,jsx,tsx}&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> theme: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> extend: &lt;span class="o">{}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> plugins: &lt;span class="o">[]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂàõÂª∫‰∏Ä‰∏™&lt;code>tailwind.css&lt;/code>Ê†∑ÂºèÊñá‰ª∂ÔºåÁî®‰∫éÂàùÂßãÂåñÂπ∂ÂºïÂÖ•&lt;code>tailwindcss&lt;/code>ÁöÑÂü∫Á°ÄÊ†∑Âºè&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">Â§çÂà∂‰ª£Á†Å&lt;/span>&lt;span class="c">/* /src/tailwindcss.css*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">base&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">components&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">utilities&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ÂØºÂÖ•&lt;code>css/tailwindcss.css&lt;/code>Âà∞&lt;code>main.js&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">// src/main.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import { createApp } from &amp;#39;vue&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import App from &amp;#39;./App.vue&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ import &amp;#34;./tailwind.css&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createApp(App).mount(&amp;#39;#app&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/details>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202308290007098.webp"
loading="lazy"
alt="image"
>&lt;/p></description></item></channel></rss>
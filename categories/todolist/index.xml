<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ToDoList on Rubber Duck's Bizarre Adventure</title><link>https://falasool.github.io/categories/todolist/</link><description>Recent content in ToDoList on Rubber Duck's Bizarre Adventure</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Mon, 31 Jul 2023 16:22:45 +0800</lastBuildDate><atom:link href="https://falasool.github.io/categories/todolist/index.xml" rel="self" type="application/rss+xml"/><item><title>Migrant ot Akkoma</title><link>https://falasool.github.io/2023/migrant-oto-akkoma/</link><pubDate>Mon, 31 Jul 2023 16:22:45 +0800</pubDate><guid>https://falasool.github.io/2023/migrant-oto-akkoma/</guid><description>&lt;h2 id="å‡†å¤‡">å‡†å¤‡&lt;/h2>
&lt;p>ğŸŒŸå¤‡ä»½&lt;/p>
&lt;p>â¡ï¸è´¦å·ï¼š Settings &amp;ndash; Data import/exportï¼Œå…¨éƒ¨å¯¼å‡º&lt;/p>
&lt;p>ä»¥ä¸‹æ–‡ä»¶å¤¹ç”¨ FTP å®¢æˆ·ç«¯ï¼ˆFileZillaï¼‰å¤‡ä»½åˆ°ç”µè„‘&lt;/p>
&lt;p>â¡ï¸æ•°æ®åº“ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir -p /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">777&lt;/span> /pleromabackup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç™»å…¥æ•°æ®åº“&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">su&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">postgres&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">postgres&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="o">!&lt;/span> &lt;span class="n">pg_dump&lt;/span> &lt;span class="n">pleroma&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">pleromabackup&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pleroma&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">pgdump&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>â¡ï¸Pleroma é…ç½®ï¼š/etc/pleroma/&lt;/p>
&lt;p>â¡ï¸Pleroma é™æ€æ–‡ä»¶ï¼š/var/lib/pleroma&lt;/p>
&lt;p>ğŸŒŸæŠŠåŸŸåçš„IPæŒ‡å‘æ–°æœåŠ¡å™¨&lt;/p>
&lt;h2 id="æ­å»ºè¿‡ç¨‹">æ­å»ºè¿‡ç¨‹&lt;/h2>
&lt;p>å®‰è£…ä¾èµ–&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt upgrade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install curl unzip libncurses5 postgresql postgresql-contrib nginx libmagic-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install imagemagick ffmpeg libimage-exiftool-perl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®‰è£…æœ¬ä½“ï¼šæ³¨æ„ Ubuntu22 çš„FLAVOURå˜é‡æ˜¯amd64-ubuntu-jammy&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">adduser --system --shell /bin/false --home /opt/akkoma akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">FLAVOUR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;amd64-ubuntu-jammy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">curl &amp;#39;https://akkoma-updates.s3-website.fr-par.scw.cloud/stable/akkoma-&lt;/span>&lt;span class="nv">$FLAVOUR&lt;/span>&lt;span class="s2">.zip&amp;#39; -o /tmp/akkoma.zip
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">unzip /tmp/akkoma.zip -d /tmp/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">mv /tmp/release/* /opt/akkoma
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">rmdir /tmp/release
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">rm /tmp/akkoma.zip
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/akkoma/uploads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /var/lib/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /var/lib/akkoma/static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /var/lib/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /etc/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R akkoma /etc/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl instance gen --output /etc/akkoma/config.exs --output-psql /tmp/setup_db.psql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su postgres -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;psql -f /tmp/setup_db.psql&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma_ctl migrate&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma daemon&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sleep &lt;span class="m">20&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> curl http://localhost:4000/api/v1/instance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s &lt;span class="nv">$SHELL&lt;/span> -lc &lt;span class="s2">&amp;#34;./bin/pleroma stop&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”³è¯·SSLè¯ä¹¦ï¼šå‚è€ƒ&lt;a class="link" href="https://ponder.lol/2023/new-pleroma-isntance-on-debian11/#%E9%80%9A%E9%85%8D%E7%AC%A6-ssl-%E8%AF%81%E4%B9%A6%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F" target="_blank" rel="noopener"
>é€šé…ç¬¦ SSL è¯ä¹¦è‡ªåŠ¨ç»­æœŸ&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>Nginxï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">cp /opt/akkoma/installation/akkoma.nginx /etc/nginx/sites-available/akkoma.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¿®æ”¹æ‰€æœ‰ example.tld ä¸ºå‡†å¤‡å¥½çš„åŸŸå&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim /etc/nginx/sites-available/akkoma.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /opt/akkoma/installation/akkoma.service /etc/systemd/system/akkoma.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl &lt;span class="nb">enable&lt;/span> akkoma
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ã€å®‰è£…å‰ç«¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd /opt/akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su akkoma -s $SHELL -lc &amp;#34;./bin/pleroma_ctl user new admin cyouike@duck.com --admin&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./bin/pleroma_ctl frontend install pleroma-fe --ref stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./bin/pleroma_ctl frontend install admin-fe --ref stable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æœ¬åœ°å®šæ—¶å¤‡ä»½">æœ¬åœ°å®šæ—¶å¤‡ä»½&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mkdir /opt/local_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/local_backup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim backup.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è„šæœ¬å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> /etc/profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”backup to local directoryâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="sb">`&lt;/span>date +&lt;span class="s2">&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;now starting backup&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;stop akkoma&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl stop akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;0.create a backup day directory&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> -d /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">``&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Floder&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;already exists.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;New floder&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod +777 /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;1.dump database&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo -Hu postgres pg_dump -d akkoma --format&lt;span class="o">=&lt;/span>custom -f /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>/akkoma.pgdump
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;2. copy upload &amp;amp; static folder&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r /var/lib/akkoma/static /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp -r /var/lib/akkoma/uploads /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;3. copy config file&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cp /etc/akkoma/config.exs /opt/local_backup/&lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;restart akkoma&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start akkoma
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="sb">`&lt;/span>date +&lt;span class="s2">&amp;#34;%Y-%m-%d %H:%M:%S&amp;#34;&lt;/span>&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;finished&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Backup for&amp;#34;&lt;/span> &lt;span class="sb">`&lt;/span>date +%Y%m%d&lt;span class="sb">`&lt;/span> &lt;span class="s2">&amp;#34;done!&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /opt/local_backup/backuplog.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ é™¤è¶…è¿‡15å¤©çš„å¤‡ä»½&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">vim clear.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">find /opt/local_backup/ -type d -mtime +15 -exec rm -rf &lt;span class="o">{}&lt;/span> &lt;span class="se">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è®¾ç½®å®šæ—¶ä»»åŠ¡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">crontab -e
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">00&lt;/span> &lt;span class="m">04&lt;/span> * * &lt;span class="m">6&lt;/span> root /bin/bash /opt/local_backup/backup.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">00&lt;/span> &lt;span class="m">23&lt;/span> &lt;span class="m">1&lt;/span> * * root /bin/bash /opt/local_backup/clear.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‚è€ƒ--è‡´è°¢">å‚è€ƒ &amp;amp; è‡´è°¢&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.akkoma.dev/stable/installation/otp_en/#detecting-flavour" target="_blank" rel="noopener"
>Installing on Linux using OTP releases&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>&lt;a class="link" href="https://im.happytoo.cyou/posts/2301%E5%A4%87%E4%BB%BDpleroma/#%E6%9C%AC%E5%9C%B0%E5%AE%9A%E6%97%B6%E5%A4%87%E4%BB%BD" target="_blank" rel="noopener"
>å¤‡ä»½pleromaè®°å½•&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.akkoma.dev/stable/administration/CLI_tasks/instance/#managing-instance-configuration" target="_blank" rel="noopener"
>Managing instance configuration&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p></description></item><item><title>iTerm2 é…ç½®</title><link>https://falasool.github.io/2023/iterm2/</link><pubDate>Tue, 18 Jul 2023 18:41:59 +0800</pubDate><guid>https://falasool.github.io/2023/iterm2/</guid><description>&lt;p>SSH è¿œç¨‹è¿æ¥é…ç½®&lt;/p>
&lt;p>åˆ›å»ºç™»å½•è„šæœ¬ &lt;code>/.ssh/remote-login-vps.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/usr/bin/expect
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">set&lt;/span> timeout &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spawn ssh -p &lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 0&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 1&lt;span class="o">]&lt;/span>@&lt;span class="o">[&lt;/span>lindex &lt;span class="nv">$argv&lt;/span> 2&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">expect &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;(yes/no)?&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>send &lt;span class="s2">&amp;#34;yes\n&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>exp_continue&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;password:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>send &lt;span class="s2">&amp;#34;[lindex &lt;/span>&lt;span class="nv">$argv&lt;/span>&lt;span class="s2"> 3]\n&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">interact
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆäºˆæ‰§è¡Œæƒé™ &lt;code>chmod +x remote-login-vps.sh&lt;/code>&lt;/p>
&lt;p>è¿›å…¥iTerm2 -&amp;gt; preference -&amp;gt; Profilesï¼Œåˆ›å»ºä¸€ä¸ªProfileï¼Œåœ¨ General - Command - Send text at start è¾“å…¥&lt;code>~/.ssh/remote-login-vps.sh 22 ç”¨æˆ· ip å¯†ç &lt;/code>&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307181916887.webp"
loading="lazy"
alt="image (1)"
>&lt;/p></description></item><item><title>ç½‘ç»œé€šä¿¡è¿‡ç¨‹ + Vmessæ­å»º</title><link>https://falasool.github.io/2023/about-dns-principle-and-vpn/</link><pubDate>Sun, 16 Jul 2023 21:31:10 +0800</pubDate><guid>https://falasool.github.io/2023/about-dns-principle-and-vpn/</guid><description>&lt;h2 id="ç½‘ç»œé€šä¿¡çš„åŸºæœ¬è¿‡ç¨‹">ç½‘ç»œé€šä¿¡çš„åŸºæœ¬è¿‡ç¨‹&lt;/h2>
&lt;blockquote>
&lt;p>è®¾è®¡å‡ºå±‚çº§ç»“æ„ã€‚å‡ºå»æ—¶ä¸æ–­åŠ ç ï¼ŒåŠ ä¿¡æ¯ï¼ŒåŠ æ ‡ç­¾ï¼Œåˆ°è¾¾æ—¶ï¼Œä¸æ–­è§£ç ï¼Œå‡ä¿¡æ¯ï¼Œè§£åŒ…&lt;/p>
&lt;/blockquote>
&lt;h3 id="dns-è§£æ">DNS è§£æ&lt;/h3>
&lt;p>è¾“å…¥åŸŸå/ip &amp;ndash; æ£€æŸ¥æµè§ˆå™¨/æœ¬åœ°ç¼“å­˜ï¼Œhostsæ–‡ä»¶ &amp;ndash; å‘è¯·æ±‚åˆ°ç”µè„‘çš„DNSæœåŠ¡å™¨ï¼ˆOSI ä¸ƒå±‚/äº”å±‚æ¨¡å‹ï¼‰ &amp;ndash; DNS æ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œç”¨äºè¯·æ±‚åŸŸå/ipï¼Œè¯·æ±‚ä¸€å±‚ä¸€å±‚ä¸‹ä¼ ï¼Œåˆ°ç‰©ç†å±‚ï¼ˆç½‘å¡æ¥å£ï¼‰&amp;ndash; è¯·æ±‚åˆ°çš„æ•°æ®ç»™ä¼ è¾“å±‚ &amp;ndash; ä¼ è¾“å±‚å°è£…åº”ç”¨å±‚çš„æ•°æ®ï¼ˆæºç«¯å£ã€ç›®æ ‡ç«¯å£ï¼‰ä¸ºæ•°æ®åŒ… &amp;ndash; ä¸‹ä¼  &amp;ndash; ç½‘ç»œå±‚ã€åŒæ ·å°è£…ï¼ˆæºipã€ç›®æ ‡ipï¼‰&amp;ndash; å½“ç”µè„‘æ‰¾ä¸åˆ°è¿™ä¸ªipï¼ˆä¸åœ¨èŒƒå›´å†…ï¼‰ä¼šå‘è¯·æ±‚ç»™ç½‘å…³ï¼ˆè·¯ç”±å™¨ï¼‰&lt;/p>
&lt;p>æ•°æ®é¡ºç€ç‰©ç†å±‚åˆ°ç½‘å¡æ¥å£ - ç½‘çº¿å‘å‡ºåˆ°äº¤æ¢æœºï¼ˆäºŒå±‚è®¾å¤‡ï¼‰ &amp;ndash; è½¬å‘åˆ°è·¯ç”±å™¨ï¼ˆä¸‰å±‚è®¾å¤‡ï¼‰ï¼Œæ¥æ”¶æ•°æ®åŒ…ï¼Œä¼ åˆ°ç½‘ç»œå±‚ &amp;ndash; å› ä¸ºç›®æ ‡ipä¸åœ¨å±€åŸŸç½‘å†…ï¼Œæ‰€ä»¥ä¼šè½¬å‘å‡ºå»ï¼ˆå…¬ç½‘çš„å…¶ä»–è·¯ç”±å™¨ï¼‰&amp;ndash; æŠŠå†…ç½‘ç½‘æ®µNATæ˜ å°„ä¸ºèƒ½åœ¨å…¬ç½‘ä¼ è¾“çš„ip - å‘é€æ•°æ®åŒ…åˆ°DNSæœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£53ï¼‰ï¼ŒDNSæœåŠ¡å™¨æ ¹æ®OSIå±‚å±‚è§£æç›´åˆ°åº”ç”¨å±‚ï¼Œæ‹¿åˆ°è¯·æ±‚çš„æ•°æ®ï¼ˆipï¼‰ï¼Œå¼€å§‹å›ä¼ &lt;/p>
&lt;p>ä¼ è¾“å±‚ï¼ˆ+ç«¯å£ï¼‰ &amp;ndash; ç½‘ç»œå±‚ï¼ˆ+ipï¼‰ &amp;ndash; æ•°æ®é“¾è·¯å±‚ï¼ˆ+MACåœ°å€ï¼‰&amp;ndash; ä»ç‰©ç†ç½‘å£å‡ºå» &amp;ndash;äº’è”ç½‘ &amp;ndash; åˆ°æ­£ç¡®çš„è·¯ç”±å™¨ï¼Œè·¯ç”±å™¨è½¬æ¢IPã€MACã€æ·»åŠ å¤´éƒ¨ &amp;ndash; åå‘é‡å¤ä¸€éå‘å‡ºè¯·æ±‚çš„æ­¥éª¤ï¼Œè®©ç”µè„‘æ”¶åˆ°ç›®æ ‡ç½‘ç«™çš„ip&lt;/p>
&lt;p>OSI ä¸ƒå±‚æ¨¡å‹&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å±‚&lt;/th>
&lt;th>å±‚&lt;/th>
&lt;th>detail&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>åº”ç”¨å±‚&lt;/td>
&lt;td>åº”ç”¨å±‚&lt;/td>
&lt;td>HTTPã€FTP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>è¡¨ç¤ºå±‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>ä¼šè¯å±‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ä¼ è¾“å±‚&lt;/td>
&lt;td>ä¼ è¾“å±‚ï¼ˆç«¯å£ï¼‰&lt;/td>
&lt;td>TCPã€UDP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ç½‘ç»œå±‚&lt;/td>
&lt;td>ç½‘ç»œå±‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ç½‘ç»œæ¥å£å±‚&lt;/td>
&lt;td>æ•°æ®é“¾æ¥å±‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>ç‰©ç†å±‚&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="gfwå·¥ä½œåŸç†">GFWå·¥ä½œåŸç†&lt;/h2>
&lt;p>åº•å±‚åŸå› ï¼šèƒ½çœ‹åˆ°æˆ‘ä»¬çš„æ•°æ®å†…å®¹&lt;/p>
&lt;h3 id="dnsæ±¡æŸ“åŠ«æŒ">DNSæ±¡æŸ“/åŠ«æŒ&lt;/h3>
&lt;p>è®¿é—®Googleï¼Œå…ˆæ£€æŸ¥æœ¬æœºæœ‰æ— ç¼“å­˜Googleçš„ipï¼ŒæŸ¥çœ‹hostsæ–‡ä»¶é‡Œæœ‰æ²¡æœ‰å¯¹google.comæ·»åŠ IPåŸŸåæ˜ å°„å…³ç³»ï¼Œéƒ½æ²¡æœ‰ â¡ï¸ å‘æœ¬æœºé…ç½®çš„DNSæœåŠ¡å™¨å‘DNSè¯·æ±‚ï¼Œè¯·æ±‚Googleçš„ipï¼Œè¿™ä¸ªè¯·æ±‚çš„æ•°æ®åŒ…æ¥åˆ°GFWï¼ˆäº”å±‚è®¾å¤‡ï¼‰æ—¶ä¼šè¢«çœ‹åˆ°å†…å®¹ï¼ˆå‡è®¾æœªè¢«æ‹¦æˆªï¼‰ï¼Œæ¥åˆ°real internetï¼Œåˆ°è¾¾DNSæœåŠ¡å™¨å¹¶å‘å›æ•°æ®åŒ…ï¼Œè¢«GFWè§£åŒ…ï¼Œç¯¡æ”¹æ•°æ®ï¼ˆipåœ°å€ï¼‰åå‘ç»™æœ¬æœºï¼Œæ‰¾ä¸åˆ°å‡ipå¯¹åº”çš„æœåŠ¡å™¨æ‰€ä»¥è®¿é—®ä¸äº†&lt;/p>
&lt;p>è§£å†³ï¼š&lt;/p>
&lt;p>ä¸å‘é€DNSè¯·æ±‚ï¼Œåœ¨hostæ–‡ä»¶æ·»åŠ åŸŸåIPæ˜ å°„å…³ç³»ã€‚å› ä¸ºHTTPåè®®æ˜¯åŸºäºTCPã€è¦å…ˆç”¨TCPå’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥æ‰èƒ½ç”¨HTTPè®¿é—®ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å‘æœåŠ¡å™¨å‘é€ TCP è¯·æ±‚â¬‡ï¸&lt;/p>
&lt;h3 id="tcpé‡ç½®æ”»å‡»">TCPé‡ç½®æ”»å‡»&lt;/h3>
&lt;p>è¿™ä¸ªè¯·æ±‚æ¥åˆ° GFWï¼Œè¢«è§£åŒ…åˆ°ç½‘ç»œå±‚å‘ç°äº†ç›®æ ‡ipï¼Œåœ¨å®ƒçš„é»‘åå•é‡Œï¼Œå®ƒä¼šæ‹’ç»æˆ–ä¼ªé€ æ•°æ®ï¼ˆå›ç¨‹é˜»æ–­ï¼Œå‡ºå»çš„æ•°æ®åŒ…ä¸æ‹¦æˆªï¼ŒæœåŠ¡å™¨è¿”å›çš„åŒ…æ‰æ‹¦æˆªï¼Œè¿™ä¼šå¯¼è‡´ç¬¬2æ¬¡æ¡æ‰‹æ— æ³•å®Œæˆï¼Œè¢«é˜»æ–­çš„æœåŠ¡å™¨ä¼šä¸åœçš„é‡ä¼ ï¼Œå®¢æˆ·ç«¯ä¼šä¸€ç›´ç­‰å¾…è¶…æ—¶ï¼‰&lt;/p>
&lt;h3 id="åŸŸåè¢«ban">åŸŸåè¢«ban&lt;/h3>
&lt;p>è°·æ­Œæœ‰å¾ˆå¤šæœåŠ¡å™¨ï¼Œå…¶ä¸­ä¸€ä¸ªæ²¡åœ¨é»‘åå•ä¸Šï¼ŒGFWæ”¾è¡Œäº†ã€‚è¿”å›çš„æ•°æ®åŒ…ä¹Ÿè¢«æ”¾è¡Œæ¥åˆ°æœ¬æœºã€‚ç°åœ¨å¼€å§‹å‘æ•°æ®ï¼Œæ¥åˆ° GFWï¼Œç½‘ç»œå±‚ipæ²¡é—®é¢˜ï¼Œåº”ç”¨å±‚å‘ç°è¦google.comçš„æ•°æ®ï¼Œgoogle.com åŸŸååœ¨é»‘åå•é‡Œï¼Œæ•°æ®åŒ…è¢«å¹²æ‰&lt;/p>
&lt;h3 id="é‡æ”¾æ”»å‡»">é‡æ”¾æ”»å‡»&lt;/h3>
&lt;p>é˜²ç«å¢™ç”¨æœ¬æœºå‘é€çš„æ•°æ®åŒ…æ¢æµ‹ç›®æ ‡VPSï¼Œæœ‰æ²¡æœ‰è¿è¡Œç‰¹å®šæœåŠ¡ï¼Œæ¯”å¦‚SS&lt;/p>
&lt;h2 id="å¯¹ç­–">å¯¹ç­–&lt;/h2>
&lt;p>åŠ å¯†æ•°æ®ï¼š&lt;/p>
&lt;p>ä¼ ç»Ÿvpnèƒ½åŠ å¯†ï¼Œä½†æ˜¯ç‰¹å¾å¤ªæ˜æ˜¾&lt;/p>
&lt;p>shadowsocksåè®®ï¼švpsä¸Šæ­å»ºssæœåŠ¡ç«¯ï¼Œç›‘å¬ç«¯å£1111ï¼Œæœ¬æœºè¿è¡Œsså®¢æˆ·ç«¯å¹¶ç›‘å¬ç«¯å£1080ï¼Œæµè§ˆå™¨è®¾ç½®ä»£ç†ç«¯å£&lt;/p>
&lt;p>vmessåè®®&lt;/p>
&lt;h2 id="æ­å»º-shadowsocks-èŠ‚ç‚¹æ²¡æœ‰å®æ“">æ­å»º Shadowsocks èŠ‚ç‚¹(æ²¡æœ‰å®æ“)&lt;/h2>
&lt;p>ä¼ªè£…æˆhttp&lt;/p>
&lt;p>è´­ä¹°VPSï¼ŒSSHè¿æ¥&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt install shadowsocks-libev &lt;span class="c1"># å®‰è£…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl status shadowsocks-libev.service &lt;span class="c1"># æŸ¥çœ‹çŠ¶æ€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim /etc/shadowsocks-libev/config.json &lt;span class="c1"># ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œipæ”¹ä¸º0.0.0.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart shadowsocks-libev.service &lt;span class="c1"># é‡å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">journalctl -u shadowsocks-libev.service -f &lt;span class="c1"># æŸ¥çœ‹æ—¥å¿—&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é˜²ç«å¢™è®¾ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ufw status &lt;span class="c1"># æŸ¥çœ‹çŠ¶æ€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw allow &lt;span class="m">8388&lt;/span> &lt;span class="c1"># å¼€æ”¾ç«¯å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw deny &lt;span class="m">8388&lt;/span> &lt;span class="c1"># æ‹’ç»ç«¯å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw delete allow &lt;span class="m">8388&lt;/span> &lt;span class="c1"># åˆ é™¤è§„åˆ™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw disable &lt;span class="c1"># å…³é—­é˜²ç«å¢™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw &lt;span class="nb">enable&lt;/span> &lt;span class="c1">#å¯åŠ¨é˜²ç«å¢™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>æœ€è¿‘çš„å¿ƒå¾—ï¼šé˜²ç«å¢™ç™½åå•+æŠ—å°é”snapç‰ˆshadowsocks-libev+OutlineVPNå®¢æˆ·ç«¯ éå¸¸æŠ—æï¼ŒçœŸé¦™ï¼ï¼ˆå…³é”®SSæ¯”åŸºäºtlsçš„å¦‚trojan,v2rayé€Ÿåº¦è¦å¿«ï¼‰&lt;/p>
&lt;p>æˆ‘ä¹Ÿæ˜¯çœ‹äº†ç½‘ä¸Šå„è·¯æ–‡ç« æ‰æœ‰äº†è¿™æ€è·¯çš„ï¼Œç›®å‰ç”¨å¾—å¾ˆå¥½ã€‚1ã€é˜²ç«å¢™100%é˜»æ–­ä¸­é—´äººï¼Œå› ä¸ºåªæœ‰ä½ è®¾ç½®å¥½ç™½åå•çš„IPæ‰èƒ½è¿æ¥æœåŠ¡å™¨ ã€‚2ã€æŠ—å°é”snapæœ€æ–°ç‰ˆï¼ˆedgeç‰ˆä¸æ˜¯stableç‰ˆï¼‰å¯èƒ½åœ¨é˜²ä¸»åŠ¨è¯†åˆ«éƒ¨åˆ†é’ˆå¯¹æ€§æ”¹åŠ¨äº†ä¸€ä¸‹ï¼Œå¬è¯´å»äº†é‡æ”¾è¿‡æ»¤å™¨ã€‚3ã€outlineVPNå®¢æˆ·ç«¯å¬è¯´å¯ä»¥åˆå¹¶éƒ¨åˆ†æµé‡ï¼Œä»¥å‡å°‘è¢«åŠ¨è¯†åˆ«æ‹‰æ¸…å•ï¼ˆç„å­¦ï¼‰&lt;/p>
&lt;/blockquote>
&lt;p>è£¸å¥”çš„ssæœåŠ¡å®¹æ˜“è¢«é‡æ”¾æ”»å‡»æ¢æµ‹åˆ°ï¼Œç”¨pluginä¼ªè£…æ•°æ®æµé‡&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/shadowsocks/v2ray-plugin" target="_blank" rel="noopener"
>https://github.com/shadowsocks/v2ray-plugin&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">apt install shadowsocks-v2ray-plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dpkg -L
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ss-v2ray-plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim /etc/shadowsocks-libev/config.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ &lt;span class="s2">&amp;#34;plugin&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;ss-v2ray-plugin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+ &lt;span class="s2">&amp;#34;plugin_opts&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;server&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart shadowsocks-libev.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="trojan-åŸç†å’Œæ­å»º">Trojan åŸç†å’Œæ­å»º&lt;/h2>
&lt;p>ä¼ªè£…æˆhttps&lt;/p>
&lt;p>httpçš„é—®é¢˜ï¼šæ˜æ–‡ã€å¯è¢«ç¯¡æ”¹&lt;/p>
&lt;p>https: http + tls&lt;/p>
&lt;h3 id="tls">TLS&lt;/h3>
&lt;p>éå¯¹ç§°åŠ å¯†ï¼šå…¬é’¥ã€ç§é’¥&lt;/p>
&lt;p>æœåŠ¡å™¨å‘CAæœºæ„è¯·æ±‚SSLè¯ä¹¦ï¼ŒCAæœºæ„è¦æ±‚è¯æ˜åŸŸåæ‰€æœ‰æƒåé¢å‘è¯æ˜ï¼ˆåŒ…å«å…¬é’¥å’Œæœ‰æ•ˆæœŸï¼‰ï¼Œä¹‹åæ‰èƒ½è¿›è¡Œhttpsè®¿é—®&lt;/p>
&lt;p>httpæ•°æ®äº¤ç»™tlsè¿›è¡ŒåŠ å¯†ï¼Œå…ˆè¦è·Ÿç½‘ç«™å»ºç«‹tlsè¿æ¥ï¼Œç”¨å¯¹æ–¹çš„å…¬é’¥åŠ å¯†æ•°æ®ï¼ˆå®é™…ä¸Šæ˜¯æ¡æ‰‹ååå•†å‡ºå¯¹ç§°åŠ å¯†ç®—æ³•çš„å¯†é’¥ï¼‰åå‘é€ï¼ŒæœåŠ¡å™¨ç”¨ç§é’¥è§£å¯†&lt;/p>
&lt;blockquote>
&lt;p>æ‰€ä»¥ tls åè®®æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•åå•†å‡ºå¯¹ç§°åŠ å¯†ç®—æ³•çš„ä¸»å¯†é’¥ï¼ˆä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•ä¿æŠ¤ä¸»å¯†é’¥ä¸è¢«ä¸­é—´äººçªƒå–ï¼‰ï¼Œç„¶ååˆ‡æ¢åˆ°ä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆä½¿ç”¨å¯¹åº”çš„ä¸»å¯†é’¥ï¼‰è¿›è¡ŒåŒå‘é€šè®¯ã€‚&lt;/p>
&lt;/blockquote>
&lt;h3 id="trojan">Trojan&lt;/h3>
&lt;p>ä¸è€çƒ¦äº†ï¼Œç›´å¥”ä¸»é¢˜ï¼Œä¸‹æ¬¡å†æ¥ï¼&lt;/p>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=gw2Vl1h89Wo&amp;amp;list=PL5TbbtexT8T3d_7UX2aSFhoMYk-cl4kf4&amp;amp;index=4" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=gw2Vl1h89Wo&amp;list=PL5TbbtexT8T3d_7UX2aSFhoMYk-cl4kf4&amp;index=4&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;h2 id="vmess--tcp-tls">Vmess + TCP +TLS&lt;/h2>
&lt;h3 id="æœåŠ¡å™¨ç«¯">æœåŠ¡å™¨ç«¯&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!!!é‡è¦ï¼x-uiä¸è¦æŠŠxrayç‰ˆæœ¬å‡çº§åˆ°1.7.5ä»¥ä¸Šï¼Œå¦åˆ™æ— æ³•æ­å»ºvlessèŠ‚ç‚¹ï¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="c1">#æ›´æ–°è½¯ä»¶æº&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#å¯ç”¨ BBR TCP æ‹¥å¡æ§åˆ¶ç®—æ³•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.core.default_qdisc=fq&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.ipv4.tcp_congestion_control=bbr&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#å®‰è£…x-uiï¼š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash &amp;lt;&lt;span class="o">(&lt;/span>curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>(å®‰è£…Nginxã€ç”³è¯·SSLè¯ä¹¦)&lt;/p>
&lt;blockquote>
&lt;p>httpç«™ç‚¹ä¼˜å…ˆï¼Œä¸ªäººç½‘ç›˜ç¬¦åˆå•èŠ‚ç‚¹å¤§æµé‡ç‰¹å¾&lt;/p>
&lt;/blockquote>
&lt;p>åœ¨æµè§ˆå™¨æœç´¢ &lt;code>intext:ç™»å½• Cloudreve&lt;/code>ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¯è®¿é—®çš„ç½‘ç«™ä½œä¸ºä¼ªè£…ç«™&lt;/p>
&lt;p>é…ç½® Nginx&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># åˆ›å»ºé…ç½®æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch /etc/nginx/sites-available/vmess.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># è¿›å…¥ä¿®æ”¹&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vim /etc/nginx/sites-available/vmess.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é…ç½®æ–‡ä»¶å†…å®¹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl"> server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen &lt;span class="m">443&lt;/span> ssl&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server_name joy.ponderduck.cc&lt;span class="p">;&lt;/span> &lt;span class="c1">#ä½ çš„åŸŸå&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate /etc/letsencrypt/live/ponderduck.cc/fullchain.pem&lt;span class="p">;&lt;/span> &lt;span class="c1">#è¯ä¹¦ä½ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_certificate_key /etc/letsencrypt/live/ponderduck.cc/privkey.pem&lt;span class="p">;&lt;/span> &lt;span class="c1">#ç§é’¥ä½ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_timeout 1d&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_cache shared:MozSSL:10m&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_session_tickets off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_protocols TLSv1.2 TLSv1.3&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ssl_prefer_server_ciphers off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://pan.qdovo.com/&lt;span class="p">;&lt;/span> &lt;span class="c1">#ä¼ªè£…ç½‘å€&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_ssl_server_name on&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sub_filter_once off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sub_filter &lt;span class="s2">&amp;#34;pan.qdovo.com&amp;#34;&lt;/span> &lt;span class="nv">$server_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host &lt;span class="s2">&amp;#34;pan.qdovo.com&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Referer &lt;span class="nv">$http_referer&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP &lt;span class="nv">$remote_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header User-Agent &lt;span class="nv">$http_user_agent&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For &lt;span class="nv">$proxy_add_x_forwarded_for&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-Proto https&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Accept-Encoding &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Accept-Language &lt;span class="s2">&amp;#34;zh-CN&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /ray &lt;span class="o">{&lt;/span> &lt;span class="c1">#åˆ†æµè·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://127.0.0.1:10000&lt;span class="p">;&lt;/span> &lt;span class="c1">#Xrayç«¯å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Upgrade &lt;span class="nv">$http_upgrade&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Connection &lt;span class="s2">&amp;#34;upgrade&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host &lt;span class="nv">$host&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Real-IP &lt;span class="nv">$remote_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header X-Forwarded-For &lt;span class="nv">$proxy_add_x_forwarded_for&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /xui &lt;span class="o">{&lt;/span> &lt;span class="c1">#xuiè·¯å¾„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_redirect off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_pass http://127.0.0.1:9999&lt;span class="p">;&lt;/span> &lt;span class="c1">#xuiç›‘å¬ç«¯å£&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_http_version 1.1&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> proxy_set_header Host &lt;span class="nv">$host&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> listen 80&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location /.well-known/ &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /var/www/html&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location / &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rewrite ^&lt;span class="o">(&lt;/span>.*&lt;span class="o">)&lt;/span>$ https://&lt;span class="nv">$host$1&lt;/span> permanent&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æµ‹è¯•ã€å»ºç«‹è½¯é“¾æ¥ã€é‡å¯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">nginx -t
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /etc/nginx/sites-available/vmess.conf /etc/nginx/sites-enabled/vmess.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl start nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># or&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx -s reload
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å‚è€ƒ--è‡´è°¢">å‚è€ƒ &amp;amp; è‡´è°¢&lt;/h2>
&lt;p>&lt;a class="link" href="https://v2xtls.org/clashx%E9%85%8D%E7%BD%AEv2ray%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener"
>ClashXé…ç½®V2rayæ•™ç¨‹&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>[ç¼–è¯‘ã€é…ç½®nginx,ä½¿V2ray,Xray,Trojan,åšå®¢ç½‘ç«™ç­‰å…±ç”¨443ç«¯å£](&lt;/p></description></item><item><title>åˆé‡ PostgreSQL</title><link>https://falasool.github.io/2023/postgresql/</link><pubDate>Mon, 26 Jun 2023 11:21:32 +0800</pubDate><guid>https://falasool.github.io/2023/postgresql/</guid><description>&lt;p>ä»¥ç°æœ‰ Pleroma æ•°æ®åº“ä¸ºåŸºç¡€å­¦ä¹  postgreSQL&lt;/p>
&lt;h2 id="æœ¬åœ°å®‰è£…-pg">æœ¬åœ°å®‰è£… PG&lt;/h2>
&lt;h3 id="ç”¨-homebrew-å®‰è£…">ç”¨ Homebrew å®‰è£…&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">brew install postgresql@13
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ·»åŠ ç¯å¢ƒå˜é‡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl"># ~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ # PostgreSQL
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ export PATH=&amp;#34;/opt/homebrew/Cellar/postgresql@13/13.11_1/bin:$PATH&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ export PGDATA=&amp;#34;/opt/homebrew/var/postgresql@13&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è®©ä¿®æ”¹ç”Ÿæ•ˆ &amp;amp; æµ‹è¯•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc &lt;span class="c1"># å¯¹é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ç”Ÿæ•ˆ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pg_ctl -V &lt;span class="c1"># æŸ¥çœ‹ç‰ˆæœ¬ï¼Œreturn `pg_ctl (PostgreSQL) 13.1` &lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="dmg-å®‰è£…">dmg å®‰è£…&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" target="_blank" rel="noopener"
>ä¸‹è½½&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
&lt;/p>
&lt;p>ä¿®æ”¹ç¯å¢ƒå˜é‡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/Library/PostgreSQL/13/bin:&lt;/span>&lt;span class="nv">$PATH&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">source&lt;/span> ~/.zshrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="è¿œç¨‹æ“ä½œ-pg">è¿œç¨‹æ“ä½œ PG&lt;/h2>
&lt;h3 id="ç™»å½•">ç™»å½•&lt;/h3>
&lt;p>å…è®¸è¿œç¨‹ç™»å½•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">locate postgresql.conf &lt;span class="c1"># å®šä½æ–‡ä»¶ä½ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/postgresql/13/main/postgresql.conf &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">listen_addresses&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span> &lt;span class="c1"># ä¿®æ”¹å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ·»åŠ å®¢æˆ·ç«¯é‰´å®šæ¡ç›®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># /etc/postgresql/13/main/pg_hba.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å…è®¸ç”¨æˆ·åœ¨æä¾›æœ‰æ•ˆå£ä»¤ï¼ˆmd5ï¼‰åä»æŸä¸ª IP åœ°å€ç™»å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host all all 0.0.0.0/0 md5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">host all all ::0/0 md5
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>[å¯é€‰]ä¿®æ”¹å¯†ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">postgres&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="c1"># alter user postgres with password &amp;#39;xxxxxxxx&amp;#39;;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ALTER ROLE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åé‡å¯ pg&lt;/p>
&lt;p>ä½†æ˜¯ä¸çŸ¥é“ä¸ºå•¥ï¼ˆä¹Ÿè®¸ä»¥åå°±çŸ¥é“äº†ï¼‰æˆ‘å¼€å¯ 5432 ç«¯å£æ— æ•ˆï¼šufw å‘½ä»¤è¿”å›ç»“æœæ˜¾ç¤ºå·²å¼€å¯ï¼Œé˜²ç«å¢™è§„åˆ™æ·»åŠ äº†ï¼Œip æ£€æŸ¥å·¥å…·è¿˜æ˜¯æ˜¾ç¤ºç«¯å£æœªå¼€æ”¾ã€‚ç„¶åé»›é»›æ•™äº†æˆ‘ç«¯å£è½¬å‘&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ssh -L 127.0.0.1:5432:127.0.0.1:5432 username@hostname
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿ä¸Šä¹‹åä¿æŒæ‰“å¼€è¿™ä¸ªçª—å£ï¼Œæˆ‘ç”¨ Navicat è¿ä¸Šäº†æ•°æ®åº“ï¼Œç¬¬ä¸€æ¬¡è§åˆ°äº†æ•°æ®åº“åˆ°åº•æ˜¯å•¥ç»“æ„â€¦â€¦ï¼ˆNavicat æ˜¯ä»€ä¹ˆè¯·çœ‹ &lt;a class="link" href="https://www.navicat.com.cn/manual/online_manual/cn/navicat_16/win_manual/#/main_window" target="_blank" rel="noopener"
>ç”¨æˆ·æ‰‹å†Œ&lt;/a>
&lt;span style="white-space: nowrap;">&lt;svg width=".7em" height=".7em" viewBox="0 0 21 21"
xmlns="http://www.w3.org/2000/svg">
&lt;path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
&lt;path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
fill="currentColor">
&lt;/svg>&lt;/span>
ï¼‰&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307032252841.webp"
loading="lazy"
alt="image"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ public &lt;span class="c1"># public æ˜¯é»˜è®¤çš„æ•°æ®åº“æ¨¡å¼ï¼ˆschemaï¼‰ã€‚ä¸€ä¸ªæ•°æ®åº“å¯ä»¥åŒ…å«å¤šä¸ªæ¨¡å¼ï¼Œè€Œæ¯ä¸ªæ¨¡å¼åˆå¯ä»¥åŒ…å«å¤šä¸ªè¡¨ã€è§†å›¾ã€å‡½æ•°ç­‰å¯¹è±¡.schema æ˜¯ä¸€ç§é€»è¾‘å®¹å™¨ï¼Œç”¨äºç»„ç»‡å’Œç®¡ç†æ•°æ®åº“å¯¹è±¡ã€‚å®ƒå¯ä»¥å¸®åŠ©åœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­å¯¹ä¸åŒçš„å¯¹è±¡è¿›è¡Œåˆ†ç±»å’Œåˆ†ç»„&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ Tables &lt;span class="c1"># è¡¨æ˜¯å­˜å‚¨æ•°æ®çš„åŸºæœ¬å¯¹è±¡ï¼Œç±»ä¼¼äºç”µå­è¡¨æ ¼æˆ–æ•°æ®åº“ä¸­çš„è¡¨æ ¼ã€‚å®ƒä»¬ç”±è¡Œå’Œåˆ—ç»„æˆï¼Œç”¨äºå­˜å‚¨å’Œç»„ç»‡æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ Views &lt;span class="c1"># è§†å›¾æ˜¯è™šæ‹Ÿè¡¨ï¼Œæ˜¯æ ¹æ®å­˜å‚¨åœ¨å…¶ä»–è¡¨ä¸­çš„æ•°æ®å®šä¹‰çš„æŸ¥è¯¢ç»“æœã€‚è§†å›¾å¯ä»¥ç®€åŒ–å¤æ‚æŸ¥è¯¢ï¼Œå¹¶æä¾›ä¸€ç§æ–¹å¼æ¥è®¿é—®å’Œä½¿ç”¨æ•°æ®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ Materialized Views &lt;span class="c1"># ææ–™åŒ–è§†å›¾æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„è§†å›¾ï¼Œå®ƒåœ¨åˆ›å»ºæ—¶å°†æŸ¥è¯¢ç»“æœç¼“å­˜ä¸ºå®é™…çš„è¡¨ã€‚ä¸æ™®é€šè§†å›¾ä¸åŒï¼Œææ–™åŒ–è§†å›¾çš„å†…å®¹åœ¨æŸ¥è¯¢æ—¶ä¸ä¼šå†æ¬¡è®¡ç®—ï¼Œè€Œæ˜¯ä½¿ç”¨é¢„å…ˆè®¡ç®—çš„ç»“æœ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ Functions &lt;span class="c1"># å‡½æ•°æ˜¯ä¸€æ®µå°è£…äº†ç‰¹å®šåŠŸèƒ½çš„å¯é‡ç”¨ä»£ç å—ã€‚åœ¨æ•°æ®åº“ä¸­ï¼Œå‡½æ•°ç”¨äºæ‰§è¡Œç‰¹å®šçš„è®¡ç®—ã€å¤„ç†æ•°æ®æˆ–è¿”å›ç»“æœ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ Queries
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Â  â””â”€â”€ Backups
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è§£å†³æ•°æ®åº“å¢é•¿è¿‡å¿«çš„é—®é¢˜åˆ°åº•è§£å†³äº†æ²¡æœ‰å‘¢">è§£å†³æ•°æ®åº“å¢é•¿è¿‡å¿«çš„é—®é¢˜ï¼ˆåˆ°åº•è§£å†³äº†æ²¡æœ‰å‘¢ï¼Ÿï¼‰&lt;/h3>
&lt;p>å‰æï¼šå¤‡ä»½æ•°æ®åº“&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å¤‡ä»½&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod &lt;span class="m">777&lt;/span> /pleromabackup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">su - postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">psql -U postgres
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">postgres&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="c1"># \! pg_dump pleroma -f /pleromabackup/pleroma.pgdump&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ£€æŸ¥å¤‡ä»½ç›®å½•å¤§å°&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>xxx@xxx pleromabackup&lt;span class="o">]&lt;/span>&lt;span class="c1"># du -hs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">341M .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ **æŸ¥è¯¢æ‰€æœ‰è¡¨çš„è¡Œæ•°ï¼š**åˆ›å»ºä¸€ä¸ª &lt;code>count_em_all&lt;/code> å‡½æ•°ï¼Œç„¶åè°ƒç”¨å®ƒè·å¾—å‡†ç¡®çš„ç»Ÿè®¡ä¿¡æ¯&lt;/p>
&lt;ol>
&lt;li>åˆ›å»ºï¼š&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">TYPE&lt;/span> &lt;span class="n">table_count&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">table_name&lt;/span> &lt;span class="nb">TEXT&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">num_rows&lt;/span> &lt;span class="nb">INTEGER&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">CREATE&lt;/span> &lt;span class="k">OR&lt;/span> &lt;span class="k">REPLACE&lt;/span> &lt;span class="k">FUNCTION&lt;/span> &lt;span class="n">count_em_all&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="k">RETURNS&lt;/span> &lt;span class="k">SETOF&lt;/span> &lt;span class="n">table_count&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="s1">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">DECLARE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> the_count RECORD;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> t_name RECORD;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r table_count%ROWTYPE;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">BEGIN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FOR t_name IN
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> SELECT
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> c.relname
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FROM
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> pg_catalog.pg_class c LEFT JOIN pg_namespace n ON n.oid = c.relnamespace
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> WHERE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> c.relkind = &amp;#39;&amp;#39;r&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> AND n.nspname = &amp;#39;&amp;#39;public&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> ORDER BY 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> LOOP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> FOR the_count IN EXECUTE &amp;#39;&amp;#39;SELECT COUNT(*) AS &amp;#34;count&amp;#34; FROM &amp;#39;&amp;#39; || t_name.relname
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> LOOP
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> END LOOP;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r.table_name := t_name.relname;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> r.num_rows := the_count.count;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> RETURN NEXT r;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> END LOOP;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> RETURN;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">END;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="k">LANGUAGE&lt;/span> &lt;span class="n">plpgsql&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>è°ƒç”¨&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_em_all&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">)&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">r&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">num_rows&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç»“æœï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">table_name&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">num_rows&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--------------------------------------------+----------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">171772&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">120664&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags_objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">38433&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">22054&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">7719&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">deliveries&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">5420&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter_cache&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">876&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">notifications&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">570&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_authorizations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">479&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">474&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">following_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">472&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">schema_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">302&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apps&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">83&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">53&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participation_recipient_ships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">36&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instances&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">34&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_jobs&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmarks&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">backups&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moderation_log&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password_reset_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lists&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_peers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcements&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filters&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcement_read_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migration_failed_ids&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mfa_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chats&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chat_message_references&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">push_subscriptions&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">registrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">report_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scheduled_activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thread_mutes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_invite_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">42&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ &lt;strong>æŸ¥è¯¢æ‰€æœ‰è¡¨çš„æ€»å¤§å°&lt;/strong>ï¼ˆæ‹¬è¡¨æ•°æ®æ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ã€TOASTè¡¨ã€Free Space Mapç­‰å¯¹è±¡çš„å¤§å°ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="n">relname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pg_size_pretty&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pg_total_relation_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">relid&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">size_mb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">pg_stat_user_tables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">pg_total_relation_size&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">relid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">DESC&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">relname&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">size_mb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">--------------------------------------------+---------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">266&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">258&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_jobs&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">100&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">users&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">64&lt;/span> &lt;span class="n">MB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags_objects&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">4096&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hashtags&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">1288&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">deliveries&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">960&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">592&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oauth_authorizations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">344&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">notifications&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">240&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">following_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">232&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">counter_cache&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">208&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apps&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">176&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">instances&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">96&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">88&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">lists&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">markers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">oban_peers&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">80&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">schema_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">64&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversation_participation_recipient_ships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">56&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">56&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">config&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">backups&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">48&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conversations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmarks&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">40&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">filters&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scheduled_activities&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">registrations&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chat_message_references&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">moderation_log&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">32&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password_reset_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">24&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">push_subscriptions&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">24&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_invite_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mfa_tokens&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcement_read_relationships&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">thread_mutes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">announcements&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">report_notes&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chats&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_migration_failed_ids&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mf">16&lt;/span> &lt;span class="n">kB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">42&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ—å‡ºè¡Œæ•°å’Œ size æ’å‰äº”çš„è¡¨&lt;/p>
&lt;p>ğŸŒŸ &lt;strong>activities è¡¨&lt;/strong>&lt;/p>
&lt;p>type å­—æ®µçš„æ‰€æœ‰å€¼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="k">DISTINCT&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">?&lt;/span>&lt;span class="k">column&lt;/span>&lt;span class="o">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">Follow&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Block&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Announce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Move&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Delete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Undo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Create&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">EmojiReact&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Remove&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Like&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">Add&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Reject&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Accept&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="mf">14&lt;/span> &lt;span class="k">rows&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ—å‡ºå€¼æ˜¯ Announce çš„æ‰€æœ‰è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;Announce&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pleroma_ctl&lt;/span> &lt;span class="k">database&lt;/span> &lt;span class="k">vacuum&lt;/span> &lt;span class="k">full&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;actor&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;type&amp;#39;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="k">type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;updated_at&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="s">&amp;#34;activities&amp;#34;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="s">&amp;#34;objects&amp;#34;&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ON&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">COALESCE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;to&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;cc&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://pleroma.your.site/users/admin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">ORDER&lt;/span> &lt;span class="k">BY&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;updated_at&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ users è¡¨é‡Œæœ‰å¾ˆå¤šå¾ˆå¤šåªæœ‰ nickname çš„ç”¨æˆ·ï¼Œå®ƒä»¬æ‰€åœ¨å®ä¾‹æ˜¯çœŸå®çš„ï¼Œä½†æ˜¯ ID ä¸æ˜¯ï¼Œæˆ‘æŠŠè¿™äº›è¡Œåˆ äº†ï¼Œæš‚æ—¶è¿˜æ²¡å‡ºé—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">name&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">users&lt;/span> &lt;span class="k">WHERE&lt;/span> &lt;span class="k">name&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ åˆ é™¤äº†ä¸€ä¸ª bot çš„è®°å½•&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">SELECT&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://xx.ca/users/xxxBot&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://xx.ca/users/xxxBot&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">485&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ åˆ é™¤äº† activities è¡¨ 2023-06-15 ä¹‹å‰ã€ä¸æˆ‘æ— è®¨è®ºå…³ç³»ã€ä¹¦ç­¾ä»¥å¤–çš„å†…å®¹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">activity_id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">bookmarks&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">AND&lt;/span> &lt;span class="n">inserted_at&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="s1">&amp;#39;2023-06-15&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">AND&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">SELECT&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="n">id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">INNER&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="k">AS&lt;/span> &lt;span class="n">o&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">COALESCE&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;actor&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;to&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">OR&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="s">&amp;#34;data&amp;#34;&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;cc&amp;#39;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s1">&amp;#39;https://ponderduck.cc/users/yaya&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">89430&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ğŸŒŸ åˆ é™¤äº† objects è¡¨ä¸ä»¥ä¸Šå†…å®¹å¯¹åº”çš„è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ temp_objects
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æ¥å­˜å‚¨é‚£äº›åœ¨ activities è¡¨ä¸­æ‰¾ä¸åˆ°å¯¹åº”è¡Œçš„ objects è¡¨çš„è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">CREATE&lt;/span> &lt;span class="k">TEMPORARY&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">temp_objects&lt;/span> &lt;span class="k">AS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span> &lt;span class="n">o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">LEFT&lt;/span> &lt;span class="k">JOIN&lt;/span> &lt;span class="n">activities&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="k">ON&lt;/span> &lt;span class="n">o&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="mf">.&lt;/span>&lt;span class="k">data&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;object&amp;#39;&lt;/span>&lt;span class="o">-&amp;gt;&amp;gt;&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span> &lt;span class="k">IS&lt;/span> &lt;span class="k">NULL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span> &lt;span class="mf">128652&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æŠ¥é”™ï¼š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶è¿åäº†å¤–é”®çº¦æŸ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">objects è¡¨ä¸­çš„æŸäº›è¡Œä»ç„¶è¢« deliveries è¡¨å¼•ç”¨ï¼Œå› æ­¤æ— æ³•ç›´æ¥åˆ é™¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">deliveries è¡¨æ˜¯ç”¨äºè·Ÿè¸ªæ¶ˆæ¯ä¼ é€’çš„è¡¨ï¼Œé€šå¸¸åœ¨ ActivityPub åè®®çš„å®ç°ä¸­ä½¿ç”¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">å®ƒè®°å½•äº†æ¶ˆæ¯ä¼ é€’çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚å‘é€æ–¹ã€æ¥æ”¶æ–¹ã€æ¶ˆæ¯å†…å®¹ç­‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æ¯æ¡è®°å½•ä»£è¡¨ä¸€æ¬¡æ¶ˆæ¯ä¼ é€’æˆ–äº¤äº’ã€‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">åœ¨ Pleroma ä¸­ï¼Œdeliveries è¡¨ç”¨äºå­˜å‚¨æ¶ˆæ¯çš„ä¼ é€’çŠ¶æ€å’Œç›¸å…³ä¿¡æ¯ï¼Œä»¥ç¡®ä¿æ¶ˆæ¯èƒ½å¤Ÿæ­£ç¡®åœ°ä¼ é€’ç»™ç›®æ ‡ç”¨æˆ·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">å®ƒä¸ objects è¡¨å’Œ activities è¡¨ä¹‹é—´å¯èƒ½å­˜åœ¨å¤–é”®å…³ç³»ï¼Œç”¨äºä¿è¯æ•°æ®çš„å®Œæ•´æ€§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ERROR&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">update&lt;/span> &lt;span class="k">or&lt;/span> &lt;span class="k">delete&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;objects&amp;#34;&lt;/span> &lt;span class="n">violates&lt;/span> &lt;span class="k">foreign&lt;/span> &lt;span class="k">key&lt;/span> &lt;span class="k">constraint&lt;/span> &lt;span class="s">&amp;#34;deliveries_object_id_fkey&amp;#34;&lt;/span> &lt;span class="k">on&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;deliveries&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">DETAIL&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="k">Key&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">75072&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">is&lt;/span> &lt;span class="n">still&lt;/span> &lt;span class="n">referenced&lt;/span> &lt;span class="k">from&lt;/span> &lt;span class="k">table&lt;/span> &lt;span class="s">&amp;#34;deliveries&amp;#34;&lt;/span>&lt;span class="mf">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">æ‰€ä»¥å…ˆåˆ é™¤è¢« deliveries è¡¨å¼•ç”¨çš„è¡Œ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">deliveries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">user_id&lt;/span> &lt;span class="k">NOT&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">activities&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">6372&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/*
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">ç»§ç»­æ‰§è¡Œåˆ é™¤æ“ä½œå¹¶åˆ é™¤ä¸´æ—¶è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DELETE&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">objects&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">WHERE&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">IN&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">SELECT&lt;/span> &lt;span class="n">id&lt;/span> &lt;span class="k">FROM&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DELETE&lt;/span> &lt;span class="mf">128652&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pleroma&lt;/span>&lt;span class="o">=#&lt;/span> &lt;span class="k">DROP&lt;/span> &lt;span class="k">TABLE&lt;/span> &lt;span class="n">temp_objects&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">DROP&lt;/span> &lt;span class="k">TABLE&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€å &lt;code>su pleroma -s $SHELL -lc &amp;quot;./bin/pleroma_ctl database vacuum full &amp;quot;&lt;/code>ï¼Œä½†æ˜¯ï¼SQL å‘½ä»¤æœ‰é—®é¢˜ï¼Œåˆ äº†æˆ‘å¥½å¤šå˜Ÿï¼Œå‘œå‘œå‘œå“­ç€å€’åœ°ã€‚é‡æ–°çœ‹äº†ä¸€ä¸‹æ•°æ®åº“å¤§å°ï¼Œç°åœ¨å€’æ˜¯å˜å¾—è¿·ä½ äº†ï¼Œ164 MBã€‚ä½†æ˜¯è¿™ä¸€åˆ‡çœŸçš„å€¼å¾—å—â€¦â€¦å®Œå…¨åœ¨æˆ‘è®¡åˆ’å¤–çš„â€¦â€¦&lt;/p>
&lt;h3 id="å¸¸ç”¨-psql-å‘½ä»¤">å¸¸ç”¨ psql å‘½ä»¤&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-postgresql" data-lang="postgresql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŒ‡å®šç”¨æˆ·è¿æ¥&lt;/span>&lt;span class="n">PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŒ‡å®šæ•°æ®åº“è¿æ¥&lt;/span>&lt;span class="n">PostgreSQL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">psql&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="mf">127.0.0.1&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="mf">5432&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">pg&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">è¿æ¥åˆ°æœ¬åœ°ä¸»æœºï¼ˆ&lt;/span>&lt;span class="mf">127.0.0.1&lt;/span>&lt;span class="err">ï¼‰çš„&lt;/span> &lt;span class="n">PostgreSQL&lt;/span> &lt;span class="err">æ•°æ®åº“æœåŠ¡å™¨ï¼Œä½¿ç”¨ç”¨æˆ·å&lt;/span> &lt;span class="n">pg&lt;/span> &lt;span class="err">è¿æ¥åˆ°åä¸º&lt;/span> &lt;span class="n">postgres&lt;/span> &lt;span class="err">çš„æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">du&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">dbname&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">åˆ‡æ¢åˆ°æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">dt&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">tablename&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŸ¥çœ‹æŒ‡å®šè¡¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">SHOW&lt;/span> &lt;span class="n">data_directory&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">æŸ¥çœ‹æ•°æ®ç›®å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">\&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="o">#&lt;/span> &lt;span class="err">é€€å‡ºäº¤äº’æŸ¥è¯¢æ¨¡å¼&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Vue3 | ToDoList</title><link>https://falasool.github.io/2023/vue3-todolist/</link><pubDate>Wed, 21 Jun 2023 01:29:15 +0800</pubDate><guid>https://falasool.github.io/2023/vue3-todolist/</guid><description>&lt;h2 id="å®ç°åŠŸèƒ½">å®ç°åŠŸèƒ½&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>å±•ç¤ºä»»åŠ¡çš„åˆ—è¡¨&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>v-for&lt;/code> åœ¨æ¨¡æ¿ä¸­å¾ªç¯æ¸²æŸ“ä»»åŠ¡é¡¹ç»„ä»¶ï¼Œå¹¶æ ¹æ®ä»»åŠ¡çš„çŠ¶æ€ï¼ˆå®Œæˆæˆ–æœªå®Œæˆï¼‰è¿›è¡Œä¸åŒçš„å±•ç¤ºæ ·å¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>æ–°å¢ todo&lt;/p>
&lt;ul>
&lt;li>&lt;code>v-model&lt;/code> å®ç°è¾“å…¥æ¡†å’Œæ•°æ®çš„åŒå‘ç»‘å®š&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>ä¿®æ”¹ todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>åˆ é™¤ todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å…¨é€‰/å–æ¶ˆå…¨é€‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç»Ÿè®¡ä»»åŠ¡&lt;/p>
&lt;/li>
&lt;li>
&lt;p>éšè—å·²å®Œæˆ todo&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æœ¬åœ°å‚¨å­˜&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>è¿›é˜¶&lt;/p>
&lt;ol>
&lt;li>ç·¨è¼¯ List é †åº&lt;/li>
&lt;li>å°‡å®Œæˆçš„é …ç›®ç§»è‡³Finishå€åŸŸï¼Œä¸¦ä¸”å°‡å­—é«”æ”¹æˆåˆªé™¤ç·šæ•ˆæœ&lt;/li>
&lt;li>å¢åŠ  Icon ä»¥åŠé–‹å ´å‹•ç•«&lt;/li>
&lt;li>è¨­å®šæ—¥æœŸèˆ‡æ™‚é–“æ¨æ’­&lt;/li>
&lt;/ol>
&lt;h2 id="é¡¹ç›®å®‰è£…">é¡¹ç›®å®‰è£…&lt;/h2>
&lt;p>ç”¨ npm å’Œ vite æ–°å»ºé¡¹ç›®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">npm init vite-app ToDoList
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿›å…¥é¡¹ç›®ã€å®‰è£…ä¾èµ–ã€å¯åŠ¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ToDoList
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm run dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å·¥ç¨‹ç›®å½•ç»“æ„">å·¥ç¨‹ç›®å½•ç»“æ„&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ node_modules &lt;span class="c1"># é¡¹ç›®ä¾èµ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ package-lock.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ package.json &lt;span class="c1"># å­˜æ”¾ä¾èµ–åŒ…ç®¡ç†åŠå‘½ä»¤ç®¡ç†ä¿¡æ¯æ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”œâ”€â”€ public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â”‚Â Â  â””â”€â”€ favicon.ico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">â””â”€â”€ src &lt;span class="c1"># å­˜æ”¾vueæ–‡ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ App.vue &lt;span class="c1"># é¡¹ç›®çš„rootç»„ä»¶ï¼Œç”¨æ¥å¼•å…¥å…¶å®ƒæ¨¡å—&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ components &lt;span class="c1"># å­˜æ”¾è‡ªå®šä¹‰çš„å…¬å…±ç»„ä»¶ï¼ˆ=éè·¯ç”±ç»„ä»¶ï¼‰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”‚Â Â  â””â”€â”€ Helloworld.vue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â”œâ”€â”€ index.css
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â””â”€â”€ main.js &lt;span class="c1"># å…¥å£æ–‡ä»¶ï¼Œç”¨äºåˆå§‹åŒ–vueå®ä¾‹&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ€è·¯">æ€è·¯&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>å…ˆæ­å»ºå¥½æ¡†æ¶ï¼šå†™æ­»æ•°æ®çœ‹é¡µé¢æ•ˆæœå¹¶è°ƒæ•´&lt;/p>
&lt;/li>
&lt;li>
&lt;p>ç„¶åæŠŠä»£ç æ‹†åˆ†è¿›ä¸‰ä¸ªç»„ä»¶ï¼šHeaderã€Listã€Footerï¼ˆæ ‡é¢˜å’Œä»»åŠ¡è¾“å…¥æ¡†ã€ä»»åŠ¡åˆ—è¡¨é¡¹ã€æŒ‰é’®é€‰æ‹©é¡¹å’Œè®¡æ•°ï¼‰&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å†™JSï¼Œå¹¶æ›´æ¢æ¨¡æ¿é¡µé¢ä¸­çš„æ•°æ®ï¼Œç”¨åŠ¨æ€çš„æ•°æ®ä»£æ›¿ã€‚åœ¨setup()å…¥å£å‡½æ•°ä¸­å†™æ•°æ®æºå’Œè¦å®ç°åŠŸèƒ½çš„å‡½æ•°&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤&lt;/h2>
&lt;h3 id="html">HTML&lt;/h3>
&lt;p>è¿™ä¸æ˜¯æœ€ç»ˆç»“æ„ï¼Œåé¢æœ‰ä¿®æ”¹&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202307121504274.webp"
loading="lazy"
alt="image"
>&lt;/p>
&lt;h3 id="css">CSS&lt;/h3>
&lt;details>
&lt;summary>å®‰è£…å’Œé…ç½® TailwindCSS&lt;/summary>
&lt;p>åœ¨Vueçš„æ ¹ç›®å½•ä¸‹ï¼Œå®‰è£… Tailwind åŠå…¶ä¾èµ–é¡¹ï¼ˆPostCSS &amp;amp; auto-prefixerï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install -D tailwindcss postcss autoprefixer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”Ÿæˆé…ç½®æ–‡ä»¶å¹¶æ·»åŠ æ‰€æœ‰æ¨¡æ¿æ–‡ä»¶çš„è·¯å¾„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npx tailwindcss init -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">//tailwind.config.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">module.exports &lt;span class="o">=&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> content: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;./index.html&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;./src/**/*.{vue,js,ts,jsx,tsx}&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> theme: &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> extend: &lt;span class="o">{}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> plugins: &lt;span class="o">[]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ›å»ºä¸€ä¸ª&lt;code>tailwind.css&lt;/code>æ ·å¼æ–‡ä»¶ï¼Œç”¨äºåˆå§‹åŒ–å¹¶å¼•å…¥&lt;code>tailwindcss&lt;/code>çš„åŸºç¡€æ ·å¼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-css" data-lang="css">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">å¤åˆ¶ä»£ç &lt;/span>&lt;span class="c">/* /src/tailwindcss.css*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">base&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">components&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">@&lt;/span>&lt;span class="k">tailwind&lt;/span> &lt;span class="nt">utilities&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯¼å…¥&lt;code>css/tailwindcss.css&lt;/code>åˆ°&lt;code>main.js&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-diff" data-lang="diff">&lt;span class="line">&lt;span class="cl">// src/main.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import { createApp } from &amp;#39;vue&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">import App from &amp;#39;./App.vue&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">+ import &amp;#34;./tailwind.css&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="gi">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">createApp(App).mount(&amp;#39;#app&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/details>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/Falasool/blog-pic-bed@main//blog202308290007098.webp"
loading="lazy"
alt="image"
>&lt;/p></description></item></channel></rss>